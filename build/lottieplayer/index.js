!function(){"use strict";var e=window.wp.blocks,t=window.wp.i18n,l=window.wp.element,n=window.wp.blockEditor,a=window.wp.components,o=function(){let{attributes:e={},setAttributes:o=(()=>{})}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{direction:r,mode:i,renderer:c,speed:s}=e;return(0,l.createElement)(n.InspectorAdvancedControls,{key:"inspector"},(0,l.createElement)(a.SelectControl,{label:(0,t.__)("Renderer"),value:c,onChange:e=>o({renderer:e}),options:[{value:"svg",label:(0,t.__)("SVG")},{value:"canvas",label:(0,t.__)("Canvas")}]}),(0,l.createElement)(a.RangeControl,{label:(0,t.__)("Speed"),min:.5,max:5,step:.5,value:s,onChange:e=>o({speed:e})}),(0,l.createElement)(a.SelectControl,{label:(0,t.__)("Play mode"),value:i,name:"mode",onChange:e=>o({mode:e}),options:[{value:"normal",label:"Normal"},{value:"bounce",label:"Bounce"}]}),(0,l.createElement)(a.SelectControl,{label:(0,t.__)("Direction"),value:r,onChange:e=>o({direction:e}),options:[{value:"1",label:(0,t.__)("Forward")},{value:"-1",label:(0,t.__)("Backward")}]}))};const r=e=>{switch(e){case"contain":default:return"xMidYMid meet";case"cover":return"xMidYMid slice";case"fill":return"none";case"none":return"xMinYMin slice"}},i=e=>{let{ctrlKey:t,key:l,metaKey:n,shiftKey:a}=e;return a||"End"===l||"Home"===l||"Backspace"===l||"Tab"===l||"Enter"===l||"Delete"===l||(t||n)&&("a"===l||"c"===l||"v"===l||"x"===l||"z"===l||"t"===l||"r"===l)},c=e=>{let{key:t}=e;return t>=0&&t<=9},s=function(){let{onChange:e=(()=>{}),subTitle:t="",title:n="",value:o=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.createElement)(a.BaseControl,{help:t,className:"lottie-switch-label"},(0,l.createElement)(a.BaseControl.VisualLabel,null,n),(0,l.createElement)(a.FormToggle,{checked:o,onChange:()=>e(!o)}))},u=function(){let{onChange:e=(()=>{}),title:t="",value:n=null,disabled:o=!1,placeholder:r=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=e=>{i(e)||!c(e)&&e.preventDefault()};return(0,l.createElement)(a.BaseControl,{help:t,className:"lottie-number-wrapper"},(0,l.createElement)(a.TextControl,{value:n,onChange:t=>e(Number(t)),onKeyDown:s,disabled:o,placeholder:r}))};var d=function(){let{attributes:e={},setAttributes:n=(()=>{})}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{align:o,controls:r,height:i,interactivityType:c,loop:d,objectFit:m,width:p}=e;return(0,l.createElement)(a.Panel,null,(0,l.createElement)(a.PanelBody,{title:(0,t.__)("Animation Settings"),initialOpen:!0},(0,l.createElement)(a.SelectControl,{label:(0,t.__)("Play animation on"),value:c,onChange:e=>{n({interactivityType:e,autoplay:"none"===e})},options:[{value:"none",label:(0,t.__)("Page Load")},{value:"hold",label:(0,t.__)("Hover")},{value:"click",label:(0,t.__)("Click")},{value:"scroll",label:(0,t.__)("Scroll")}]}),(0,l.createElement)(s,{title:(0,t.__)("Loop"),subTitle:(0,t.__)("Repeat animation"),value:d,onChange:e=>{n({loop:e})}}),(0,l.createElement)(s,{title:(0,t.__)("Controls"),subTitle:(0,t.__)("Display animation controls"),value:r,onChange:e=>{n({controls:e})}}),(0,l.createElement)(a.PanelRow,{className:"lottie-dimensions"},(0,l.createElement)(u,{title:(0,t.__)("Width"),value:p&&"0"!==p?p:null,onChange:e=>{n({width:null!=e?e:null})},disabled:"full"===o||"wide"===o,placeholder:"full"===o||"wide"===o?"100%":"auto"}),(0,l.createElement)(u,{title:(0,t.__)("Height"),value:i&&"0"!==i?i:null,onChange:e=>{n({height:null!=e?e:null})},placeholder:"auto"})),(0,l.createElement)(a.SelectControl,{label:(0,t.__)("Object fit"),value:m,onChange:e=>{n({objectFit:e})},options:[{value:"contain",label:(0,t.__)("Contain")},{value:"cover",label:(0,t.__)("Cover")},{value:"fill",label:(0,t.__)("Fill")},{value:"none",label:(0,t.__)("None")}]})))},m=function(){let{attributes:e={},setAttributes:n=(()=>{})}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{background:o}=e;return(0,l.createElement)(a.Panel,null,(0,l.createElement)(a.PanelBody,{title:(0,t.__)("Background Settings"),initialOpen:!1},(0,l.createElement)(a.ColorPicker,{color:o,onChange:e=>{n({background:e})},enableAlpha:!0})))};function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e},p.apply(this,arguments)}function b(){return(0,l.createElement)("svg",{className:"custom-icon custom-icon-lottie",role:"img",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 80 80"},(0,l.createElement)("path",{d:"M59.8 0H20.2C9.1 0 0 9.1 0 20.2v39.5C0 70.9 9.1 80 20.2 80h39.5C70.9 80 80 70.9 80 59.8V20.2C80 9.1 70.9 0 59.8 0z",fill:"#00ddb3"}),(0,l.createElement)("path",{d:"M60.8 17.9c-13.8 0-18.9 9.8-23 17.7l-2.7 5c-4.3 8.4-7.6 13.5-16 13.5-2.2 0-4 1.7-4 3.9s1.7 4 3.9 4h.1c13.8 0 18.9-9.8 23-17.7l2.7-5c4.3-8.4 7.6-13.5 16-13.5 2.2 0 4-1.7 4-3.9s-1.7-4-3.9-4h-.1z",fill:"#fff"}))}function g(){let{gallery:e=!1,onSelect:t=(()=>{}),render:a={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=["application/json","application/zip","text/plain"];return(0,l.createElement)(n.MediaUploadCheck,null,(0,l.createElement)(n.MediaUpload,{gallery:e,onSelect:e=>{let{mime:l,url:n}=e;n&&o.includes(l)&&t(n)},allowedTypes:o,render:a}))}function v(){let{attributes:e={},className:o="",setAttributes:i=(()=>{})}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{align:c,alt:s,autoplay:u,background:d,controls:m,direction:v,height:h,id:_,loop:y,mode:f,objectFit:E,renderer:C,speed:w,src:k,width:A}=e,B=(0,l.useRef)(null),N=(0,l.useRef)(!0),S=(0,l.useCallback)((()=>{B.current.reload(),setTimeout((()=>{var e,t;const l=null==B||null===(e=B.current)||void 0===e||null===(t=e.shadowRoot)||void 0===t?void 0:t.querySelector("canvas");"svg"===C&&l&&l.remove()}),100)}),[C]),P=(0,l.useCallback)((e=>"wide"===c||"full"===c?"100%":e&&"number"==typeof e?`${e}px`:null),[c]);return(0,l.useEffect)((()=>{N.current||S(),N.current=!1}),[E,S,C,w]),(0,l.useEffect)((()=>{B.current&&y&&u&&"playing"!==B.current.currentState&&B.current.play()}),[u,y]),(0,l.createElement)("div",p({className:"w-full"},(0,n.useBlockProps)()),""!==k&&k?(0,l.createElement)("div",{id:`lottie-wrapper-${_}`,className:o,style:{width:P(A),height:h&&"number"==typeof h?`${h}px`:null,backgroundColor:d}},(0,l.createElement)("dotlottie-player",{autoplay:u?"":null,controls:m?"":null,description:s,direction:v,loop:y?"":null,mode:f,preserveAspectRatio:r(E),ref:B,renderer:C,speed:w,src:k})):(0,l.createElement)("div",{className:"components-placeholder"},(0,l.createElement)("div",{className:"components-placeholder__label"},(0,l.createElement)(b,null)," ",(0,t.__)("Lottie Animation")),(0,l.createElement)("div",{className:"components-placeholder__instructions"},(0,t.__)("Upload Lottie animations to WordPress and add them in Gutenberg.")),(0,l.createElement)("div",{className:"components-placeholder__fieldset"},(0,l.createElement)("form",null,(0,l.createElement)(g,{onSelect:e=>i({src:e}),render:e=>{let{open:n}=e;return(0,l.createElement)(a.Button,{variant:"primary",onClick:n},(0,t.__)("Media Library"))}})))))}const h=function(){let{attributes:e={},setAttributes:t=(()=>{})}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{align:r}=e;return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(n.BlockControls,{key:"Lottie Block Controls"},(0,l.createElement)(a.ToolbarGroup,null,(0,l.createElement)(n.BlockAlignmentToolbar,{value:r,onChange:e=>t({align:null!=e?e:r})}))),(0,l.createElement)(n.InspectorControls,null,(0,l.createElement)(d,{attributes:e,setAttributes:t}),(0,l.createElement)(m,{attributes:e,setAttributes:t}),(0,l.createElement)(o,{attributes:e,setAttributes:t})))};var _=JSON.parse('{"u2":"gb/lottieplayer"}');(0,e.registerBlockType)(_.u2,{icon:b,keywords:[(0,t.__)("animation"),(0,t.__)("gif"),(0,t.__)("motion"),(0,t.__)("vector")],attributes:{align:{type:"string",default:"none"},alt:{type:"string",default:(0,t.__)("Lottie animation")},autoplay:{type:"boolean",default:!0},background:{type:"string",default:"transparent"},controls:{type:"boolean",default:!0},direction:{type:"number",default:1},height:{type:"number",default:null},id:{type:"string",default:null},interactivityType:{type:"string",default:"none"},loop:{type:"boolean",default:!1},mode:{type:"string",default:"normal"},objectFit:{type:"string",default:"contain"},renderer:{type:"string",default:"svg"},speed:{type:"number",default:1},src:{type:"string"},width:{type:"number",default:null}},edit:function(){let{attributes:e={},setAttributes:t=(()=>{})}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{align:a}=e;return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(h,{attributes:e,setAttributes:t}),(0,l.createElement)("div",(0,n.useBlockProps)({className:"none"!==a?" align"+a:""}),(0,l.createElement)(v,{attributes:e,setAttributes:t})))},save:function(e){let{attributes:t}=e;const{align:a,alt:o,autoplay:i,background:c,controls:s,direction:u,height:d,id:m,loop:b,mode:g,objectFit:v,src:h,width:_}=t;return(0,l.createElement)("figure",p({id:m},n.useBlockProps.save({className:`align${a}`}),{style:{backgroundColor:c,height:d&&"0"!==d?d:"auto",width:_&&"0"!==_?_:"auto"}}),(0,l.createElement)("dotlottie-player",{autoplay:i,controls:s,description:o,direction:u,loop:b,mode:g,preserveAspectRatio:r(v),src:h}))}})}();