(()=>{"use strict";const e=window.wp.blocks,t=window.wp.i18n,l=window.wp.element,a=window.wp.blockEditor,o=window.wp.components,r=e=>{let{attributes:r,setAttributes:n}=e;const{mode:i="normal",objectFit:c="contain",renderer:s="svg"}=r;return(0,l.createElement)(a.InspectorAdvancedControls,{key:"inspector"},(0,l.createElement)(o.SelectControl,{label:(0,t.__)("Renderer"),value:s,onChange:e=>n({renderer:e}),options:[{value:"svg",label:"SVG"},{value:"canvas",label:"Canvas"}]}),(0,l.createElement)(o.SelectControl,{label:(0,t.__)("Object fit"),value:c,onChange:e=>{n({objectFit:e})},options:[{value:"contain",label:(0,t.__)("Contain","am-lottieplayer")},{value:"cover",label:(0,t.__)("Cover","am-lottieplayer")},{value:"fill",label:(0,t.__)("Fill","am-lottieplayer")},{value:"none",label:(0,t.__)("None","am-lottieplayer")}]}),(0,l.createElement)(o.SelectControl,{label:(0,t.__)("Play mode","am-lottieplayer"),value:i,name:"mode",onChange:e=>n({mode:e}),options:[{value:"normal",label:(0,t.__)("Normal","am-lottieplayer")},{value:"bounce",label:(0,t.__)("Bounce","am-lottieplayer")}]}))},n=e=>{let{id:t="",onChange:a,subTitle:r,title:n,value:i}=e;return(0,l.createElement)(o.BaseControl,{id:t,help:r,className:"lottie-switch-label"},(0,l.createElement)(o.BaseControl.VisualLabel,null,n),(0,l.createElement)(o.FormToggle,{checked:i,onChange:()=>a(!i)}))},i=e=>{let{id:t="",onChange:a,title:r,value:n="",disabled:i,placeholder:c=""}=e;return(0,l.createElement)(o.BaseControl,{id:t,help:r,className:"lottie-number-wrapper"},(0,l.createElement)(o.TextControl,{value:n,onChange:e=>a(+e),onKeyDown:e=>{(e=>{let{ctrlKey:t,key:l,metaKey:a,shiftKey:o}=e;return o||"End"===l||"Home"===l||"Backspace"===l||"Tab"===l||"Enter"===l||"Delete"===l||(t||a)&&("a"===l||"c"===l||"v"===l||"x"===l||"z"===l||"t"===l||"r"===l)})(e)||!(e=>{let{key:t}=e;return t>=0&&t<=9})(e)&&e.preventDefault()},disabled:i,placeholder:c}))},c=e=>{let{attributes:a,setAttributes:r}=e;const{align:c,alt:s,autoplay:u,controls:p,click:d,direction:m,height:y,hover:b,loop:h,mouseout:g,speed:v=1,width:f}=a,_=(0,l.useCallback)((e=>"full"===c||"wide"===c?"100%":e&&"0"!==e?e:void 0),[c]);return(0,l.createElement)(o.Panel,null,(0,l.createElement)(o.PanelBody,{title:(0,t.__)("Animation Settings","am-lottieplayer"),initialOpen:!0},(0,l.createElement)(n,{id:"am-lottieplayer-autoplay-settings",title:(0,t.__)("Autoplay","am-lottieplayer"),value:u,onChange:e=>{r({autoplay:e})}}),(0,l.createElement)(n,{id:"am-lottieplayer-loop-settings",title:(0,t.__)("Loop","am-lottieplayer"),value:h,onChange:e=>{r({loop:e})}}),(0,l.createElement)(o.RangeControl,{label:(0,t.__)("Speed","am-lottieplayer"),min:.5,max:5,step:.5,value:v,onChange:e=>r({speed:e})}),(0,l.createElement)(n,{id:"am-lottieplayer-reverse-settings",title:(0,t.__)("Reverse","am-lottieplayer"),value:-1===m,onChange:e=>r({direction:e?-1:1})}),(0,l.createElement)(n,{id:"am-lottieplayer-controls-settings",title:(0,t.__)("Show controls","am-lottieplayer"),value:p,onChange:e=>r({controls:e})}),(0,l.createElement)(n,{id:"am-lottieplayer-click-settings",title:(0,t.__)("Play on click","am-lottieplayer"),value:d,onChange:e=>r({click:e})}),(0,l.createElement)(n,{id:"am-lottieplayer-hover-settings",title:(0,t.__)("Play on mouseover","am-lottieplayer"),value:b,onChange:e=>r({hover:e})}),(0,l.createElement)(o.SelectControl,{label:(0,t.__)("On mouseout","am-lottieplayer"),value:g,onChange:e=>r({mouseout:e}),options:[{value:"void",label:(0,t.__)("No event","am-lottieplayer")},{value:"stop",label:(0,t.__)("Stop","am-lottieplayer")},{value:"pause",label:(0,t.__)("Pause","am-lottieplayer")},{value:"reverse",label:(0,t.__)("Reverse","am-lottieplayer")}],disabled:!b}),(0,l.createElement)(o.TextareaControl,{label:(0,t.__)("Description","am-lottieplayer"),help:(0,t.__)("Describe the animation. This is helpful for screen readers and search engines.","am-lottieplayer"),value:s,onChange:e=>r({alt:e})}),(0,l.createElement)(o.PanelRow,{className:"lottie-dimensions"},(0,l.createElement)(i,{id:"am-lottieplayer-width-settings",title:(0,t.__)("Width","am-lottieplayer"),value:_(f),onChange:e=>r({width:null!=e?e:null}),disabled:"full"===c||"wide"===c,placeholder:"full"===c||"wide"===c?"100%":"auto"}),(0,l.createElement)(i,{id:"am-lottieplayer-height-settings",title:(0,t.__)("Height","am-lottieplayer"),value:y&&"0"!==y.toString()?y:null,onChange:e=>r({height:null!=e?e:null}),placeholder:"auto"}))))},s=e=>{let{attributes:a,setAttributes:r}=e;const{background:n}=a;return(0,l.createElement)(o.Panel,null,(0,l.createElement)(o.PanelBody,{title:(0,t.__)("Background Color","am-lottieplayer"),initialOpen:!1},(0,l.createElement)(o.ColorPicker,{color:n,onChangeComplete:e=>r({background:e.hex})})))};function u(e){let{attributes:t,setAttributes:o}=e;return(0,l.createElement)(a.InspectorControls,null,(0,l.createElement)(c,{attributes:t,setAttributes:o}),(0,l.createElement)(s,{attributes:t,setAttributes:o}),(0,l.createElement)(r,{attributes:t,setAttributes:o}))}function p(){return(0,l.createElement)(o.SVG,{role:"img",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 80 80"},(0,l.createElement)("style",null,"\n\t\t\t\t.am-lottieplayer-path {\n\t\t\t\t\tfill: url(#a)\n\t\t\t\t}\n\t\t\t\t.block-editor-block-toolbar .am-lottieplayer-path,\n\t\t\t\t.components-panel .am-lottieplayer-path {\n\t\t\t\t\tfill: var(--wp-admin-theme-color-darker-10)\n\t\t\t\t}"),(0,l.createElement)("defs",null,(0,l.createElement)("radialGradient",{id:"a",cx:".2",cy:"1.07",r:"1.2"},(0,l.createElement)("stop",{offset:"10%"},(0,l.createElement)("animate",{attributeName:"stop-color",values:"#24708f;#e18d4c;#1f374c;#85c6e0;#24708f;",dur:"12s",repeatCount:"indefinite"})),(0,l.createElement)("stop",{offset:"90%"},(0,l.createElement)("animate",{attributeName:"stop-color",values:"#85c6e0;#24708f;#e18d4c;#1f374c;#85c6e0;",dur:"24s",repeatCount:"indefinite"})))),(0,l.createElement)(o.Path,{className:"am-lottieplayer-path",d:"M60 0H20C9 0 0 9 0 20v39.5C0 71 9 80 20 80h39.5c11 0 20.5-9 20.5-20V20C80 9 71 0 60 0zm4.9 59.7h-7.4V37.1c0-3.2.3-8.2.3-8.2h-.1s-.9 4.7-1.7 7.5l-6.8 23.3h-4l-11-30.2c-.8-2.2-2-5.8-2-5.8h-.1s-1.1 3.4-1.9 5.8L18.7 59.7H15l15-39.4h4.2l11.4 30c.3-1.4 1.2-6.1 2.4-10.2l5.6-19.8H65v39.4z"}))}function d(e){let{children:o,onSelectMedia:r,onError:n}=e;return(0,l.createElement)(a.MediaPlaceholder,{icon:(0,l.createElement)(a.BlockIcon,{icon:p}),labels:{title:(0,t.__)("AM Lottie Animation","am-lottieplayer"),instructions:(0,t.__)("Upload Lottie animations to WordPress and add them in Gutenberg.","am-lottieplayer")},onSelect:r,accept:".lottie, .json",allowedTypes:["application/json","application/zip"],onError:n},o)}function m(e){let{attributes:t}=e;const{align:a,alt:o,autoplay:r,background:n,controls:i,direction:c,height:s,loop:u,mode:p,objectFit:d,renderer:m,speed:y,src:b,width:h}=t,g=(0,l.useRef)(null),v=(0,l.useRef)(!0),f=(0,l.useCallback)((()=>{g.current&&(g.current.reload(),setTimeout((()=>{const e=g.current?.shadowRoot?.querySelector("canvas");"svg"===m&&e&&e.remove()}),100))}),[m]),_=(0,l.useCallback)((e=>"wide"===a||"full"===a?"100%":e&&"number"==typeof e?`${e}px`:null),[a]);return(0,l.useEffect)((()=>{v.current||f(),v.current=!1}),[d,f,m,y]),(0,l.useEffect)((()=>{g.current&&u&&r&&"playing"!==g.current.currentState&&g.current?.play()}),[r,u]),(0,l.createElement)("dotlottie-player",{class:"lottie-element",autoplay:r?"":null,controls:i?"":null,description:o,direction:c,loop:u?"":null,mode:p,objectfit:d,ref:g,renderer:m,speed:y,src:b,style:{width:"number"==typeof h?_(h):null,height:s&&"number"==typeof s?`${s}px`:null,backgroundColor:n,margin:"0 auto"}})}function y(e){let{attributes:t,setAttributes:a,isPlaceholder:r}=e;return(0,l.createElement)(l.Fragment,null,r?(0,l.createElement)(d,{onSelectMedia:e=>{let{id:t,url:l,alt:o}=e;a(l?{src:l,id:t,alt:o}:{src:void 0,id:null})},onError:e=>{(e=>{(0,l.createElement)(o.Notice,{status:"error"},e)})(e)},children:void 0}):(0,l.createElement)(m,{attributes:t}))}function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},b.apply(this,arguments)}const h=JSON.parse('{"u2":"gb/lottieplayer","TN":"AM LottiePlayer","Y4":{"align":{"type":"string","default":"none"},"alt":{"type":"string","source":"attribute","selector":"dotlottie-player","attribute":"description","default":"","__experimentalRole":"content"},"autoplay":{"type":"boolean","source":"attribute","selector":"dotlottie-player","attribute":"autoplay"},"background":{"type":"string","default":"transparent"},"controls":{"type":"boolean","default":true,"source":"attribute","selector":"dotlottie-player","attribute":"controls"},"clickEvent":{"type":"boolean","default":false},"direction":{"type":"number","default":1},"height":{"type":"number","default":null},"hover":{"type":"boolean","default":false},"id":{"type":"string","default":null},"interactivityType":{"type":"string","default":"none"},"loop":{"type":"boolean","source":"attribute","selector":"dotlottie-player","attribute":"loop"},"mode":{"type":"string","default":"normal"},"mouseout":{"type":"string","default":"stop"},"objectFit":{"type":"string","default":"contain"},"renderer":{"type":"string","default":"svg"},"speed":{"type":"number","default":1},"src":{"type":"string","default":"","source":"attribute","selector":"dotlottie-player","attribute":"src","__experimentalRole":"content"},"width":{"type":"number","default":null}}}');(0,e.registerBlockType)(h.u2,{icon:p,title:h.TN,keywords:[(0,t.__)("animation","am-lottieplayer"),"gif",(0,t.__)("motion","am-lottieplayer"),(0,t.__)("vector","am-lottieplayer"),"SVG","Lottie","dotLottie"],attributes:h.Y4,edit:function(e){let{attributes:t,setAttributes:o}=e;const{src:r}=t,[n,i]=(0,l.useState)(!0);return(0,l.useEffect)((()=>{i(!r||""===r)}),[r]),(0,l.createElement)(l.Fragment,null,(0,l.createElement)(u,{attributes:t,setAttributes:o}),(0,l.createElement)("div",(0,a.useBlockProps)(),(0,l.createElement)(y,{attributes:t,setAttributes:o,isPlaceholder:n})))},save:function(e){let{attributes:t}=e;const{align:o,alt:r,autoplay:n,background:i,controls:c,clickEvent:s,direction:u,height:p,hover:d,id:m,loop:y,mode:h,mouseout:g,objectFit:v,renderer:f,speed:_,src:E,width:C}=t;return(0,l.createElement)("figure",b({id:m},a.useBlockProps.save({className:`align${o}`}),{style:{backgroundColor:i,height:p&&0!==p?p:"auto",width:C&&0!==C?C:"auto",margin:"0 auto"}}),(0,l.createElement)("dotlottie-player",{autoplay:n,controls:c,description:r,direction:u,"data-direction":u,"data-mouseover":d,"data-mouseout":g,"data-click":s,loop:y,mode:h,objectfit:v,renderer:f,src:E,speed:_}))}})})();