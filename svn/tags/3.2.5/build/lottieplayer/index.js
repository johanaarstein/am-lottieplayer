(()=>{var e={500:(e,t)=>{var l;!function(){"use strict";var a={}.hasOwnProperty;function n(){for(var e="",t=0;t<arguments.length;t++){var l=arguments[t];l&&(e=o(e,i(l)))}return e}function i(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return n.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var l in e)a.call(e,l)&&e[l]&&(t=o(t,l));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(n.default=n,e.exports=n):void 0===(l=function(){return n}.apply(t,[]))||(e.exports=l)}()}},t={};function l(a){var n=t[a];if(void 0!==n)return n.exports;var i=t[a]={exports:{}};return e[a](i,i.exports,l),i.exports}l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var a in t)l.o(t,a)&&!l.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.components,t=window.ReactJSXRuntime;function a(){return(0,t.jsxs)(e.SVG,{role:"img",viewBox:"0 0 80 80",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",children:[(0,t.jsx)("style",{children:"\n\t\t\t\t.am-lottieplayer-path {\n\t\t\t\t\tfill: url(#a)\n\t\t\t\t}\n\t\t\t\t.block-editor-block-toolbar .am-lottieplayer-path,\n\t\t\t\t.components-panel .am-lottieplayer-path {\n\t\t\t\t\tfill: var(--wp-admin-theme-color-darker-10)\n\t\t\t\t}"}),(0,t.jsx)("defs",{children:(0,t.jsxs)("radialGradient",{cx:".2",cy:"1.07",id:"a",r:"1.2",children:[(0,t.jsx)("stop",{offset:"10%",children:(0,t.jsx)("animate",{attributeName:"stop-color",dur:"12s",repeatCount:"indefinite",values:"#24708f;#e18d4c;#1f374c;#85c6e0;#24708f;"})}),(0,t.jsx)("stop",{offset:"90%",children:(0,t.jsx)("animate",{attributeName:"stop-color",dur:"24s",repeatCount:"indefinite",values:"#85c6e0;#24708f;#e18d4c;#1f374c;#85c6e0;"})})]})}),(0,t.jsx)(e.Path,{className:"am-lottieplayer-path",d:"M60 0H20C9 0 0 9 0 20v39.5C0 71 9 80 20 80h39.5c11 0 20.5-9 20.5-20V20C80 9 71 0 60 0zm4.9 59.7h-7.4V37.1c0-3.2.3-8.2.3-8.2h-.1s-.9 4.7-1.7 7.5l-6.8 23.3h-4l-11-30.2c-.8-2.2-2-5.8-2-5.8h-.1s-1.1 3.4-1.9 5.8L18.7 59.7H15l15-39.4h4.2l11.4 30c.3-1.4 1.2-6.1 2.4-10.2l5.6-19.8H65v39.4z"})]})}const n=window.wp.blocks,i=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"gb/lottieplayer","title":"AM LottiePlayer","description":"Play Lottie animations on your WordPress website.","keywords":["animation","gif","motion","vector","SVG","Lottie","dotLottie"],"category":"media","supports":{"align":true,"anchor":true,"html":false},"textdomain":"am-lottieplayer","attributes":{"align":{"enum":["center","full","none","left","right","wide"],"default":"none"},"alt":{"type":"string","default":""},"autoplay":{"type":"boolean"},"background":{"type":"string","default":"transparent"},"controls":{"type":"boolean","default":true},"clickEvent":{"type":"boolean","default":false},"direction":{"type":"number","default":1},"height":{"type":"number","default":null},"hover":{"type":"boolean","default":false},"id":{"type":"string"},"intermission":{"type":"number"},"loop":{"type":"boolean"},"mode":{"enum":["bounce","normal"],"default":"normal"},"mouseout":{"type":"string","default":"stop"},"multiAnimationInteractions":{"type":"array"},"multiAnimationSettings":{"type":"array"},"objectFit":{"type":"string","default":"contain"},"once":{"type":"boolean","default":false},"renderer":{"enum":["svg"],"default":"svg"},"scrollEvent":{"type":"boolean","default":false},"scrollDelay":{"type":"number","default":null},"segment":{"type":"array","default":null},"selector":{"type":"object","default":{"id":null,"exclude":false}},"speed":{"type":"number","default":1},"src":{"type":"string","source":"attribute","selector":"dotlottie-player","attribute":"src","default":"","__experimentalRole":"content"},"subframe":{"type":"boolean","default":true},"width":{"type":"number","default":null}},"editorScript":"file:./index.js","editorStyle":"file:./index.css"}'),o=window.wp.blockEditor,r=window.wp.blob;let s=function(e){return e.Center="center",e.Full="full",e.Left="left",e.None="none",e.Right="right",e.Wide="wide",e}({}),c=function(e){return e.Void="void",e.Stop="stop",e.Pause="pause",e.Reverse="reverse",e}({});const d=e=>!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e),u=window.wp.a11y,p=window.wp.data,m=window.wp.element,h=window.wp.dom,y=window.wp.i18n,g=window.wp.primitives,x=(0,t.jsx)(g.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,t.jsx)(g.Path,{d:"M18.5 15v3.5H13V6.7l4.5 4.1 1-1.1-6.2-5.8-5.8 5.8 1 1.1 4-4v11.7h-6V15H4v5h16v-5z"})});var b=l(500),f=l.n(b);function v({attributes:l,setAttributes:n}){const[i,r]=(0,m.useState)({externalURL:l.src||"",mediaId:Number(l.id)}),s=(0,m.useRef)(null),c=(0,p.useSelect)((e=>{try{const{getSettings:t}=e("core/block-editor");return t().mediaUpload}catch(e){console.error(e)}}),[]),g=["application/json","application/zip"],b=t=>{(0,h.__unstableStripHTML)(t);setTimeout((()=>{e.Notice}),1e3)},v=(e,t)=>{t(),(({alt:e,id:t,url:l})=>{l?(r((e=>({...e,mediaId:t}))),n({alt:e,id:t?.toString(),src:l})):n({id:void 0,src:void 0})})(e),(0,u.speak)((0,y.__)("The media file has been replaced"))},j=e=>{"ArrowDown"===e.key&&(e.preventDefault(),(e.target instanceof HTMLAnchorElement||e.target instanceof HTMLButtonElement)&&e.target.click())};return(0,m.useEffect)((()=>{d(i.externalURL)&&(i.externalURL.endsWith(".lottie")||i.externalURL.endsWith(".json"))&&n({src:i.externalURL})}),[i.externalURL,n]),(0,t.jsx)(e.Dropdown,{contentClassName:"block-editor-media-replace-flow__options",renderContent:({onClose:n})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.NavigableMenu,{className:"block-editor-media-replace-flow__media-upload-menu",children:(0,t.jsxs)(o.MediaUploadCheck,{children:[(0,t.jsx)(o.MediaUpload,{allowedTypes:g,multiple:!1,onSelect:e=>v(e,n),render:({open:l})=>(0,t.jsx)(e.MenuItem,{icon:(0,t.jsx)(o.BlockIcon,{icon:a}),onClick:l,children:(0,y.__)("Open Media Library")}),value:i.mediaId}),(0,t.jsx)(e.FormFileUpload,{accept:".lottie,.json",onChange:e=>{(({target:e},t)=>{try{if(!c)throw new Error("Media Upload function is not set");const l=e.files;c({allowedTypes:g,filesList:l,onError:b,onFileChange:([e])=>{v(e,t)}})}catch(e){console.error(e)}})(e,n)},render:({openFileDialog:l})=>(0,t.jsx)(e.MenuItem,{icon:x,onClick:()=>{l()},children:(0,y.__)("Upload")})})]})}),(0,t.jsxs)("form",{className:f()("block-editor-media-flow__url-input",{"has-siblings":!!c}),children:[(0,t.jsx)("span",{className:"block-editor-media-replace-flow__image-url-label",children:(0,y.__)("Current media URL:")}),(0,t.jsx)(o.__experimentalLinkControl,{onChange:e=>{r((t=>({...t,externalURL:e}))),s.current?.focus()},settings:[],showSuggestions:!1,value:{url:l.src}})]})]}),renderToggle:({isOpen:l,onToggle:a})=>(0,t.jsx)(e.ToolbarButton,{"aria-expanded":l,"aria-haspopup":"true",onClick:a,onKeyDown:j,ref:s,children:(0,y.__)("Replace")})})}function j({attributes:e,setAttributes:l}){return(0,t.jsx)(o.BlockControls,{children:(0,t.jsx)(v,{attributes:e,setAttributes:l})})}const _=(0,m.createContext)({animationContext:{animations:[],player:null},setAnimationContext:e=>e}),w=()=>(0,m.useContext)(_);function C({children:e}){const[l,a]=(0,m.useState)({animations:[],player:null});return(0,t.jsx)(_.Provider,{value:{animationContext:l,setAnimationContext:a},children:e})}function k(){return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("a",{href:(0,y.__)("https://www.aarstein.media/en/am-lottieplayer/pro","am-lottieplayer"),rel:"noreferrer",style:{backgroundColor:"var(--wp-admin-theme-color)",borderRadius:"1.5em",color:"white",display:"inline-block",fontSize:".75rem",padding:".5em 1em",textDecoration:"none",textTransform:"none"},target:"_blank",children:[(0,t.jsx)("strong",{children:"PRO"})," ",(0,y.__)("feature","am-lottieplayer")]})})}function S(){return(0,t.jsxs)("a",{href:(0,y.__)("https://www.aarstein.media/en/am-lottieplayer/pro","am-lottieplayer"),rel:"noreferrer",target:"_blank",children:[(0,y.__)("Read about additional features in AM LottiePlayer PRO","am-lottieplayer"),(0,t.jsx)("sup",{style:{verticalAlign:"super"},children:(0,t.jsx)("span",{className:"dashicons dashicons-external",style:{fontSize:"1em"}})})]})}const N=({attributes:l,setAttributes:a})=>{const{alt:n}=l;return(0,t.jsxs)(o.InspectorAdvancedControls,{children:[(0,t.jsx)(e.SelectControl,{disabled:!0,help:(0,t.jsx)(S,{}),label:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"pro-feature",style:{marginRight:"1em"},children:(0,y.__)("Renderer")}),(0,t.jsx)(k,{})]}),onChange:()=>console.warn("This feature is only available in the premium version"),options:[{label:"SVG",value:"svg"},{label:"Canvas",value:"canvas"}],value:"svg"}),(0,t.jsx)(e.TextareaControl,{help:(0,y.__)("Describe the animation. This is helpful for screen readers and search engines.","am-lottieplayer"),label:(0,y.__)("Description","am-lottieplayer"),onChange:e=>a({alt:e}),value:n})]})},A=({className:l="",disabled:a,id:n="",onChange:i,subTitle:o,title:r,value:s})=>(0,t.jsxs)(e.BaseControl,{className:`lottie-switch-label ${l}`,help:o,id:n,children:[(0,t.jsx)(e.BaseControl.VisualLabel,{children:r}),(0,t.jsx)(e.FormToggle,{checked:s,disabled:a,onChange:()=>i(!s)})]}),R=({disabled:l,id:a="",onChange:n,placeholder:i="",title:o,value:r=""})=>(0,t.jsx)(e.BaseControl,{className:"lottie-number-wrapper",help:o,id:a,children:(0,t.jsx)(e.TextControl,{disabled:l,onChange:e=>{n(void 0===e||""===e?void 0:Number(e))},onKeyDown:e=>{(({ctrlKey:e,key:t,metaKey:l,shiftKey:a})=>!(!a&&"End"!==t&&"Home"!==t&&"Backspace"!==t&&"Tab"!==t&&"Enter"!==t&&"Delete"!==t&&(!e&&!l||"a"!==t&&"c"!==t&&"v"!==t&&"x"!==t&&"z"!==t&&"t"!==t&&"r"!==t)))(e)||(({key:e})=>Number(e)>=0&&Number(e)<=9)(e)||e.preventDefault()},placeholder:i,value:r})}),L=({disabled:l,help:a,id:n="",onChange:i,placeholder:o="",title:r,value:s=""})=>(0,t.jsxs)(e.BaseControl,{className:"lottie-number-wrapper",help:a,id:n,children:[(0,t.jsx)(e.BaseControl.VisualLabel,{children:r}),(0,t.jsx)(e.TextControl,{disabled:l,onChange:e=>i(e),placeholder:o,value:s})]}),P=({attributes:l,setAttributes:a})=>{const{segment:n}=l,{animationContext:{animations:i,player:o}}=w(),[r,s]=(0,m.useState)({hasMultipleAnimations:!1,totalFrames:0});return(0,m.useEffect)((()=>{var e;o&&s({hasMultipleAnimations:i?.length>1,totalFrames:Number(null!==(e=o.getLottie()?.totalFrames)&&void 0!==e?e:0)})}),[i?.length,o]),(0,t.jsx)(e.Panel,{children:(0,t.jsxs)(e.PanelBody,{className:"am-lottieplayer-settings",initialOpen:!0,title:(0,y.__)("Animation Settings","am-lottieplayer"),children:[r.hasMultipleAnimations&&(0,t.jsxs)("div",{style:{marginBottom:"1em"},children:[(0,t.jsx)("p",{children:(0,t.jsx)(k,{})}),(0,t.jsx)("p",{children:(0,y.__)("This file contains multiple animations. To control each of them individually you need to upgrade to AM LottiePlayer PRO.","am-lottieplayer")})]}),(0,t.jsx)(A,{id:"am-lottieplayer-controls-settings",onChange:e=>a({controls:e}),title:(0,y.__)("Show controls","am-lottieplayer"),value:!!l.controls}),(0,t.jsx)(A,{id:"am-lottieplayer-autoplay-settings",onChange:e=>{a({autoplay:e})},title:(0,y.__)("Autoplay","am-lottieplayer"),value:!!l.autoplay}),(0,t.jsx)(A,{id:"am-lottieplayer-loop-settings",onChange:e=>{a({loop:e})},title:(0,y.__)("Loop","am-lottieplayer"),value:!!l.loop}),(0,t.jsx)(A,{disabled:!0,id:"am-lottieplayer-playmode-settings",onChange:()=>console.warn("This feature is only available in the premium version"),title:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"pro-feature",style:{marginRight:"1em"},children:(0,y.__)("Boomerang","am-lottieplayer")}),(0,t.jsx)(k,{})]}),value:!1}),(0,t.jsx)(A,{id:"am-lottieplayer-reverse-settings",onChange:e=>a({direction:e?-1:1}),title:(0,y.__)("Reverse","am-lottieplayer"),value:-1===l.direction}),(0,t.jsx)(A,{id:"am-lottieplayer-subframe-settings",onChange:e=>a({subframe:e}),subTitle:(0,y.__)("Makes the animation smoother, at the cost of RAM usage","am-lottieplayer"),title:(0,y.__)("Subframe","am-lottieplayer"),value:!!l.subframe}),(0,t.jsx)(e.RangeControl,{label:(0,y.__)("Speed","am-lottieplayer"),max:5,min:.5,onChange:e=>a({speed:e}),step:.5,value:l.speed}),(0,t.jsxs)(e.BaseControl.VisualLabel,{children:[(0,t.jsx)("p",{children:(0,t.jsx)(k,{})}),(0,t.jsx)("span",{className:"pro-feature",children:(0,y.__)("Play only part of the animation","am-lottieplayer")})]}),(0,t.jsxs)(e.PanelRow,{className:"lottie-segment",children:[(0,t.jsx)(R,{disabled:!0,id:"am-lottieplayer-segment-in",onChange:()=>console.warn("This feature is only available in the premium version"),placeholder:"1",title:(0,y.__)("First frame","am-lottieplayer"),value:n?.[0]}),(0,t.jsx)(R,{disabled:!0,id:"am-lottieplayer-segment-out",onChange:()=>console.warn("This feature is only available in the premium version"),placeholder:(r.totalFrames+1).toString(),title:(0,y.__)("Last frame","am-lottieplayer"),value:n?.[1]})]}),l.loop&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.BaseControl.VisualLabel,{children:(0,y.__)("Intermission","am-lottieplayer")}),(0,t.jsx)(e.PanelRow,{className:"lottie-intermission",children:(0,t.jsx)(R,{id:"am-lottieplayer-intermission",onChange:e=>a({intermission:e}),placeholder:"0",title:(0,y.__)("Pause between loops, in miliseconds. 1s = 1000","am-lottieplayer"),value:l.intermission})})]}),(0,t.jsx)(S,{})]})})},F=({attributes:l,setAttributes:a})=>{const{background:n}=l;return(0,t.jsx)(e.Panel,{children:(0,t.jsx)(e.PanelBody,{className:"am-lottieplayer-settings",initialOpen:!0,title:(0,y.__)("Background Color","am-lottieplayer"),children:(0,t.jsx)(e.ColorPicker,{color:n,onChange:e=>a({background:e})})})})},T=({attributes:l,setAttributes:a})=>{const{align:n,fullscreen:i,height:o,objectFit:r="contain",width:c}=l,d=(0,m.useCallback)((e=>n===s.Full||n===s.Wide?"100%":e&&"0"!==e?e:void 0),[n]);return(0,t.jsx)(e.Panel,{children:(0,t.jsxs)(e.PanelBody,{className:"am-lottieplayer-settings",initialOpen:!0,title:(0,y.__)("Dimensions","am-lottieplayer"),children:[(!i||n!==s.Full)&&(0,t.jsxs)(e.PanelRow,{className:"lottie-dimensions",children:[(0,t.jsx)(R,{disabled:n===s.Full||n===s.Wide,id:"am-lottieplayer-width-settings",onChange:e=>a({width:null!=e?e:null}),placeholder:n===s.Full||n===s.Wide?"100%":"auto",title:(0,y.__)("Width","am-lottieplayer"),value:d(c)}),(0,t.jsx)(R,{disabled:i,id:"am-lottieplayer-height-settings",onChange:e=>a({height:e}),placeholder:"auto",title:(0,y.__)("Height","am-lottieplayer"),value:o&&"0"!==o.toString()?o:void 0})]}),(n===s.Full||n===s.Wide)&&(0,t.jsx)(A,{id:"am-lottieplayer-fullscreen-settings",onChange:e=>a({fullscreen:e}),title:(0,y.__)("Fill screen","am-lottieplayer"),value:i}),(0,t.jsx)(e.SelectControl,{label:(0,y.__)("Object fit"),onChange:e=>{a({objectFit:e})},options:[{label:(0,y.__)("Contain","am-lottieplayer"),value:"contain"},{label:(0,y.__)("Cover","am-lottieplayer"),value:"cover"},{label:(0,y.__)("Fill","am-lottieplayer"),value:"fill"},{label:(0,y.__)("None","am-lottieplayer"),value:"none"}],value:r})]})})},B=({attributes:l,setAttributes:a})=>{const{clickEvent:n,hover:i,mouseout:o,once:r,scrollDelay:s,scrollEvent:d,selector:u}=l;return(0,t.jsx)(e.Panel,{children:(0,t.jsxs)(e.PanelBody,{className:"am-lottieplayer-settings",initialOpen:!0,title:(0,y.__)("Interactions","am-lottieplayer"),children:[(0,t.jsx)(A,{disabled:!0,id:"am-lottieplayer-animateOnScroll-settings",onChange:()=>console.warn("This feature is only available in the premium version"),title:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"pro-feature",style:{marginRight:"1em"},children:(0,y.__)("Animate on scroll","am-lottieplayer")}),(0,t.jsx)(k,{})]}),value:!1}),(0,t.jsx)(A,{id:"am-lottieplayer-click-settings",onChange:e=>a({clickEvent:e}),title:(0,y.__)("Play on click","am-lottieplayer"),value:n}),(0,t.jsx)(A,{id:"am-lottieplayer-hover-settings",onChange:e=>a({hover:e}),title:(0,y.__)("Play on mouseover","am-lottieplayer"),value:i}),i&&(0,t.jsx)(e.SelectControl,{label:(0,y.__)("On mouseout","am-lottieplayer"),onChange:e=>a({mouseout:e}),options:[{label:(0,y.__)("No event","am-lottieplayer"),value:c.Void},{label:(0,y.__)("Stop","am-lottieplayer"),value:c.Stop},{label:(0,y.__)("Pause","am-lottieplayer"),value:c.Pause},{label:(0,y.__)("Reverse","am-lottieplayer"),value:c.Reverse}],value:o}),(i||n)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(L,{disabled:!0,help:(0,y.__)("Anchor tag (id) for an element you want to trigger the animation, either by hover or click.","am-lottieplayer"),id:"am-lottieplayer-settings",onChange:e=>a({selector:{...u,id:e}}),placeholder:"#",title:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"pro-feature",style:{marginRight:"1em"},children:(0,y.__)("Trigger element","am-lottieplayer")}),(0,t.jsx)(k,{})]}),value:u?.id}),(0,t.jsx)(A,{disabled:!0,id:"am-lottieplayer-selector-settings",onChange:e=>a({selector:{...u,exclude:e}}),title:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"pro-feature",style:{display:"block",marginBottom:"1em"},children:(0,y.__)("Apply interaction only to trigger element","am-lottieplayer")}),(0,t.jsx)(k,{})]}),value:u?.exclude})]}),(0,t.jsx)(A,{id:"am-lottieplayer-scroll-settings",onChange:e=>a({scrollEvent:e}),title:(0,y.__)("Play on scroll, when visible in viewport","am-lottieplayer"),value:d}),d&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(A,{id:"am-lottieplayer-once-settings",onChange:e=>a({once:e}),title:(0,y.__)("Play only once","am-lottieplayer"),value:r}),(0,t.jsx)(e.RangeControl,{label:(0,y.__)("Delay, in 10th of a second","am-lottieplayer"),max:50,min:0,onChange:e=>a({scrollDelay:e}),step:1,value:null!=s?s:1})]}),(0,t.jsx)(S,{})]})})};function I({attributes:e,className:l,clientId:a,context:n,isSelected:i,setAttributes:r}){const s=(0,m.useId)(),{animationContext:{animations:c},setAnimationContext:d}=w();return c.length||d((t=>{var l;return{...t,animations:[{autoplay:e.autoplay,direction:e.direction,id:null!==(l=e.id)&&void 0!==l?l:s,loop:e.loop,mode:e.mode,speed:e.speed}]}})),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(o.InspectorControls,{children:[(0,t.jsx)(P,{attributes:e,className:l,clientId:a,context:n,isSelected:i,setAttributes:r}),(0,t.jsx)(B,{attributes:e,className:l,clientId:a,context:n,isSelected:i,setAttributes:r}),(0,t.jsx)(N,{attributes:e,className:l,clientId:a,context:n,isSelected:i,setAttributes:r})]}),(0,t.jsxs)(o.InspectorControls,{group:"styles",children:[(0,t.jsx)(T,{attributes:e,className:l,clientId:a,context:n,isSelected:i,setAttributes:r}),(0,t.jsx)(F,{attributes:e,className:l,clientId:a,context:n,isSelected:i,setAttributes:r})]})]})}function E({attributes:e,clientId:l}){var a;const{animationContext:{player:n},setAnimationContext:i}=w(),{segment:o}=e,{getBlockIndex:r}=(0,p.useSelect)((e=>e("core/block-editor")),[]),c=r(l),d=(0,m.useRef)(!0),u=(0,m.useRef)(null),h=o&&o?.[1]?JSON.stringify([o[0],o[1]]):void 0,y=(0,m.useCallback)((()=>{n&&n.reload()}),[n]),g=e=>{if(e&&"number"==typeof e)return`${e}px`};return(0,m.useEffect)((()=>{u.current&&i((e=>({...e,player:u.current})))}),[i]),(0,m.useEffect)((()=>{n&&n.addEventListener("ready",(()=>{i((e=>{var t;return{...e,animations:null!==(t=n.getManifest()?.animations)&&void 0!==t?t:[]}}))}))}),[n,i]),(0,m.useEffect)((()=>{d.current,d.current=!1}),[c,e.intermission,e.src,e.objectFit,y,o]),(0,t.jsx)("dotlottie-player",{autoplay:e.autoplay?"":null,class:"lottie-element",controls:e.controls?"":null,description:e.alt,direction:e.direction,id:e.id,intermission:e.intermission,loop:e.loop?"":null,mode:e.mode,objectfit:e.objectFit,ref:u,segment:h,speed:e.speed,src:null!==(a=e.src)&&void 0!==a?a:"",style:{backgroundColor:e.background,height:g(e.height),margin:"0 auto",width:(x=e.width,e.align===s.Wide||e.align===s.Full?"100%":g(x))},subframe:e.subframe?"":null});var x}function M({attributes:l,setAttributes:n}){const[i,r]=(0,m.useState)({externalURL:l.src||"",hasDropped:!1});return(0,m.useEffect)((()=>{d(i.externalURL)&&(i.externalURL.endsWith(".lottie")||i.externalURL.endsWith(".json"))&&n({src:i.externalURL})}),[i.externalURL,n]),(0,t.jsx)(o.MediaUploadCheck,{children:(0,t.jsx)(o.MediaPlaceholder,{accept:".lottie, .json",allowedTypes:["application/json","application/zip"],icon:(0,t.jsx)(o.BlockIcon,{icon:a}),labels:{instructions:i.hasDropped?(0,y.__)("Dropped!","am-lottieplayer"):(0,y.__)("Upload Lottie animations to WordPress and add them in Gutenberg.","am-lottieplayer"),title:(0,y.__)("AM Lottie Animation","am-lottieplayer")},onError:t=>{e.Notice},onHTMLDrop:()=>r((e=>({...e,hasDropped:!0}))),onSelect:({alt:e,id:t,url:l})=>{if(!l)return n({id:void 0,src:void 0});n({alt:e,id:t?.toString(),src:l})},children:(0,t.jsx)(o.URLInput,{onChange:e=>r((t=>({...t,externalURL:e}))),value:i.externalURL})})})}function U({attributes:e,clientId:l,setAttributes:a}){const[n,i]=(0,m.useState)({isPlaceholder:!0});return(0,m.useEffect)((()=>{i((t=>({...t,isPlaceholder:!e.src||""===e.src})))}),[e.src]),(0,t.jsx)(t.Fragment,{children:n.isPlaceholder?(0,t.jsx)(M,{attributes:e,setAttributes:a}):(0,t.jsx)(E,{attributes:e,clientId:l})})}(0,n.registerBlockType)(i,{edit:function({attributes:l,className:a,clientId:n,context:i,isSelected:s,setAttributes:c}){const d=(u=l.id,p=l.src||void 0,!u&&(0,r.isBlobURL)(p));var u,p;return(0,t.jsxs)(C,{children:[(0,t.jsx)(I,{attributes:l,className:a,clientId:n,context:i,isSelected:s,setAttributes:c}),d&&(0,t.jsx)(e.Spinner,{}),(0,t.jsxs)("div",{...(0,o.useBlockProps)(),children:[(0,t.jsx)(U,{attributes:l,className:a,clientId:n,context:i,isSelected:s,setAttributes:c}),(0,t.jsx)(j,{attributes:l,setAttributes:c})]})]})},icon:a,save:function({attributes:e}){var l;const a=JSON.stringify(e.selector),n=e.segment&&e.segment?.[1]?JSON.stringify([e.segment[0],e.segment[1]]):void 0;return(0,t.jsx)("figure",{id:e.id,...o.useBlockProps.save({className:`align${null!==(l=e.align)&&void 0!==l?l:"none"}`}),style:{backgroundColor:e.background,height:e.height&&0!==e.height?e.height:"auto",margin:"0 auto",width:e.width&&0!==e.width?e.width:"auto"},children:(0,t.jsx)("dotlottie-player",{autoplay:e.autoplay&&!e.scrollEvent?"":null,class:"lottie-element"+(e.selector?.id?" has-selector":""),controls:e.controls?"":null,"data-click":e.clickEvent,"data-delay":e.scrollDelay,"data-direction":e.direction,"data-mouseout":e.mouseout,"data-mouseover":e.hover,"data-once":e.once,"data-scroll":e.scrollEvent,"data-selector":a,description:e.alt,direction:e.direction,intermission:e.intermission,loop:e.loop?"":null,mode:e.mode,multiAnimationSettings:[],objectfit:e.objectFit,segment:n,speed:e.speed,src:e.src||"",subframe:e.subframe?"":null})})}})})()})();