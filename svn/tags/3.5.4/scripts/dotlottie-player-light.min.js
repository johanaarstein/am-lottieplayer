!function(t){"use strict";let e,s,i;var r,a,n,h,o,l,m,p,d,c,u,f=((r={}).Contain="contain",r.Cover="cover",r.Fill="fill",r.ScaleDown="scale-down",r.None="none",r),g=((a={}).Completed="completed",a.Destroyed="destroyed",a.Error="error",a.Frozen="frozen",a.Loading="loading",a.Paused="paused",a.Playing="playing",a.Stopped="stopped",a),y=((n={}).Bounce="bounce",n.Normal="normal",n),b=((h={}).Complete="complete",h.Destroyed="destroyed",h.Error="error",h.Frame="frame",h.Freeze="freeze",h.Load="load",h.Loop="loop",h.Next="next",h.Pause="pause",h.Play="play",h.Previous="previous",h.Ready="ready",h.Rendered="rendered",h.Stop="stop",h),v=((o={}).Contain="xMidYMid meet",o.Cover="xMidYMid slice",o.None="xMinYMin slice",o.Initial="none",o),_=((l={}).SVG="svg",l.HTML="html",l.Canvas="canvas",l);let w=(s=0,()=>(s+=1,`__lottie_element_${s}`));var S={},k=function(t,e,s,i,r){var a=new Worker(S[e]||(S[e]=URL.createObjectURL(new Blob([t+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return a.onmessage=function(t){var e=t.data,s=e.$e$;if(s){var i=Error(s[0]);i.code=s[1],i.stack=s[2],r(i,null)}else r(null,e)},a.postMessage(s,i),a},E=Uint8Array,A=Uint16Array,M=Int32Array,x=new E([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),C=new E([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),P=new E([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),D=function(t,e){for(var s=new A(31),i=0;i<31;++i)s[i]=e+=1<<t[i-1];for(var r=new M(s[30]),i=1;i<30;++i)for(var a=s[i];a<s[i+1];++a)r[a]=a-s[i]<<5|i;return{b:s,r:r}},T=D(x,2),N=T.b,I=T.r;N[28]=258,I[258]=28;for(var F=D(C,0).b,L=new A(32768),$=0;$<32768;++$){var V=(43690&$)>>1|(21845&$)<<1;V=(61680&(V=(52428&V)>>2|(13107&V)<<2))>>4|(3855&V)<<4,L[$]=((65280&V)>>8|(255&V)<<8)>>1}for(var z=function(t,e,s){for(var i,r=t.length,a=0,n=new A(e);a<r;++a)t[a]&&++n[t[a]-1];var h=new A(e);for(a=1;a<e;++a)h[a]=h[a-1]+n[a-1]<<1;if(s){i=new A(1<<e);var o=15-e;for(a=0;a<r;++a)if(t[a])for(var l=a<<4|t[a],m=e-t[a],p=h[t[a]-1]++<<m,d=p|(1<<m)-1;p<=d;++p)i[L[p]>>o]=l}else for(a=0,i=new A(r);a<r;++a)t[a]&&(i[a]=L[h[t[a]-1]++]>>15-t[a]);return i},O=new E(288),$=0;$<144;++$)O[$]=8;for(var $=144;$<256;++$)O[$]=9;for(var $=256;$<280;++$)O[$]=7;for(var $=280;$<288;++$)O[$]=8;for(var R=new E(32),$=0;$<32;++$)R[$]=5;var B=z(O,9,1),q=z(R,5,1),j=function(t){for(var e=t[0],s=1;s<t.length;++s)t[s]>e&&(e=t[s]);return e},H=function(t,e,s){var i=e/8|0;return(t[i]|t[i+1]<<8)>>(7&e)&s},G=function(t,e){var s=e/8|0;return(t[s]|t[s+1]<<8|t[s+2]<<16)>>(7&e)},W=function(t){return(t+7)/8|0},Y=function(t,e,s){return(null==e||e<0)&&(e=0),(null==s||s>t.length)&&(s=t.length),new E(t.subarray(e,s))},U=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],X=function(t,e,s){var i=Error(e||U[t]);if(i.code=t,Error.captureStackTrace&&Error.captureStackTrace(i,X),!s)throw i;return i},J=function(t,e,s,i){var r=t.length,a=i?i.length:0;if(!r||e.f&&!e.l)return s||new E(0);var n=!s,h=n||2!=e.i,o=e.i;n&&(s=new E(3*r));var l=function(t){var e=s.length;if(t>e){var i=new E(Math.max(2*e,t));i.set(s),s=i}},m=e.f||0,p=e.p||0,d=e.b||0,c=e.l,u=e.d,f=e.m,g=e.n,y=8*r;do{if(!c){m=H(t,p,1);var b=H(t,p+1,3);if(p+=3,b)if(1==b)c=B,u=q,f=9,g=5;else if(2==b){var v=H(t,p,31)+257,_=H(t,p+10,15)+4,w=v+H(t,p+5,31)+1;p+=14;for(var S=new E(w),k=new E(19),A=0;A<_;++A)k[P[A]]=H(t,p+3*A,7);p+=3*_;for(var M=j(k),D=(1<<M)-1,T=z(k,M,1),A=0;A<w;){var I=T[H(t,p,D)];p+=15&I;var L=I>>4;if(L<16)S[A++]=L;else{var $=0,V=0;for(16==L?(V=3+H(t,p,3),p+=2,$=S[A-1]):17==L?(V=3+H(t,p,7),p+=3):18==L&&(V=11+H(t,p,127),p+=7);V--;)S[A++]=$}}var O=S.subarray(0,v),R=S.subarray(v);f=j(O),g=j(R),c=z(O,f,1),u=z(R,g,1)}else X(1);else{var L=W(p)+4,U=t[L-4]|t[L-3]<<8,J=L+U;if(J>r){o&&X(0);break}h&&l(d+U),s.set(t.subarray(L,J),d),e.b=d+=U,e.p=p=8*J,e.f=m;continue}if(p>y){o&&X(0);break}}h&&l(d+131072);for(var K=(1<<f)-1,Z=(1<<g)-1,Q=p;;Q=p){var $=c[G(t,p)&K],tt=$>>4;if((p+=15&$)>y){o&&X(0);break}if($||X(2),tt<256)s[d++]=tt;else if(256==tt){Q=p,c=null;break}else{var te=tt-254;if(tt>264){var A=tt-257,ts=x[A];te=H(t,p,(1<<ts)-1)+N[A],p+=ts}var ti=u[G(t,p)&Z],tr=ti>>4;ti||X(3),p+=15&ti;var R=F[tr];if(tr>3){var ts=C[tr];R+=G(t,p)&(1<<ts)-1,p+=ts}if(p>y){o&&X(0);break}h&&l(d+131072);var ta=d+te;if(d<R){var tn=a-R,th=Math.min(R,ta);for(tn+d<0&&X(3);d<th;++d)s[d]=i[tn+d]}for(;d<ta;++d)s[d]=s[d-R]}}e.l=c,e.p=Q,e.b=d,e.f=m,c&&(m=1,e.m=f,e.d=u,e.n=g)}while(!m);return d!=s.length&&n?Y(s,0,d):s.subarray(0,d)},K=new E(0),Z=function(t,e){var s={};for(var i in t)s[i]=t[i];for(var i in e)s[i]=e[i];return s},Q=function(t,e,s){for(var i=t(),r=t.toString(),a=r.slice(r.indexOf("[")+1,r.lastIndexOf("]")).replace(/\s+/g,"").split(","),n=0;n<i.length;++n){var h=i[n],o=a[n];if("function"==typeof h){e+=";"+o+"=";var l=h.toString();if(h.prototype)if(-1!=l.indexOf("[native code]")){var m=l.indexOf(" ",8)+1;e+=l.slice(m,l.indexOf("(",m))}else for(var p in e+=l,h.prototype)e+=";"+o+".prototype."+p+"="+h.prototype[p].toString();else e+=l}else s[o]=h}return e},tt=[],te=function(t){var e=[];for(var s in t)t[s].buffer&&e.push((t[s]=new t[s].constructor(t[s])).buffer);return e},ts=function(t,e,s,i){if(!tt[s]){for(var r="",a={},n=t.length-1,h=0;h<n;++h)r=Q(t[h],r,a);tt[s]={c:Q(t[n],r,a),e:a}}var o=Z({},tt[s].e);return k(tt[s].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+e.toString()+"}",s,o,te(o),i)},ti=function(){return[E,A,M,x,C,P,N,F,B,q,L,U,z,j,H,G,W,Y,X,J,tm,tr,ta]},tr=function(t){return postMessage(t,[t.buffer])},ta=function(t){return t&&{out:t.size&&new E(t.size),dictionary:t.dictionary}},tn=function(t,e,s,i,r,a){var n=ts(s,i,r,function(t,e){n.terminate(),a(t,e)});return n.postMessage([t,e],e.consume?[t.buffer]:[]),function(){n.terminate()}},th=function(t,e){return t[e]|t[e+1]<<8},to=function(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0},tl=function(t,e){return to(t,e)+0x100000000*to(t,e+4)};function tm(t,e){return J(t,{i:2},e&&e.out,e&&e.dictionary)}var tp="undefined"!=typeof TextDecoder&&new TextDecoder;try{tp.decode(K,{stream:!0})}catch(t){}var td=function(t){for(var e="",s=0;;){var i=t[s++],r=(i>127)+(i>223)+(i>239);if(s+r>t.length)return{s:e,r:Y(t,s-1)};r?3==r?e+=String.fromCharCode(55296|(i=((15&i)<<18|(63&t[s++])<<12|(63&t[s++])<<6|63&t[s++])-65536)>>10,56320|1023&i):1&r?e+=String.fromCharCode((31&i)<<6|63&t[s++]):e+=String.fromCharCode((15&i)<<12|(63&t[s++])<<6|63&t[s++]):e+=String.fromCharCode(i)}};function tc(t,e){if(e){for(var s="",i=0;i<t.length;i+=16384)s+=String.fromCharCode.apply(null,t.subarray(i,i+16384));return s}if(tp)return tp.decode(t);var r=td(t),a=r.s,s=r.r;return s.length&&X(8),a}var tu=function(t,e,s){var i=th(t,e+28),r=tc(t.subarray(e+46,e+46+i),!(2048&th(t,e+8))),a=e+46+i,n=to(t,e+20),h=s&&0xffffffff==n?tf(t,a):[n,to(t,e+24),to(t,e+42)],o=h[0],l=h[1],m=h[2];return[th(t,e+10),o,l,r,a+th(t,e+30)+th(t,e+32),m]},tf=function(t,e){for(;1!=th(t,e);e+=4+th(t,e+2));return[tl(t,e+12),tl(t,e+4),tl(t,e+20)]},tg="function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout?setTimeout:function(t){t()};class ty extends Error{}let tb=t=>{switch(t){case f.Contain:case f.ScaleDown:return"xMidYMid meet";case f.Cover:return"xMidYMid slice";case f.Fill:return"none";case f.None:return"xMinYMin slice";default:return"xMidYMid meet"}},tv=(t,e)=>{let s=new Blob([t],{type:e?.mimeType}),i=e?.name||w(),r=URL.createObjectURL(s),a=document.createElement("a");a.href=r,a.download=i,a.hidden=!0,document.body.appendChild(a),a.click(),setTimeout(()=>{a.remove(),URL.revokeObjectURL(r)},1e3)},t_=t=>((t??0)+1).toString().padStart(3,"0"),tw=async t=>{try{if(!t||"string"!=typeof t&&"object"!=typeof t)throw Error("Broken file or invalid file format");if("string"!=typeof t)return{animations:Array.isArray(t)?t:[t],isDotLottie:!1,manifest:null};let e=await fetch(t);if(!e.ok){let t=new ty(e.statusText);throw t.status=e.status,t}let s=tS(t);if("json"===s||!s){if(s)return{animations:[await e.json()],isDotLottie:!1,manifest:null};let t=await e.clone().text();try{return{animations:[JSON.parse(t)],isDotLottie:!1,manifest:null}}catch(t){}}let{data:i,manifest:r}=await tE(e);return{animations:i,isDotLottie:!0,manifest:r}}catch(t){return console.error(`âŒ ${tx(t).message}`),{animations:null,isDotLottie:!1,manifest:null}}},tS=t=>{if("string"==typeof t&&t&&tC(t))return t.split(".").pop()?.toLowerCase()},tk=(t,e)=>(tS(t),`${t.replace(/\.[^.]*$/,"").replace(/\W+/g,"")}`.toLowerCase()),tE=async t=>{let e=await t$(t),s=tA(e),i=[],r=[],{length:a}=s.animations;for(let t=0;t<a;t++){let a=JSON.parse(tF(tc(e[`animations/${s.animations[t].id}.json`])));r.push(tL(e,a.assets)),i.push(a)}return await Promise.all(r),{data:i,manifest:s}},tA=t=>{let e=JSON.parse(tc(t["manifest.json"],!1));if(!("animations"in e))throw Error("Manifest not found");if(!e.animations.length)throw Error("No animations listed in manifest");return e},tM=t=>{switch(t){case"svg":case"svg+xml":return"image/svg+xml";case"jpg":case"jpeg":return"image/jpeg";case"png":case"gif":case"webp":case"avif":return`image/${t}`;case"mp3":case"mpeg":case"wav":return`audio/${t}`;default:return""}},tx=t=>{let e={message:"Unknown error",status:tN()?500:400};return t&&"object"==typeof t&&("message"in t&&"string"==typeof t.message&&(e.message=t.message),"status"in t&&(e.status=Number(t.status))),e},tC=t=>{let e=t.split("/").pop()?.lastIndexOf(".");return(e??0)>1&&t.length-1>(e??0)},tP=t=>!("h"in t)&&!("w"in t)&&"p"in t&&"e"in t&&"u"in t&&"id"in t,tD=t=>!!t&&/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(tI(t)),tT=t=>"w"in t&&"h"in t&&!("xt"in t)&&"p"in t,tN=()=>!("undefined"!=typeof window&&window.document),tI=t=>t.substring(t.indexOf(",")+1),tF=t=>t.replace(RegExp(/"""/,"g"),'""').replace(/(["'])(.*?)\1/g,(t,e,s)=>{let i=s.replace(/[^\w\s\d.#]/g,"");return`${e}${i}${e}`}),tL=async(t,e)=>{if(!Array.isArray(e))return;let s=[],{length:i}=e;for(let r=0;r<i;r++){if(!tP(e[r])&&!tT(e[r]))continue;let i=tT(e[r])?"images":"audio",a=t?.[`${i}/${e[r].p}`];a&&s.push(new Promise(t=>{let s=tN()?Buffer.from(a).toString("base64"):btoa(a.reduce((t,e)=>`${t}${String.fromCharCode(e)}`,""));e[r].p=e[r].p?.startsWith("data:")||tD(e[r].p)?e[r].p:`data:${tM(tS(e[r].p))};base64,${s}`,e[r].e=1,e[r].u="",t()}))}await Promise.all(s)},t$=async t=>{let e=new Uint8Array(await t.arrayBuffer());return await new Promise((t,s)=>{!function(t,e,s){s||(s=e,e={}),"function"!=typeof s&&X(7);var i=[],r=function(){for(var t=0;t<i.length;++t)i[t]()},a={},n=function(t,e){tg(function(){s(t,e)})};tg(function(){n=s});for(var h=t.length-22;0x6054b50!=to(t,h);--h)if(!h||t.length-h>65558)return n(X(13,0,1),null),r;var o=th(t,h+8);if(o){var l=o,m=to(t,h+16),p=0xffffffff==m||65535==l;if(p){var d=to(t,h-12);(p=0x6064b50==to(t,d))&&(l=o=to(t,d+32),m=to(t,d+48))}for(var c=e&&e.filter,u=0;u<l;++u)!function(e){var s=tu(t,m,p),h=s[0],l=s[1],d=s[2],u=s[3],f=s[4],g=s[5],y=g+30+th(t,g+26)+th(t,g+28);m=f;var b=function(t,e){t?(r(),n(t,null)):(e&&(a[u]=e),--o||n(null,a))};if(!c||c({name:u,size:l,originalSize:d,compression:h}))if(h)if(8==h){var v,_,w=t.subarray(y,y+l);if(d<524288||l>.8*d)try{b(null,tm(w,{out:new E(d)}))}catch(t){b(t,null)}else i.push((v={size:d},(_=b)||(_=v,v={}),"function"!=typeof _&&X(7),tn(w,v,[ti],function(t){return tr(tm(t.data[0],ta(t.data[1])))},1,_)))}else b(X(14,"unknown compression type "+h,1),null);else b(null,Y(t,y,y+l));else b(null,null)}(0)}else n(null,{})}(e,(e,i)=>{e&&s(e),t(i)})})},tV=Symbol("UPDATE_ON_CONNECTED");tN()&&(global.HTMLElement=class{});class tz extends HTMLElement{constructor(){super();let{observedProperties:t=[]}=this.constructor;if(tV in this&&(this[tV]=[]),"propertyChangedCallback"in this&&"function"==typeof this.propertyChangedCallback){let{length:e}=t;for(let s=0;s<e;s++){let e=this[t[s]],i=Symbol(t[s]);this[i]=e,Object.defineProperty(this,t[s],{get(){return this[i]},set(e){let r=this[i];this[i]=e,this.propertyChangedCallback(t[s],r,e)}}),void 0!==e&&tV in this&&Array.isArray(this[tV])&&this[tV].push(t[s])}}}connectedCallback(){let t=[];tV in this&&Array.isArray(this[tV])&&(t=this[tV]);let{length:e}=t;for(let s=0;s<e;s++)"propertyChangedCallback"in this&&"function"==typeof this.propertyChangedCallback&&t[s]in this&&this.propertyChangedCallback(t[s],void 0,this[t[s]])}}function tO(){let t=this.shadow.querySelector("slot[name=controls]");if(!t)return;if(!this.controls){t.innerHTML="";return}t.innerHTML=`<div class="lottie-controls toolbar ${this.playerState===g.Error?"has-error":""}" aria-label="Lottie Animation controls"><button class="togglePlay" data-active="false" tabindex="0" aria-label="Toggle Play/Pause"><svg width="24" height="24" aria-hidden="true" focusable="false"><path d="M8.016 5.016L18.985 12 8.016 18.984V5.015z"/></svg></button> <button class="stop" data-active="true" tabindex="0" aria-label="Stop"><svg width="24" height="24" aria-hidden="true" focusable="false"><path d="M6 6h12v12H6V6z"/></svg></button> <button class="prev" tabindex="0" aria-label="Previous animation" hidden><svg width="24" height="24" aria-hidden="true" focusable="false"><path d="M17.9 18.2 8.1 12l9.8-6.2v12.4zm-10.3 0H6.1V5.8h1.5v12.4z"/></svg></button> <button class="next" tabindex="0" aria-label="Next animation" hidden><svg width="24" height="24" aria-hidden="true" focusable="false"><path d="m6.1 5.8 9.8 6.2-9.8 6.2V5.8zM16.4 5.8h1.5v12.4h-1.5z"/></svg></button><form class="progress-container${this.simple?" simple":""}"><input class="seeker" type="range" min="0" max="100" step="1" value="${this._seeker.toString()}" aria-valuemin="0" aria-valuemax="100" role="slider" aria-valuenow="${this._seeker.toString()}" tabindex="0" aria-label="Slider for search"><progress max="100" value="${this._seeker}"></progress></form>${this.simple?"":`<button class="toggleLoop" data-active="${this.loop}" tabindex="0" aria-label="Toggle loop"><svg width="24" height="24" aria-hidden="true" focusable="false"><path d="M17.016 17.016v-4.031h1.969v6h-12v3l-3.984-3.984 3.984-3.984v3h10.031zM6.984 6.984v4.031H5.015v-6h12v-3l3.984 3.984-3.984 3.984v-3H6.984z"/></svg></button> <button class="toggleBoomerang" data-active="${this.mode===y.Bounce}" aria-label="Toggle boomerang" tabindex="0"><svg width="24" height="24" aria-hidden="true" focusable="false"><path d="m11.8 13.2-.3.3c-.5.5-1.1 1.1-1.7 1.5-.5.4-1 .6-1.5.8-.5.2-1.1.3-1.6.3s-1-.1-1.5-.3c-.6-.2-1-.5-1.4-1-.5-.6-.8-1.2-.9-1.9-.2-.9-.1-1.8.3-2.6.3-.7.8-1.2 1.3-1.6.3-.2.6-.4 1-.5.2-.2.5-.2.8-.3.3 0 .7-.1 1 0 .3 0 .6.1.9.2.9.3 1.7.9 2.4 1.5.4.4.8.7 1.1 1.1l.1.1.4-.4c.6-.6 1.2-1.2 1.9-1.6.5-.3 1-.6 1.5-.7.4-.1.7-.2 1-.2h.9c1 .1 1.9.5 2.6 1.4.4.5.7 1.1.8 1.8.2.9.1 1.7-.2 2.5-.4.9-1 1.5-1.8 2-.4.2-.7.4-1.1.4-.4.1-.8.1-1.2.1-.5 0-.9-.1-1.3-.3-.8-.3-1.5-.9-2.1-1.5-.4-.4-.8-.7-1.1-1.1h-.3zm-1.1-1.1c-.1-.1-.1-.1 0 0-.3-.3-.6-.6-.8-.9-.5-.5-1-.9-1.6-1.2-.4-.3-.8-.4-1.3-.4-.4 0-.8 0-1.1.2-.5.2-.9.6-1.1 1-.2.3-.3.7-.3 1.1 0 .3 0 .6.1.9.1.5.4.9.8 1.2.5.4 1.1.5 1.7.5.5 0 1-.2 1.5-.5.6-.4 1.1-.8 1.6-1.3.1-.3.3-.5.5-.6zM13 12c.5.5 1 1 1.5 1.4.5.5 1.1.9 1.9 1 .4.1.8 0 1.2-.1.3-.1.6-.3.9-.5.4-.4.7-.9.8-1.4.1-.5 0-.9-.1-1.4-.3-.8-.8-1.2-1.7-1.4-.4-.1-.8-.1-1.2 0-.5.1-1 .4-1.4.7-.5.4-1 .8-1.4 1.2-.2.2-.4.3-.5.5z"/></svg></button> <button class="toggleSettings" aria-label="Settings" aria-haspopup="true" aria-expanded="${!!this._isSettingsOpen}" aria-controls="${this._identifier}-settings"><svg width="24" height="24" aria-hidden="true" focusable="false"><circle cx="12" cy="5.4" r="2.5"/><circle cx="12" cy="12" r="2.5"/><circle cx="12" cy="18.6" r="2.5"/></svg></button><div id="${this._identifier}-settings" class="popover" hidden><button class="snapshot" aria-label="Download still image" tabindex="0"><svg width="24" height="24" aria-hidden="true" focusable="false"><path d="M16.8 10.8 12 15.6l-4.8-4.8h3V3.6h3.6v7.2h3zM12 15.6H3v4.8h18v-4.8h-9zm7.8 2.4h-2.4v-1.2h2.4V18z"/></svg> Download still image</button></div>`}</div>`;let e=this.shadow.querySelector(".togglePlay");e instanceof HTMLButtonElement&&(e.onclick=this.togglePlay);let s=this.shadow.querySelector(".stop");s instanceof HTMLButtonElement&&(s.onclick=this.stop);let i=this.shadow.querySelector(".prev");i instanceof HTMLButtonElement&&(i.onclick=this.prev);let r=this.shadow.querySelector(".next");r instanceof HTMLButtonElement&&(r.onclick=this.next);let a=this.shadow.querySelector(".seeker");if(a instanceof HTMLInputElement&&(a.onchange=this._handleSeekChange,a.onmousedown=this._freeze),!this.simple){let t=this.shadow.querySelector(".toggleLoop");t instanceof HTMLButtonElement&&(t.onclick=this.toggleLoop);let e=this.shadow.querySelector(".toggleBoomerang");e instanceof HTMLButtonElement&&(e.onclick=this.toggleBoomerang);let s=this.shadow.querySelector(".snapshot");s instanceof HTMLButtonElement&&(s.onclick=()=>this.snapshot(!0));let i=this.shadow.querySelector(".toggleSettings");i instanceof HTMLButtonElement&&(i.onclick=this._handleSettingsClick,i.onblur=this._handleBlur)}}function tR(){this.template.innerHTML=`<div class="animation-container main" data-controls="${this.controls??!1}" lang="${this.description?document?.documentElement?.lang:"en"}" aria-label="${this.description??"Lottie animation"}" data-loaded="${this._playerState.loaded}"><figure class="animation" style="background:${this.background}">${this.playerState===g.Error?`<div class="error"><svg preserveAspectRatio="xMidYMid slice" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="1920" height="1080" viewBox="0 0 1920 1080"><path fill="#fff" d="M0 0h1920v1080H0z"/><path fill="#3a6d8b" d="M1190.2 531 1007 212.4c-22-38.2-77.2-38-98.8.5L729.5 531.3c-21.3 37.9 6.1 84.6 49.5 84.6l361.9.3c43.7 0 71.1-47.3 49.3-85.2zM937.3 288.7c.2-7.5 3.3-23.9 23.2-23.9 16.3 0 23 16.1 23 23.5 0 55.3-10.7 197.2-12.2 214.5-.1 1-.9 1.7-1.9 1.7h-18.3c-1 0-1.8-.7-1.9-1.7-1.4-17.5-13.4-162.9-11.9-214.1zm24.2 283.8c-13.1 0-23.7-10.6-23.7-23.7s10.6-23.7 23.7-23.7 23.7 10.6 23.7 23.7-10.6 23.7-23.7 23.7zM722.1 644h112.6v34.4h-70.4V698h58.8v31.7h-58.8v22.6h72.4v36.2H722.1V644zm162 57.1h.6c8.3-12.9 18.2-17.8 31.3-17.8 3 0 5.1.4 6.3 1v32.6h-.8c-22.4-3.8-35.6 6.3-35.6 29.5v42.3h-38.2V685.5h36.4v15.6zm78.9 0h.6c8.3-12.9 18.2-17.8 31.3-17.8 3 0 5.1.4 6.3 1v32.6h-.8c-22.4-3.8-35.6 6.3-35.6 29.5v42.3h-38.2V685.5H963v15.6zm39.5 36.2c0-31.3 22.2-54.8 56.6-54.8 34.4 0 56.2 23.5 56.2 54.8s-21.8 54.6-56.2 54.6c-34.4-.1-56.6-23.3-56.6-54.6zm74 0c0-17.4-6.1-29.1-17.8-29.1-11.7 0-17.4 11.7-17.4 29.1 0 17.4 5.7 29.1 17.4 29.1s17.8-11.8 17.8-29.1zm83.1-36.2h.6c8.3-12.9 18.2-17.8 31.3-17.8 3 0 5.1.4 6.3 1v32.6h-.8c-22.4-3.8-35.6 6.3-35.6 29.5v42.3h-38.2V685.5h36.4v15.6z"/><path fill="none" d="M718.9 807.7h645v285.4h-645z"/><text fill="#3a6d8b" style="text-align:center;position:absolute;left:100%;font-size:47px;font-family:system-ui,-apple-system,BlinkMacSystemFont,'.SFNSText-Regular',sans-serif" x="50%" y="848.017" text-anchor="middle">${this._errorMessage}</text></svg></div>`:""}</figure><slot name="controls"></slot></div>`,this.shadow.adoptedStyleSheets=[r_.styles],this.shadow.appendChild(this.template.content.cloneNode(!0))}var tB=((m={}).Rectangle="rc",m.Ellipse="el",m.PolygonStar="sr",m.Path="sh",m.Fill="fl",m.Stroke="st",m.GradientFill="gf",m.GradientStroke="gs",m.NoStyle="no",m.Group="gr",m.Transform="tr",m.RoundedCorners="rd",m.PuckerBloat="pb",m.Merge="mm",m.Twist="tw",m.OffsetPath="op",m.ZigZag="zz",m.Repeater="rp",m.Trim="tm",m.Unknown="ms",m),tq=((p={}).SVG="svg",p.HTML="html",p.Canvas="canvas",p),tj=((d={}).Float32="float32",d.Int16="int16",d.Int32="int32",d.Uint8="uint8",d.Uint8c="uint8c",d);let tH={1:"butt",2:"round",3:"square"},tG={1:"miter",2:"round",3:"bevel"};function tW(t){t.__complete||(new t1(t),new tZ(t),new tQ(t),new t0(t),new t2(t),tY(t.layers,t.assets),function(t,e){if(!t)return;let{length:s}=t;for(let i=0;i<s;i++)1===t[i].t&&(t[i].data.layers=tJ(t[i].data.refId,e),tY(t[i].data.layers||[],e))}(t.chars||[],t.assets),t.__complete=!0)}function tY(t,e){let{length:s}=t;for(let i=0;i<s;i++)if("ks"in t[i]&&!t[i].completed){if(t[i].completed=!0,t[i].hasMask){if(!t[i].masksProperties)continue;let{length:e}=t[i].masksProperties||[];for(let s=0;s<e;s++){if((t[i].masksProperties?.[s].pt?.k).i){tX(t[i].masksProperties?.[s].pt?.k);continue}if(!t[i].masksProperties[s])continue;let{length:e}=t[i].masksProperties?.[s].pt?.k||[];for(let r=0;r<e;r++)tX(t[i].masksProperties?.[s].pt?.k[r].s?.[0]),tX(t[i].masksProperties?.[s].pt?.k[r].e?.[0])}}switch(t[i].ty){case 0:t[i].layers=tJ(t[i].refId,e),tY(t[i].layers,e);break;case 4:tU(t[i].shapes||[])}}}function tU(t){let{length:e}=t;for(let s=e-1;s>=0;s--){if("gr"===t[s].ty){tU(t[s].it);continue}if("sh"===t[s].ty){if((t[s].ks?.k).i){tX(t[s].ks?.k);continue}let{length:e}=t[s].ks?.k||[];for(let i=0;i<e;i++)tX(t[s].ks?.k[i]?.s?.[0]),tX(t[s].ks?.k[i]?.e?.[0])}}}function tX(t){if(!t)return;let{length:e}=t.i;for(let s=0;s<e;s++)t.i[s][0]+=t.v[s][0],t.i[s][1]+=t.v[s][1],t.o[s][0]+=t.v[s][0],t.o[s][1]+=t.v[s][1]}function tJ(t,e){if(!t||!e)return;let s=function(t,e){let s=0,i=e.length;for(;s<i;){if(e[s].id===t)return e[s];s++}return null}(t,e);return s?s.layers?.__used?JSON.parse(JSON.stringify(s.layers)):(s.layers.__used=!0,s.layers):null}function tK(t,e){let s=e?e.split(".").map(t=>Number(t)):[100,100,100];return t[0]>s[0]||!(s[0]>t[0])&&(t[1]>s[1]||!(s[1]>t[1])&&(t[2]>s[2]||!(s[2]>t[2])&&null))}class tZ{constructor(t){if(this.minimumVersion=[4,4,14],tK(this.minimumVersion,t.v)&&(this.iterateLayers(t.layers),t.assets)){let{length:e}=t.assets;for(let s=0;s<e;s++)t.assets[s].layers&&this.iterateLayers(t.assets[s].layers)}}iterateLayers(t){let{length:e}=t;for(let s=0;s<e;s++)5===t[s].ty&&this.updateTextLayer(t[s])}updateTextLayer(t){let e=t.t?.d;t.t?.d&&e&&(t.t.d={k:[{s:e,t:0}]})}}class tQ{constructor(t){if(this.minimumVersion=[4,7,99],!t.chars||tK(this.minimumVersion,t.v))return;let{length:e}=t.chars;for(let s=0;s<e;s++)t.chars[s].data&&t.chars[s].data.shapes&&(tU(t.chars[s].data.shapes||[]),t.chars[s].data.ip=0,t.chars[s].data.op=99999,t.chars[s].data.st=0,t.chars[s].data.sr=1,t.chars[s].data.ks={a:{a:0,k:[0,0]},o:{a:0,k:100},p:{a:0,k:[0,0]},r:{a:0,k:0},s:{a:0,k:[100,100]}},t.chars[s].t||(t.chars[s].data.shapes?.push({ty:tB.NoStyle}),t.chars[s].data.shapes?.[0].it?.push({a:{a:0,k:[0,0]},o:{a:0,k:100},p:{a:0,k:[0,0]},r:{a:0,k:0},s:{a:0,k:[100,100]},sa:{a:0,k:0},sk:{a:0,k:0},ty:tB.Transform})))}}class t0{constructor(t){if(this.minimumVersion=[5,7,15],tK(this.minimumVersion,t.v)&&(this.iterateLayers(t.layers),t.assets)){let{length:e}=t.assets;for(let s=0;s<e;s++)t.assets[s].layers&&this.iterateLayers(t.assets[s].layers)}}iterateLayers(t){let{length:e}=t;for(let s=0;s<e;s++)5===t[s].ty&&this.updateTextLayer(t[s])}updateTextLayer(t){let e=t.t?.p;e&&("number"==typeof e.a&&(e.a={a:0,k:e.a}),"number"==typeof e.p&&(e.p={a:0,k:e.p}),"number"==typeof e.r&&(e.r={a:0,k:e.r}))}}class t1{constructor(t){if(this.minimumVersion=[4,1,9],tK(this.minimumVersion,t.v)&&(this.iterateLayers(t.layers),t.assets)){let e=t.assets.length;for(let s=0;s<e;s++)t.assets[s].layers&&this.iterateLayers(t.assets[s].layers)}}iterateLayers(t){let e=t.length;for(let s=0;s<e;s++)4===t[s].ty&&this.iterateShapes(t[s].shapes)}iterateShapes(t){if(!t)return;let{length:e}=t;for(let s=0;s<e;s++){if("gr"===t[s].ty){this.iterateShapes(t[s].it);continue}if("fl"===t[s].ty||"st"===t[s].ty){if(t[s].c?.k&&(t[s].c?.k)[0].i){let{length:e}=t[s].c?.k||[];for(let i=0;i<e;i++)(t[s].c?.k)[i].s&&((t[s].c?.k)[i].s[0]/=255,(t[s].c?.k)[i].s[1]/=255,(t[s].c?.k)[i].s[2]/=255,(t[s].c?.k)[i].s[3]/=255),(t[s].c?.k)[i].e&&((t[s].c?.k)[i].e[0]/=255,(t[s].c?.k)[i].e[1]/=255,(t[s].c?.k)[i].e[2]/=255,(t[s].c?.k)[i].e[3]/=255);continue}(t[s].c?.k)[0]/=255,(t[s].c?.k)[1]/=255,(t[s].c?.k)[2]/=255,(t[s].c?.k)[3]/=255}}}}class t2{constructor(t){if(this.minimumVersion=[4,4,18],tK(this.minimumVersion,t.v)&&(this.iterateLayers(t.layers),t.assets)){let{length:e}=t.assets;for(let s=0;s<e;s++)t.assets[s].layers&&this.iterateLayers(t.assets[s]?.layers||[])}}completeClosingShapes(t){let{length:e}=t;for(let s=e-1;s>=0;s--){if("gr"===t[s].ty){this.completeClosingShapes(t[s].it);continue}if("sh"!==t[s].ty)continue;if((t[s].ks?.k).i){(t[s].ks?.k).c=!!t[s].closed;continue}let{length:e}=t[s].ks?.k||[];for(let i=0;i<e;i++)t[s].ks?.k[i]?.s&&((t[s].ks?.k)[i].s[0].c=!!t[s].closed),t[s].ks?.k[i]?.e&&((t[s].ks?.k)[i].e[0].c=!!t[s].closed)}}iterateLayers(t){let{length:e}=t;for(let s=0;s<e;s++){if(t[s].hasMask){let e=t[s].masksProperties,{length:i}=e||[];for(let t=0;t<i;t++){if(!e)continue;if((e[t].pt?.k).i){e[t].pt.k.c=!!e[t].cl;continue}let{length:s}=e[t].pt?.k||[];for(let i=0;i<s;i++)(e[t].pt?.k)[i].s&&((e[t].pt?.k)[i].s[0].c=!!e?.[t].cl),(e[t].pt?.k)[i].e&&((e[t].pt?.k)[i].e[0].c=!!e?.[t].cl)}}4===t[s].ty&&this.completeClosingShapes(t[s].shapes||[])}}}class t3{constructor(t,e,s,i,r){let a=e,n=s;r&&ej(t,a)&&(a=eL(t,i,1/3)),r&&ej(n,i)&&(n=eL(t,i,2/3));let h=eB(t[0],a[0],n[0],i[0]),o=eB(t[1],a[1],n[1],i[1]);this.a=[h[0],o[0]],this.b=[h[1],o[1]],this.c=[h[2],o[2]],this.d=[h[3],o[3]],this.points=[t,a,n,i]}boundingBox(){let t=this.bounds();return{bottom:t.y.max,cx:(t.x.max+t.x.min)/2,cy:(t.y.max+t.y.min)/2,height:t.y.max-t.y.min,left:t.x.min,right:t.x.max,top:t.y.min,width:t.x.max-t.x.min}}bounds(){return{x:this._extrema(this,0),y:this._extrema(this,1)}}derivative(t){return[(3*t*this.a[0]+2*this.b[0])*t+this.c[0],(3*t*this.a[1]+2*this.b[1])*t+this.c[1]]}inflectionPoints(){let t=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(ew(t))return[];let e=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/t,s=e*e-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/t;if(s<0)return[];let i=Math.sqrt(s);return ew(i)?i>0&&i<1?[e]:[]:[e-i,e+i].filter(t=>t>0&&t<1)}intersections(t,e,s){let i=e,r=s;void 0===i&&(i=2),void 0===r&&(r=7);let a=[];return eP(eC(this,0,1),eC(t,0,1),0,i,a,r),a}normalAngle(t){let e=this.derivative(t);return Math.atan2(e[0],e[1])}point(t){return[((this.a[0]*t+this.b[0])*t+this.c[0])*t+this.d[0],((this.a[1]*t+this.b[1])*t+this.c[1])*t+this.d[1]]}split(t){if(t<=0)return[eK(this.points[0]),this];if(t>=1)return[this,eK(this.points[this.points.length-1])];let e=eL(this.points[0],this.points[1],t),s=eL(this.points[1],this.points[2],t),i=eL(this.points[2],this.points[3],t),r=eL(e,s,t),a=eL(s,i,t),n=eL(r,a,t);return[new t3(this.points[0],e,r,n,!0),new t3(n,a,i,this.points[3],!0)]}tangentAngle(t){let e=this.derivative(t);return Math.atan2(e[1],e[0])}_extrema(t,e){let s=t.points[0][e],i=t.points[t.points.length-1][e];if(s>i){let t=i;i=s,s=t}let r=eY(3*t.a[e],2*t.b[e],t.c[e]),{length:a}=r;for(let n=0;n<a;n++){if(r[n]<=0||r[n]>=1)continue;let a=t.point(r[n])[e];if(a<s){s=a;continue}a>i&&(i=a)}return{max:i,min:s}}}function t5(t,e){let s=(e+1)%t.length();return new t3(t.v[e],t.o[e],t.i[s],t.v[s],!0)}let t4=()=>null,t6={default:150},t8=()=>t6.default,t9=!1,t7=()=>t9,et={current:!0},ee=()=>et.current,es={},ei=t=>es[t],er=()=>{if(es.canvas)return tq.Canvas;for(let t in es)if(es[t])return t;return tq.SVG},ea="",en=()=>ea,eh={},eo="",el=(i=0,()=>(i+=1,`${eo}__lottie_element_${i}`)),em=(t,e)=>{let s=eX(255*t[0],255*t[1],255*t[2]);return s[2]+=e,s[2]>1?s[2]=1:s[2]<0&&(s[2]=0),eM(s[0],s[1],s[2])},ep=(t,e)=>{let s=eX(255*t[0],255*t[1],255*t[2]);return s[0]+=e/360,s[0]>1?s[0]-=1:s[0]<0&&(s[0]+=1),eM(s[0],s[1],s[2])},ed=(t,e)=>{let s=eX(255*t[0],255*t[1],255*t[2]);return s[1]+=e,s[1]>1?s[1]=1:s[1]<=0&&(s[1]=0),eM(s[0],s[1],s[2])},ec=(t,e)=>2*Math.abs(t.cx-e.cx)<t.width+e.width&&2*Math.abs(t.cy-e.cy)<t.height+e.height,eu=(t,e,s,i)=>{if(0===e)return"";let r=t.o,a=t.i,n=t.v,h,o=` M${i.applyToPointStringified(n[0][0],n[0][1])}`;for(h=1;h<e;h++)o+=` C${i.applyToPointStringified(r[h-1][0],r[h-1][1])} ${i.applyToPointStringified(a[h][0],a[h][1])} ${i.applyToPointStringified(n[h][0],n[h][1])}`;return s&&e&&(o+=` C${i.applyToPointStringified(r[h-1][0],r[h-1][1])} ${i.applyToPointStringified(a[0][0],a[0][1])} ${i.applyToPointStringified(n[0][0],n[0][1])}z`),o},ef=t=>eN()?null:document.createElementNS("http://www.w3.org/2000/svg",t),eg=t=>eN()?null:document.createElement(t),ey=t=>{let e=t[0]*ev,s=t[1]*ev,i=t[2]*ev,r=Math.cos(e/2),a=Math.cos(s/2),n=Math.cos(i/2),h=Math.sin(e/2),o=Math.sin(s/2),l=Math.sin(i/2);return[h*o*n+r*a*l,h*a*n+r*o*l,r*o*n-h*a*l,r*a*n-h*o*l]},eb=(t,e)=>[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]],ev=Math.PI/180,e_=(t,e)=>1e5*Math.abs(t-e)<=Math.min(Math.abs(t),Math.abs(e)),ew=t=>1e-5>=Math.abs(t),eS=(t=16)=>({0:"source-over",1:"multiply",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light"})[t]||"",ek=(t,e)=>{let s=t.intersections(e);return(s.length&&e_(s[0][0],1)&&s.shift(),s.length)?s[0]:null},eE=(t,e)=>{let s=[e[0]-t[0],e[1]-t[1]],i=-(.5*Math.PI);return[Math.cos(i)*s[0]-Math.sin(i)*s[1],Math.sin(i)*s[0]+Math.cos(i)*s[1]]},eA=(t,e)=>{let s=0===e?t.length()-1:e-1,i=(e+1)%t.length(),r=eE(t.v[s],t.v[i]);return Math.atan2(0,1)-Math.atan2(r[1],r[0])},eM=(t,e,s)=>{let i=0,r=0,a=0,n=Math.floor(6*t),h=6*t-n,o=s*(1-e),l=s*(1-h*e),m=s*(1-(1-h)*e);switch(n%6){case 0:i=s,r=m,a=o;break;case 1:i=l,r=s,a=o;break;case 2:i=o,r=s,a=m;break;case 3:i=o,r=l,a=s;break;case 4:i=m,r=o,a=s;break;case 5:i=s,r=o,a=l}return[i,r,a]},ex=()=>"undefined"!=typeof navigator,eC=(t,e,s)=>{let i=t.boundingBox();return{bez:t,cx:i.cx,cy:i.cy,height:i.height,t:(e+s)/2,t1:e,t2:s,width:i.width}},eP=(t,e,s,i,r,a)=>{if(!ec(t,e))return;if(s>=a||t.width<=i&&t.height<=i&&e.width<=i&&e.height<=i){r.push([t.t,e.t]);return}let n=eQ(t),h=eQ(e);eP(n[0],h[0],s+1,i,r,a),eP(n[0],h[1],s+1,i,r,a),eP(n[1],h[0],s+1,i,r,a),eP(n[1],h[1],s+1,i,r,a)},eD=t=>Symbol.iterator in Object(t)&&(!t.length||"number"==typeof t[0]),eT=()=>!!ex()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent),eN=()=>!("undefined"!=typeof window&&window.document),eI=(t,e,s,i,r)=>{let a=e.points[3],n=s.points[0];if(3===i||ej(a,n))return a;if(2===i){let i=-e.tangentAngle(1),r=-s.tangentAngle(0)+Math.PI,h=eV(a,eH(a,i+Math.PI/2,100),n,eH(n,i+Math.PI/2,100)),o=h?eq(h,a):eq(a,n)/2,l=eH(a,i,2*o*.5519);return t.setXYAt(l[0],l[1],"o",t.length()-1),l=eH(n,r,2*o*.5519),t.setTripleAt(n[0],n[1],n[0],n[1],l[0],l[1],t.length()),n}let h=ej(a,e.points[2])?e.points[0]:e.points[2],o=ej(n,s.points[1])?s.points[3]:s.points[1],l=eV(h,a,n,o);return l&&eq(l,a)<r?(t.setTripleAt(l[0],l[1],l[0],l[1],l[0],l[1],t.length()),l):a},eF=(t,e,s)=>t*(1-s)+e*s,eL=(t,e,s)=>[eF(t[0],e[0],s),eF(t[1],e[1],s)],e$=(t,e,s)=>{let i=Math.atan2(e[0]-t[0],e[1]-t[1]);return[eH(t,i,s),eH(e,i,s)]},eV=(t,e,s,i)=>{let r=[t[0],t[1],1],a=[e[0],e[1],1],n=[s[0],s[1],1],h=[i[0],i[1],1],o=eb(eb(r,a),eb(n,h));return ew(o[2])?null:[o[0]/o[2],o[1]/o[2]]},ez=t=>{let e=[],{length:s}=t;for(let i=0;i<s;i++){if("duration"in t[i]){e.push(t[i]);continue}let s={duration:t[i].dr,time:t[i].tm};try{s.payload=JSON.parse(t[i].cm)}catch(e){try{s.payload=function(t){let e=t.split("\r\n"),s={},{length:i}=e,r=0;for(let t=0;t<i;t++){let i=e[t].split(":");2===i.length&&(s[i[0]]=i[1].trim(),r+=1)}if(0===r)throw Error("Could not parse markers");return s}(t[i].cm)}catch(e){s.payload={name:t[i].cm}}}e.push(s)}return e},eO=(t,e)=>{let s,i=(s=e$(t.points[0],t.points[1],e))[0],r=s[1],a=(s=e$(t.points[1],t.points[2],e))[0],n=s[1],h=(s=e$(t.points[2],t.points[3],e))[0],o=s[1],l=eV(i,r,a,n);null===l&&(l=r);let m=eV(h,o,a,n);return null===m&&(m=h),new t3(i,l,m,o)},eR=(t,e)=>{let s,i,r,a=t.inflectionPoints();if(0===a.length)return[eO(t,e)];if(1===a.length||e_(a[1],1))return s=(r=t.split(a[0]))[0],i=r[1],[eO(s,e),eO(i,e)];s=(r=t.split(a[0]))[0];let n=(a[1]-a[0])/(1-a[0]),h=(r=r[1].split(n))[0];return i=r[1],[eO(s,e),eO(h,e),eO(i,e)]},eB=(t,e,s,i)=>[-t+3*e-3*s+i,3*t-6*e+3*s,-3*t+3*e,t],eq=(t,e)=>Math.hypot(t[0]-e[0],t[1]-e[1]),ej=(t,e)=>e_(t[0],e[0])&&e_(t[1],e[1]),eH=(t,e,s)=>[t[0]+Math.cos(e)*s,t[1]-Math.sin(e)*s],eG=t=>{let e;for(let s=1;s<t.length;s++)e=eW(t[s-1],t[s]),t[s-1]=e[0],t[s]=e[1];return t.length>1&&(e=eW(t[t.length-1],t[0]),t[t.length-1]=e[0],t[0]=e[1]),t},eW=(t,e)=>{let s=t.slice(),i=e.slice(),r=ek(t[t.length-1],e[0]);return(r&&(s[t.length-1]=t[t.length-1].split(r[0])[0],i[0]=e[0].split(r[1])[1]),t.length>1&&e.length>1&&(r=ek(t[0],e[e.length-1])))?[[t[0].split(r[0])[0]],[e[e.length-1].split(r[1])[1]]]:[s,i]},eY=(t,e,s)=>{if(0===t)return[];let i=e*e-4*t*s;if(i<0)return[];let r=-e/(2*t);if(0===i)return[r];let a=Math.sqrt(i)/(2*t);return[r-a,r+a]},eU=(t,e)=>{let s=e[0],i=e[1],r=e[2],a=e[3],n=Math.atan2(2*i*a-2*s*r,1-2*i*i-2*r*r),h=Math.asin(2*s*i+2*r*a),o=Math.atan2(2*s*a-2*i*r,1-2*s*s-2*r*r);t[0]=n/ev,t[1]=h/ev,t[2]=o/ev},eX=(t,e,s)=>{let i=Math.max(t,e,s),r=Math.min(t,e,s),a=i-r,n=0;switch(i){case r:n=0;break;case t:n=(e-s+6*(e<s)*a)/(6*a);break;case e:n=(s-t+2*a)/(6*a);break;case s:n=(t-e+4*a)/(6*a)}return[n,0===i?0:a/i,i/255]},eJ=(t,e,s,i,r,a,n)=>{let h=s-Math.PI/2,o=s+Math.PI/2,l=e[0]+Math.cos(s)*i*r,m=e[1]-Math.sin(s)*i*r;t.setTripleAt(l,m,l+Math.cos(h)*a,m-Math.sin(h)*a,l+Math.cos(o)*n,m-Math.sin(o)*n,t.length())},eK=t=>new t3(t,t,t,t,!1),eZ=(t,e,s)=>{let i=[0,0,0,0],r=t[0],a=t[1],n=t[2],h=t[3],o=e[0],l=e[1],m=e[2],p=e[3],d,c,u,f,g;return(c=r*o+a*l+n*m+h*p)<0&&(c=-c,o=-o,l=-l,m=-m,p=-p),1-c>1e-6?(u=Math.sin(d=Math.acos(c)),f=Math.sin((1-s)*d)/u,g=Math.sin(s*d)/u):(f=1-s,g=s),i[0]=f*r+g*o,i[1]=f*a+g*l,i[2]=f*n+g*m,i[3]=f*h+g*p,i},eQ=t=>{let e=t.bez.split(.5);return[eC(e[0],t.t1,t.t),eC(e[1],t.t,t.t2)]};function e0(t,e,s,i){let r,a=new XMLHttpRequest;try{a.responseType="json"}catch(t){}a.onreadystatechange=()=>{if(4===a.readyState){if(200===a.status){s(r=e1(a));return}try{r=e1(a),s(r)}catch(t){i&&i(t)}}};try{a.open("GET",t,!0)}catch(s){a.open("GET",`${e}/${t}`,!0)}a.send()}function e1(t){let e=t.getResponseHeader("content-type");return e&&"json"===t.responseType&&-1!==e.indexOf("json")||t.response&&"object"==typeof t.response?t.response:t.response&&"string"==typeof t.response?JSON.parse(t.response):t.responseText?JSON.parse(t.responseText):null}let e2=1,e3,e5={addEventListener:(t,e,s)=>{throw Error("Function not implemented.")},dispatchEvent:t=>{throw Error("Function not implemented.")},onerror:null,onmessage:t=>{throw Error("workerProxy: Method onmessage not implemented")},onmessageerror:null,postMessage:t=>{e3({data:t})},removeEventListener:(t,e,s)=>{throw Error("Function not implemented.")},terminate:()=>{throw Error("Function not implemented.")}},e4={postMessage:t=>{e5.onmessage&&e5.onmessage({AT_TARGET:2,bubbles:!1,BUBBLING_PHASE:3,cancelable:!1,cancelBubble:!1,CAPTURING_PHASE:1,composed:!1,composedPath:()=>{throw Error("Function not implemented.")},currentTarget:null,data:t,defaultPrevented:!1,eventPhase:0,initEvent:(t,e,s)=>{throw Error("Function not implemented.")},initMessageEvent:(t,e,s,i,r,a,n,h)=>{throw Error("Function not implemented.")},isTrusted:!1,lastEventId:"",NONE:0,origin:"",ports:[],preventDefault:()=>{throw Error("Function not implemented.")},returnValue:!1,source:null,srcElement:null,stopImmediatePropagation:()=>{throw Error("Function not implemented.")},stopPropagation:()=>{throw Error("Function not implemented.")},target:null,timeStamp:0,type:""})}},e6={};function e8(t,s,i){st();let r=e7(s,i);e.postMessage({animation:t,id:r,type:"complete"})}function e9(t,s,i){st();let r=e7(s,i);e.postMessage({fullPath:eN()?t:window.location.origin+window.location.pathname,id:r,path:t,type:"loadData"})}function e7(t,e){e2+=1;let s=`processId_${e2}`;try{return e6[s]={onComplete:t,onError:e},s}catch(t){throw console.error(t),Error("Could not create animation proccess")}}function st(){e||((e=function(t){if(!eN()&&window.Worker&&window.Blob&&t7()){let e=new Blob(["var _workerSelf = self; self.onmessage = ",t.toString()],{type:"text/javascript"});return new Worker(URL.createObjectURL(e))}return e3=t,e5}(t=>{if("loadAnimation"===t.data.type){e0(t.data.path,t.data.fullPath,e=>{tW(e),e4.postMessage({id:t.data.id,payload:e,status:"success"})},()=>{e4.postMessage({id:t.data.id,status:"error"})});return}if("complete"===t.data.type){let e=t.data.animation;tW(e),e4.postMessage({id:t.data.id,payload:e,status:"success"});return}"loadData"===t.data.type&&e0(t.data.path,t.data.fullPath,e=>{e4.postMessage({id:t.data.id,payload:e,status:"success"})},()=>{e4.postMessage({id:t.data.id,status:"error"})})})).onmessage=({data:t})=>{let{id:e}=t,s=e6[e];if(e6[e]=null,"success"===t.status){s.onComplete(t.payload);return}s.onError&&s.onError()})}class se{constructor(t,e,s,i){this.type=t,this.currentTime=e,this.totalTime=s,this.direction=i<0?-1:1}}class ss{constructor(t,e){this.type=t,this.direction=e<0?-1:1}}class si{constructor(t,e,s,i){this.type=t,this.direction=s,this.currentTime=e,this.totalTime=i}}class sr{constructor(t,e,s,i){this.type=t,this.currentLoop=s,this.totalLoops=e,this.direction=i<0?-1:1}}class sa{constructor(t,e,s){this.type=t,this.firstFrame=e,this.totalFrames=s}}class sn{constructor(t,e){this.type=t,this.target=e}}class sh{constructor(t,e){this.type="renderFrameError",this.nativeError=t,this.currentTime=e}}class so{constructor(t,e){this.type="configError",this.nativeError=t}}class sl{addEventListener(t,e){return this._cbs[t]||(this._cbs[t]=[]),this._cbs[t].push(e),()=>{this.removeEventListener(t,e)}}removeEventListener(t,e){if(!e){this._cbs[t]=null;return}if(this._cbs[t]){let s=0,i=this._cbs[t].length;for(;s<i;)this._cbs[t][s]===e&&(this._cbs[t].splice(s,1),s--,i--),s++;0===this._cbs[t].length&&(this._cbs[t]=null)}}triggerEvent(t,e){if(this._cbs[t]){let{length:s}=this._cbs[t];for(let i=0;i<s;i++)this._cbs[t][i](e)}}constructor(){this._cbs={}}}class sm{constructor(t){this.audios=[],this.audioFactory=t,this._volume=1,this._isMuted=!1}addAudio(t){this.audios.push(t)}createAudio(t){return this.audioFactory?this.audioFactory(t):!eN()&&"Howl"in window?new window.Howl({src:[t]}):{isPlaying:!1,play:()=>{this.isPlaying=!0},playing:()=>{throw Error(`${this.constructor.name}: Method playing is not implemented`)},rate:()=>{throw Error(`${this.constructor.name}: Method rate is not implemented`)},seek:()=>{this.isPlaying=!1},setVolume:()=>{throw Error(`${this.constructor.name}: Method setVolume is not implemented`)}}}getVolume(){return this._volume}mute(){this._isMuted=!0,this._updateVolume()}pause(){for(let t of this.audios)t.pause()}resume(){for(let t of this.audios)t.resume()}setAudioFactory(t){this.audioFactory=t}setRate(t){for(let e of this.audios)e.setRate(t)}setVolume(t){this._volume=t,this._updateVolume()}unmute(){this._isMuted=!1,this._updateVolume()}_updateVolume(){let{length:t}=this.audios;for(let e=0;e<t;e++)this.audios[e].volume(this._volume*+!this._isMuted)}}let sp=[];class sd{constructor(t){let e=0,{length:s}=sp;for(;e<s;){if(sp[e].data&&sp[e].data.nm===t){for(let[t,s]of(sp[e].prepareFrame&&sp[e].data.xt&&sp[e].prepareFrame(0),Object.entries(sp[e].compInterface)))sd[t]=s;break}e++}}}class sc{constructor(){this._imageLoaded=this.imageLoaded.bind(this),this._footageLoaded=this.footageLoaded.bind(this),this.testImageLoaded=this.testImageLoaded.bind(this),this.createFootageData=this.createFootageData.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[],this.proxyImage=this._createProxyImage()}createFootageData(t){let e={assetData:t,img:null};return e9(this.getAssetsPath(t,this.assetsPath,this.path),(function(t){t&&(e.img=t),this._footageLoaded()}).bind(this),(function(){this._footageLoaded()}).bind(this)),e}createImageData(t){let e=this.getAssetsPath(t,this.assetsPath,this.path),s=ef("image");if(!s)throw Error(`${this.constructor.name}: Could not create SVG`);eT()?this.testImageLoaded(s):s.addEventListener("load",this._imageLoaded,!1),s.addEventListener("error",(function(){this.proxyImage&&(i.img=this.proxyImage),this._imageLoaded()}).bind(this),!1),s.setAttributeNS("http://www.w3.org/1999/xlink","href",e),this._elementHelper?.append?this._elementHelper.append(s):this._elementHelper?.appendChild(s);let i={assetData:t,img:s};return i}destroy(){this.imagesLoadedCb=null,this.images.length=0}footageLoaded(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}getAsset(t){let e=0,{length:s}=this.images;for(;e<s;){if(this.images[e].assetData===t)return this.images[e].img;e++}return null}imageLoaded(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}loadAssets(t,e){this.imagesLoadedCb=e;let{length:s}=t;for(let e=0;e<s;e++)if(!t[e].layers){if((!t[e].t||"seq"===t[e].t)&&this._createImageData){this.totalImages+=1,this.images.push(this._createImageData(t[e]));continue}3===Number(t[e].t)&&(this.totalFootages+=1,this.images.push(this.createFootageData(t[e])))}}loadedFootages(){return this.totalFootages===this.loadedFootagesCount}loadedImages(){return this.totalImages===this.loadedAssets}setAssetsPath(t){this.assetsPath=t||""}setCacheType(t,e){t===tq.SVG?(this._elementHelper=e,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}setPath(t){this.path=t||""}_createProxyImage(){if(eN())return null;let t=eg(tq.Canvas);if(!t)throw Error(`${this.constructor.name}: Could not create canvas element`);t.width=1,t.height=1;let e=t.getContext("2d");return e&&(e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1)),t}createImgData(t){let e=this.getAssetsPath(t,this.assetsPath,this.path),s=eg("img");if(!s)throw Error(`${this.constructor.name}: Could not create image element`);s.crossOrigin="anonymous",s.addEventListener("load",this._imageLoaded,!1),s.addEventListener("error",(function(){this.proxyImage&&(i.img=this.proxyImage),this._imageLoaded()}).bind(this),!1),s.src=e;let i={assetData:t,img:s};return i}getAssetsPath(t,e,s){if(t.e)return t.p||"";if(e){let s=t.p;return s?.indexOf("images/")!==-1&&(s=s?.split("/")[1]),`${e}${s||""}`}let i=s;return i+=t.u?t.u:"",i+=t.p}testImageLoaded(t){if(eN())return;let e=0,s=setInterval((function(){(t.getBBox().width||e>500)&&(this._imageLoaded(),clearInterval(s)),e+=1}).bind(this),50)}}class su extends sl{constructor(){super(),this.wrapper=null,this.autoloadSegments=!1,this.onComplete=null,this.onDestroy=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onSegmentStart=null,this._cbs={},this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=60,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.frameModifier=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=el(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=ee(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=sd,this.imagePreloader=new sc,this.audioController=new sm,this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new se("drawnFrame",0,0,0),this.expressionsPlugin=t4()}adjustSegment(t,e){this.playCount=0,t[1]<t[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=t[0]-t[1],this.timeCompleted=this.totalFrames,this.firstFrame=t[1],this.setCurrentRawFrameValue(this.totalFrames-.001-e)):t[1]>t[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=t[1]-t[0],this.timeCompleted=this.totalFrames,this.firstFrame=t[0],this.setCurrentRawFrameValue(.001+e)),this.trigger("segmentStart")}advanceTime(t){if(!0===this.isPaused||!1===this.isLoaded)return;let e=this.currentRawFrame+t*this.frameModifier,s=!1;e>=this.totalFrames-1&&this.frameModifier>0?this.loop&&this.playCount!==this.loop?e>=this.totalFrames?(this.playCount+=1,this.checkSegments(e%this.totalFrames)||(this.setCurrentRawFrameValue(e%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(e):this.checkSegments(e>this.totalFrames?e%this.totalFrames:0)||(s=!0,e=this.totalFrames-1):e<0?this.checkSegments(e%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&!0!==this.loop)?(this.setCurrentRawFrameValue(this.totalFrames+e%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(s=!0,e=0)):this.setCurrentRawFrameValue(e),s&&(this.setCurrentRawFrameValue(e),this.pause(),this.trigger("complete"))}checkLoaded(){!this.isLoaded&&this.renderer?.globalData?.fontManager?.isLoaded&&(this.imagePreloader?.loadedImages()||"canvas"!==this.renderer.rendererType)&&this.imagePreloader?.loadedFootages()&&(this.isLoaded=!0,this.renderer?.initItems(),setTimeout(()=>{this.trigger("DOMLoaded")},0),this.gotoFrame(),this.autoplay&&this.play())}checkSegments(t){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),t),!0)}configAnimation(t){if(this.renderer)try{this.animationData=t,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor((this.animationData.op||1)-(this.animationData.ip||0)),this.firstFrame=Math.round(this.animationData.ip||0)),this.renderer.configAnimation(t),t.assets||(t.assets=[]),this.assets=this.animationData.assets??this.assets,this.frameRate=this.animationData.fr??this.frameRate,void 0!==this.animationData.fr&&(this.frameMult=this.animationData.fr/1e3),this.renderer.searchExtraCompositions(t.assets),this.markers=ez(t.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(t){this.triggerConfigError(t)}}destroy(t){(!t||this.name===t)&&this.renderer&&(this.renderer.destroy(),this.imagePreloader?.destroy(),this.trigger("destroy"),this._cbs={},this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)}getAssetData(t){let e=0,s=this.assets.length;for(;e<s;){if(t===this.assets[e].id)return this.assets[e];e++}return null}getAssetsPath(t){if(!t)return"";let e="";if(t.e)e=t.p||"";else if(this.assetsPath){let s=t?.p;s?.indexOf("images/")!==-1&&(s=s?.split("/")[1]),e=this.assetsPath+s}else e=this.path+(t.u?t.u:"")+t.p;return e}getDuration(t){return t?this.totalFrames:this.totalFrames/this.frameRate}getMarkerData(t){for(let e=0;e<this.markers.length;e++)if(this.markers[e].payload?.name===t)return this.markers[e];return null}getPath(){return this.path}getVolume(){return this.audioController.getVolume()}goToAndPlay(t,e,s){if(s&&this.name!==s)return;let i=Number(t);if(isNaN(i)){let e=this.getMarkerData(t);e&&(e.duration?this.playSegments([e.time,e.time+e.duration],!0):this.goToAndStop(e.time,!0))}else this.goToAndStop(i,e,s);this.play()}goToAndStop(t,e,s){if(!s||this.name===s){if(isNaN(Number(t))){let e=this.getMarkerData(t);e&&this.goToAndStop(e.time,!0)}else e?this.setCurrentRawFrameValue(t):this.setCurrentRawFrameValue(t*this.frameModifier);this.pause()}}gotoFrame(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")}hide(){this.renderer?.hide()}imagesLoaded(){this.trigger("loaded_images"),this.checkLoaded()}includeLayers(t){if(!this.renderer)throw Error(`${this.constructor.name}: renderer is not implemented`);this.animationData.op&&t.op>this.animationData.op&&(this.animationData.op=t.op,this.totalFrames=Math.floor(t.op-(this.animationData.ip||0)));let e=this.animationData.layers||[],s,i=e.length,r=t.layers,{length:a}=r;for(let t=0;t<a;t++)for(s=0;s<i;){if(e[s].id===r[t].id){e[s]=r[t];break}s++}if((t.chars||t.fonts)&&(this.renderer.globalData?.fontManager?.addChars(t.chars),this.renderer.globalData?.fontManager?.addFonts(t.fonts,this.renderer.globalData.defs)),t.assets)for(s=0,i=t.assets.length;s<i;s++)this.animationData.assets?.push(t.assets[s]);this.animationData.__complete=!1,e8(this.animationData,this.onSegmentComplete)}loadNextSegment(){let t=this.animationData.segments;if(!t||0===t.length||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}let e=t.shift();this.timeCompleted=Number(e?.time)*this.frameRate;let s=`${this.path+this.fileName}_${this.segmentPos}.json`;this.segmentPos++,e9(s,this.includeLayers.bind(this),()=>{this.trigger("data_failed")})}loadSegments(){this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()}mute(t){t&&this.name!==t||this.audioController.mute()}onSegmentComplete(t){this.animationData=t,this.loadNextSegment()}onSetupError(){this.trigger("data_failed")}pause(t){t&&this.name!==t||!1===this.isPaused&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())}play(t){(!t||this.name===t)&&!0===this.isPaused&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))}playSegments(t,e){if(e&&(this.segments.length=0),Array.isArray(t[0])){let{length:e}=t;for(let s=0;s<e;s++)this.segments.push(t[s])}else this.segments.push(t);this.segments.length&&e&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()}preloadImages(){this.imagePreloader&&(this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets||[],this.imagesLoaded.bind(this)))}renderFrame(t){if(!1!==this.isLoaded&&this.renderer)try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(t){this.triggerRenderFrameError(t)}}resetSegments(t){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),t&&this.checkSegments(0)}resize(t,e){this.renderer?.updateContainerSize("number"==typeof t?t:void 0,"number"==typeof e?e:void 0)}setCurrentRawFrameValue(t){this.currentRawFrame=t,this.gotoFrame()}setData(t,e){try{let s=e;s&&"object"!=typeof s&&(s=JSON.parse(s));let i={animationData:s,wrapper:t},r=t.attributes;i.path=r.getNamedItem("data-animation-path")?.value??r.getNamedItem("data-bm-path")?.value??r.getNamedItem("bm-path")?.value??"";let a=r.getNamedItem("data-anim-type")?.value??r.getNamedItem("data-bm-type")?.value??r.getNamedItem("bm-type")?.value??r.getNamedItem("data-bm-renderer")?.value??r.getNamedItem("bm-renderer")?.value??(er()||tq.Canvas);Object.values(tq).includes(a)?i.animType=a:i.animType=tq.Canvas;let n=r.getNamedItem("data-anim-loop")?.value??r.getNamedItem("data-bm-loop")?.value??r.getNamedItem("bm-loop")?.value??"";"false"===n?i.loop=!1:"true"===n?i.loop=!0:""!==n&&(i.loop=parseInt(n,10));let h=r.getNamedItem("data-anim-autoplay")?.value??r.getNamedItem("data-bm-autoplay")?.value??r.getNamedItem("bm-autoplay")?.value??!0;i.autoplay="false"!==h,i.name=r.getNamedItem("data-name")?.value??r.getNamedItem("data-bm-name")?.value??r.getNamedItem("bm-name")?.value??"";let o=r.getNamedItem("data-anim-prerender")?.value??r.getNamedItem("data-bm-prerender")?.value??r.getNamedItem("bm-prerender")?.value??"";"false"===o&&(i.prerender=!1),i.path?this.setParams(i):this.trigger("destroy")}catch(t){throw console.error(t),Error(`${this.constructor.name}: Could not set data`)}}setDirection(t,e){e&&this.name!==e||(this.playDirection=t<0?-1:1,this.updaFrameModifier())}setLoop(t){this.loop=t}setParams(t){try{(t.wrapper||t.container)&&(this.wrapper=t.wrapper||t.container||null);let s=tq.SVG;t.animType?s=t.animType:t.renderer&&(s=t.renderer);let i=ei(s);this.renderer=new i(this,t.rendererSettings),this.renderer?.globalData?.defs&&this.imagePreloader?.setCacheType(s,this.renderer.globalData.defs),this.renderer?.setProjectInterface(this.projectInterface),this.animType=s,""===t.loop||null===t.loop||void 0===t.loop||!0===t.loop?this.loop=!0:!1===t.loop?this.loop=!1:this.loop=parseInt(`${t.loop}`,10),this.autoplay=!!(!("autoplay"in t)||t.autoplay),this.name=t.name?t.name:"",this.autoloadSegments=!!(!Object.prototype.hasOwnProperty.call(t,"autoloadSegments")||t.autoloadSegments),this.assetsPath=t.assetsPath??this.assetsPath,this.initialSegment=t.initialSegment,t.audioFactory&&this.audioController.setAudioFactory(t.audioFactory),t.animationData?this.setupAnimation(t.animationData):t.path&&(-1===t.path.lastIndexOf("\\")?this.path=t.path.substring(0,t.path.lastIndexOf("/")+1):this.path=t.path.substring(0,t.path.lastIndexOf("\\")+1),this.fileName=t.path.substring(t.path.lastIndexOf("/")+1),this.fileName=this.fileName.substring(0,this.fileName.lastIndexOf(".json")),function(t,s,i){if(eN())return;st();let r=e7(s,i);e.postMessage({fullPath:eN()?t:window.location.origin+window.location.pathname,id:r,path:t,type:"loadAnimation"})}(t.path,this.configAnimation,this.onSetupError))}catch(t){throw console.error(t),Error(`${this.constructor.name}: Could not set params`)}}setSegment(t,e){let s=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<t?s=t:this.currentRawFrame+this.firstFrame>e&&(s=e-t)),this.firstFrame=t,this.totalFrames=e-t,this.timeCompleted=this.totalFrames,-1!==s&&this.goToAndStop(s,!0)}setSpeed(t,e){e&&this.name!==e||(this.playSpeed=t,this.updaFrameModifier())}setSubframe(t){this.isSubframeEnabled=!!t}setupAnimation(t){e8(t,this.configAnimation)}setVolume(t,e){e&&this.name!==e||this.audioController.setVolume(t)}show(){this.renderer?.show()}stop(t){t&&this.name!==t||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))}togglePause(t){t&&this.name!==t||(!0===this.isPaused?this.play():this.pause())}trigger(t){try{if(!this._cbs?.[t])return;switch(t){case"enterFrame":this.triggerEvent(t,new se(t,this.currentFrame,this.totalFrames,this.frameModifier)),this.onEnterFrame?.call(this,new se(t,this.currentFrame,this.totalFrames,this.frameMult));break;case"drawnFrame":this.triggerEvent(t,new si(t,this.currentFrame,this.frameModifier,this.totalFrames));break;case"loopComplete":this.triggerEvent(t,new sr(t,Number(this.loop),this.playCount,this.frameMult)),this.onLoopComplete?.call(this,new sr(t,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(t,new ss(t,this.frameMult)),this.onComplete?.call(this,new ss(t,this.frameMult));break;case"segmentStart":this.triggerEvent(t,new sa(t,this.firstFrame,this.totalFrames)),this.onSegmentStart?.call(this,new sa(t,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(t,new sn(t,this)),this.onDestroy?.call(this,new sn(t,this));break;default:this.triggerEvent(t)}}catch(t){console.error(t)}}triggerConfigError(t){let e=new so(t,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)}triggerRenderFrameError(t){let e=new sh(t,this.currentFrame);this.triggerEvent("error",e),this.onError?.call(this,e)}unmute(t){t&&this.name!==t||this.audioController.unmute()}updaFrameModifier(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)}updateDocumentData(t,e,s){try{let i=this.renderer?.getElementByPath(t);i?.updateDocumentData([],e,s)}catch(t){console.warn(t)}}waitForFontsLoaded(){if(this.renderer){if(this.renderer?.globalData?.fontManager?.isLoaded){this.checkLoaded();return}setTimeout(this.waitForFontsLoaded.bind(this),20)}}}let sf=!0,sg=0,sy=0,sb=0,sv=[];function s_(){sb++,sb&&sf&&(!eN(),1)&&(window.requestAnimationFrame(sw),sf=!1)}function sw(t){sg=t,eN()||window.requestAnimationFrame(sk)}function sS({target:t}){let e=0;if(!t)throw Error("No animation to remove");for(;e<sy;)sv[e].animation===t&&(sv.splice(e,1),e--,sy-=1,t.isPaused||sA()),e++}function sk(t){let e=t-sg;for(let t=0;t<sy;t++)sv[t].animation.advanceTime(e);sg=t,sb&&1?eN()||window.requestAnimationFrame(sk):sf=!0}function sE(t,e){t.addEventListener("destroy",sS),t.addEventListener("_active",s_),t.addEventListener("_idle",sA),sv.push({animation:t,elem:e}),sy++}function sA(){sb--}let sM=(()=>{function t(t,e){let s,i=[];switch(t){case tj.Int16:case tj.Uint8c:s=1;break;default:s=1.1}for(let t=0;t<e;t++)i.push(s);return i}return"function"==typeof Uint8ClampedArray&&"function"==typeof Float32Array?function(e,s){return e===tj.Float32?new Float32Array(s):e===tj.Int16?new Int16Array(s):e===tj.Uint8c?new Uint8ClampedArray(s):t(e,s)}:t})();function sx(t){return Array.from({length:t})}class sC{constructor(t,e,s){this._length=0,this._maxLength=t,this._create=e,this._release=s,this.pool=sx(this._maxLength),this.newElement=this.newElement.bind(this),this.release=this.release.bind(this)}newElement(){let t;return this._length?(this._length-=1,t=this.pool[this._length]):t=this._create(),t}release(t){var e;this._length===this._maxLength&&(this.pool=(e=this.pool).concat(sx(e.length)),this._maxLength*=2),this._release&&this._release(t),this.pool[this._length]=t,this._length+=1}}let sP=new sC(8,()=>sM(tj.Float32,2)),sD=new sC(8,()=>({addedLength:0,lengths:sM(tj.Float32,t8()),percents:sM(tj.Float32,t8())})),sT=new sC(8,()=>({lengths:[],totalLength:0}),t=>{let{length:e}=t.lengths;for(let s=0;s<e;s++)sD.release(t.lengths[s]);t.lengths.length=0}),sN=sM(tj.Float32,8);function sI(t,e,s,i){let r={},a=`${t[0]}_${t[1]}_${e[0]}_${e[1]}_${s[0]}_${s[1]}_${i[0]}_${i[1]}`.replace(/\./g,"p");if(!r[a]){let n=t8(),h,o,l=0,m,p,d=null;2===t.length&&(t[0]!==e[0]||t[1]!==e[1])&&sL(t[0],t[1],e[0],e[1],t[0]+s[0],t[1]+s[1])&&sL(t[0],t[1],e[0],e[1],e[0]+i[0],e[1]+i[1])&&(n=2);let c=new sO(n),{length:u}=s;for(let r=0;r<n;r+=1){p=sx(u),o=r/(n-1),m=0;for(let r=0;r<u;r++)h=Math.pow(1-o,3)*t[r]+3*Math.pow(1-o,2)*o*(t[r]+s[r])+3*(1-o)*Math.pow(o,2)*(e[r]+i[r])+Math.pow(o,3)*e[r],p[r]=h,null!==d&&(m+=Math.pow(Number(p[r])-Number(d[r]),2));l+=m=Math.sqrt(m),c.points[r]=new sR(m,p),d=p}c.segmentLength=l,r[a]=c}return r[a]}function sF(t,e,s,i,r,a,n){let h=r,o=a;h<0?h=0:h>1&&(h=1);let l=sz(h,n),m=sz(o=o>1?1:o,n),p=1-l,d=1-m,c=p*p*p,u=l*p*p*3,f=l*l*p*3,g=l*l*l,y=p*p*d,b=l*p*d+p*l*d+p*p*m,v=l*l*d+p*l*m+l*p*m,_=l*l*m,w=p*d*d,S=l*d*d+p*m*d+p*d*m,k=l*m*d+p*m*m+l*d*m,E=l*m*m,A=d*d*d,M=m*d*d+d*m*d+d*d*m,x=m*m*d+d*m*m+m*d*m,C=m*m*m,{length:P}=t;for(let r=0;r<P;r++)sN[4*r]=Math.round((c*t[r]+u*s[r]+f*i[r]+g*e[r])*1e3)/1e3,sN[4*r+1]=Math.round((y*t[r]+b*s[r]+v*i[r]+_*e[r])*1e3)/1e3,sN[4*r+2]=Math.round((w*t[r]+S*s[r]+k*i[r]+E*e[r])*1e3)/1e3,sN[4*r+3]=Math.round((A*t[r]+M*s[r]+x*i[r]+C*e[r])*1e3)/1e3;return sN}function sL(t,e,s,i,r,a){let n=t*i+e*r+s*a-r*i-a*t-s*e;return n>-.001&&n<.001}function s$(t,e,s,i,r,a,n,h,o){let l;if(0===s&&0===a&&0===o)return sL(t,e,i,r,n,h);let m=Math.sqrt(Math.pow(i-t,2)+Math.pow(r-e,2)+Math.pow(a-s,2)),p=Math.sqrt(Math.pow(n-t,2)+Math.pow(h-e,2)+Math.pow(o-s,2)),d=Math.sqrt(Math.pow(n-i,2)+Math.pow(h-r,2)+Math.pow(o-a,2));return(l=m>p?m>d?m-p-d:d-p-m:d>p?d-p-m:p-m-d)>-1e-4&&l<1e-4}function sV(t,e,s,i){let r=t8(),a,n,h=0,o,l=[],m=[],p=sD.newElement(),d=s.length;for(let c=0;c<r;c++){n=c/(r-1),o=0;for(let r=0;r<d;r++)a=Math.pow(1-n,3)*t[r]+3*Math.pow(1-n,2)*n*s[r]+3*(1-n)*Math.pow(n,2)*i[r]+Math.pow(n,3)*e[r],l[r]=a,null!==m[r]&&(o+=Math.pow(l[r]-m[r],2)),m[r]=l[r];o&&(h+=o=Math.sqrt(o)),p.percents[c]=n,p.lengths[c]=h}return p.addedLength=h,p}function sz(t,{addedLength:e,lengths:s,percents:i}){let{length:r}=i,a=Math.floor((r-1)*t),n=t*e,h=0;if(a===r-1||0===a||n===s[a])return i[a];let o=s[a]>n?-1:1,l=!0;for(;l;)if(s[a]<=n&&s[a+1]>n?(h=(n-s[a])/(s[a+1]-s[a]),l=!1):a+=o,a<0||a>=r-1){if(a===r-1)return i[a];l=!1}return i[a]+(i[a+1]-i[a])*h}class sO{constructor(t){this.segmentLength=0,this.points=Array(t)}}class sR{constructor(t,e){this.partialLength=t,this.point=e}}let sB={};function sq(t,e,s,i,r){let a=r||`bez_${t}_${e}_${s}_${i}`.replace(/\./g,"p");if(sB[a])return sB[a];let n=new sj([t,e,s,i]);return sB[a]=n,n}class sj{constructor(t){this.float32ArraySupported="function"==typeof Float32Array,this.kSplineTableSize=11,this.kSampleStepSize=1/(this.kSplineTableSize-1),this.NEWTON_ITERATIONS=4,this.NEWTON_MIN_SLOPE=.001,this.SUBDIVISION_MAX_ITERATIONS=10,this.SUBDIVISION_PRECISION=1e-7,this._p=t,this._mSampleValues=this.float32ArraySupported?new Float32Array(this.kSplineTableSize):Array(this.kSplineTableSize),this._precomputed=!1,this.get=this.get.bind(this)}_calcSampleValues(){let t=this._p[0],e=this._p[2];for(let s=0;s<this.kSplineTableSize;++s)this._mSampleValues[s]=this.calcBezier(s*this.kSampleStepSize,t,e)}_getTForX(t){let e=this._p[0],s=this._p[2],i=this._mSampleValues,r=0,a=1,n=this.kSplineTableSize-1;for(;a!==n&&Number(i[a])<=t;++a)r+=this.kSampleStepSize;let h=r+(t-Number(i[--a]))/(Number(i[a+1])-Number(i[a]))*this.kSampleStepSize,o=this.getSlope(h,e,s);return o>=this.NEWTON_MIN_SLOPE?this.newtonRaphsonIterate(t,h,e,s):0===o?h:this.binarySubdivide(t,r,r+this.kSampleStepSize,e,s)}_precompute(){let t=this._p[0],e=this._p[1],s=this._p[2],i=this._p[3];this._precomputed=!0,(t!==e||s!==i)&&this._calcSampleValues()}get(t){let e=this._p[0],s=this._p[1],i=this._p[2],r=this._p[3];return(this._precomputed||this._precompute(),e===s&&i===r)?t:0===t?0:1===t?1:this.calcBezier(this._getTForX(t),s,r)}A(t,e){return 1-3*e+3*t}B(t,e){return 3*e-6*t}binarySubdivide(t,e,s,i,r){let a=e,n=s,h,o,l=0;do o=a+(n-a)/2,(h=this.calcBezier(o,i,r)-t)>0?n=o:a=o;while(Math.abs(h)>this.SUBDIVISION_PRECISION&&++l<this.SUBDIVISION_MAX_ITERATIONS);return o}C(t){return 3*t}calcBezier(t,e,s){return((this.A(e,s)*t+this.B(e,s))*t+this.C(e))*t}getSlope(t,e,s){return 3*this.A(e,s)*t*t+2*this.B(e,s)*t+this.C(e)}newtonRaphsonIterate(t,e,s,i){let r=e;for(let e=0;e<this.NEWTON_ITERATIONS;++e){let e=this.getSlope(r,s,i);if(0===e)break;let a=this.calcBezier(r,s,i)-t;r-=a/e}return r}}class sH{addDynamicProperty(t){this.dynamicProperties?.indexOf(t)===-1&&(this.dynamicProperties.push(t),this.container?.addDynamicProperty(this),this._isAnimated=!0)}getValue(t){throw Error(`${this.constructor.name}: Method getValue is not implemented`)}initDynamicPropertyContainer(t){this.container=t,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}iterateDynamicProperties(){this._mdf=!1;let{length:t}=this.dynamicProperties||[];for(let e=0;e<t;e++)this.dynamicProperties?.[e].getValue(),this.dynamicProperties?.[e]._mdf&&(this._mdf=!0)}constructor(){this.dynamicProperties=[]}}class sG extends sH{addEffect(t){this.effectsSequence.push(t),this.container?.addDynamicProperty(this)}getValueAtCurrentTime(){let t=Number(this.offsetTime),e=Number(this.comp?.renderedFrame)-t,s=this.keyframes[0].t-t,i=this.keyframes.length-1,r=this.keyframes[i].t-t,a=Number(this._caching?.lastFrame);if(!(e===a||-999999!==a&&(a>=r&&e>=r||a<s&&e<s))){a>=e&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);let t=this.interpolateValue(e,this._caching);this.pv=t}return this._caching.lastFrame=e,this.pv}interpolateValue(t,e){let s,i,r,a,n,h=Number(this.offsetTime),o=[0,0,0];"multidimensional"===this.propType&&(o=sM(tj.Float32,this.pv?.length));let l=e?.lastIndex||0,m=l,p=this.keyframes.length-1,d=!0,c=this.keyframes[0],u=this.keyframes[1];for(;d;){if(c=this.keyframes[m],u=this.keyframes[m+1],m===p-1&&t>=u.t-h){c.h&&(c=u),l=0;break}if(u.t-h>t){l=m;break}m<p-1?m++:(l=0,d=!1)}let f=this.keyframesMetadata[m]||{},g=null,y=u.t-h,b=c.t-h;if(c?.to){f.bezierData||(f.bezierData=sI(c.s,u?.s||c.e,c.to,c.ti));let n=f.bezierData;if(t>=y||t<b){let e=t>=y?n.points.length-1:0;s=n.points[e].point.length;for(let t=0;t<s;t++)o[t]=n.points[e].point[t]}else{f.__fnct?g=f.__fnct:f.__fnct=g=sq(c.o.x,c.o.y,c.i.x,c.i.y,c.n).get,i=g((t-b)/(y-b));let h=n.segmentLength*i,l,p=Number(e?.lastFrame)<t&&e?._lastKeyframeIndex===m?e._lastAddedLength:0;for(a=Number(e?.lastFrame)<t&&e?._lastKeyframeIndex===m?e?._lastPoint:0,d=!0,r=n.points.length;d;){if(p+=n.points[a].partialLength,0===h||0===i||a===n.points.length-1){s=n.points[a].point.length;for(let t=0;t<s;t++)o[t]=n.points[a].point[t];break}if(h>=p&&h<p+n.points[a+1].partialLength){l=(h-p)/n.points[a+1].partialLength,s=n.points[a].point.length;for(let t=0;t<s;t++)o[t]=n.points[a].point[t]+(n.points[a+1].point[t]-n.points[a].point[t])*l;break}a<r-1?a++:d=!1}e._lastPoint=a,e._lastAddedLength=p-n.points[a].partialLength,e._lastKeyframeIndex=m}}else{let e,s,r,a,h;if(p=c?.s.length||0,n=u?.s||c?.e||[0,0,0],this.sh&&c?.h!==1)if(t>=y)o[0]=n[0],o[1]=n[1],o[2]=n[2];else if(t<=b)o[0]=c.s[0],o[1]=c.s[1],o[2]=c.s[2];else{let e=ey(c?.s);eU(o,eZ(e,ey(n),(t-b)/(y-b)))}else for(let a=0;a<p;a++)c?.h!==1&&(t>=y?i=1:t<b?i=0:(c?.o.x.constructor===Array?(f.__fnct||(f.__fnct=[]),f.__fnct[a]?g=f.__fnct[a]:Array.isArray(c.o.y)&&Array.isArray(c.i.y)&&Array.isArray(c.i.x)&&(e=void 0===c.o.x[a]?c.o.x[0]:c.o.x[a],s=void 0===c.o.y[a]?c.o.y[0]:c.o.y[a],g=sq(e,s,r=void 0===c.i.x[a]?c.i.x[0]:c.i.x[a],void 0===c.i.y[a]?c.i.y[0]:c.i.y[a]).get,f.__fnct[a]=g)):f.__fnct?g=f.__fnct:(e=c.o.x,s=c.o.y,g=sq(e,s,r=c.i.x,c.i.y).get,c.keyframeMetadata=g),i=g?.((t-b)/(y-b)))),n=u.s||c.e,h=c?.h===1?c.s[a]:c?.s[a]+(n[a]-c?.s[a])*Number(i),"multidimensional"===this.propType?o[a]=h:o=h}return e.lastIndex=l,o}processEffectsSequence(){if(this.elem?.globalData.frameId===this.frameId||!this.effectsSequence.length)return;if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!!this._isFirstFrame;let t=this.effectsSequence.length,e=this.kf?this.pv:this.data?.k;for(let s=0;s<t;s++)e=this.effectsSequence[s](e);this.setVValue(e),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem?.globalData.frameId}setVValue(t){let e;if("number"==typeof t&&"unidimensional"===this.propType){e=t*Number(this.mult),Math.abs(this.v-e)>1e-5&&(this.v=e,this._mdf=!0);return}let s=0,i=this.v.length;for(;s<i;)e=t[s]*Number(this.mult),Math.abs(this.v[s]-e)>1e-5&&(this.v[s]=e,this._mdf=!0),s++}constructor(...t){super(...t),this.effectsSequence=[],this.initFrame=-999999,this.keyframes=[],this.keyframesMetadata=[]}}class sW extends sG{constructor(t,e,s=null,i=null){super(),this.propType="unidimensional",this.mult=s||1,this.data=e,this.v=e.k*(s||1),this.pv=e.k,this._mdf=!1,this.elem=t,this.container=i,this.comp=t.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=this.processEffectsSequence}}class sY extends sG{constructor(t,e,s=null,i=null){super(),this.propType="multidimensional",this.mult=s||1,this.data=e,this._mdf=!1,this.elem=t,this.container=i,this.comp=t.comp,this.k=!1,this.kf=!1,this.frameId=-1;let{length:r}=e.k;this.v=sM(tj.Float32,r),this.pv=sM(tj.Float32,r),this.vel=sM(tj.Float32,r);for(let t=0;t<r;t++)this.v[t]=e.k[t]*this.mult,this.pv[t]=e.k[t];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=this.processEffectsSequence}}class sU extends sG{constructor(t,e,s=null,i=null){super(),this.propType="unidimensional",this.keyframes=e.k,this.keyframesMetadata=[],this.offsetTime=t.data?.st,this.frameId=-1,this._caching={_lastKeyframeIndex:-1,lastFrame:this.initFrame,lastIndex:0,value:0},this.k=!0,this.kf=!0,this.data=e,this.mult=s||1,this.elem=t,this.container=i,this.comp=t.comp,this.v=this.initFrame,this.pv=this.initFrame,this._isFirstFrame=!0,this.getValue=this.processEffectsSequence,this.effectsSequence=[this.getValueAtCurrentTime.bind(this)]}}class sX extends sG{constructor(t,e,s=null,i=null){let r,a,n,h;super(),this.propType="multidimensional";let{length:o}=e.k;for(let t=0;t<o-1;t++)e.k[t].to&&e.k[t].s&&e.k[t+1]&&e.k[t+1].s&&(r=e.k[t].s,a=e.k[t+1].s,n=e.k[t].to,h=e.k[t].ti,(2===r.length&&(r[0]!==a[0]||r[1]!==a[1])&&sL(r[0],r[1],a[0],a[1],r[0]+n[0],r[1]+n[1])&&sL(r[0],r[1],a[0],a[1],a[0]+h[0],a[1]+h[1])||3===r.length&&(r[0]!==a[0]||r[1]!==a[1]||r[2]!==a[2])&&s$(r[0],r[1],r[2],a[0],a[1],a[2],r[0]+n[0],r[1]+n[1],r[2]+n[2])&&s$(r[0],r[1],r[2],a[0],a[1],a[2],a[0]+h[0],a[1]+h[1],a[2]+h[2]))&&(e.k[t].to=null,e.k[t].ti=null),r[0]===a[0]&&r[1]===a[1]&&0===n[0]&&0===n[1]&&0===h[0]&&0===h[1]&&(2===r.length||r[2]===a[2]&&0===n[2]&&0===h[2])&&(e.k[t].to=null,e.k[t].ti=null));this.effectsSequence=[this.getValueAtCurrentTime.bind(this)],this.data=e,this.keyframes=e.k,this.keyframesMetadata=[],this.offsetTime=t.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=s||1,this.elem=t,this.container=i,this.comp=t.comp,this.getValue=this.processEffectsSequence,this.frameId=-1;let l=e.k[0].s.length;this.v=sM(tj.Float32,l),this.pv=sM(tj.Float32,l);for(let t=0;t<l;t++)this.v[t]=this.initFrame,this.pv[t]=this.initFrame;this._caching={lastFrame:this.initFrame,lastIndex:0,value:sM(tj.Float32,l)}}}class sJ extends sG{constructor(){super(),this.propType=!1}}function sK(t,e,s,i,r){let a,n=e;if(n&&"sid"in n&&n.sid&&(n=t.globalData.slotManager?.getProp(n)),(n?.k).length)if("number"==typeof(n?.k)[0])a=new sY(t,n,i,r);else switch(s){case 0:a=new sU(t,n,i,r);break;case 1:a=new sX(t,n,i,r)}else a=new sW(t,n,i,r);return a||(a=new sJ),a?.effectsSequence.length&&r?.addDynamicProperty(a),a}class sZ{constructor(t,e,s){this.p=sK(e,t.v,0,0,s)}}class sQ{constructor(t,e,s){this.p=sK(e,t.v,0,0,s)}}class s0{constructor(t,e,s){this.p=sK(e,t.v,1,0,s)}}class s1{constructor(t,e,s){this.p=sK(e,t.v,1,0,s)}}class s2{constructor(t,e,s){this.p=sK(e,t.v,0,0,s)}}class s3{constructor(t,e,s){this.p=sK(e,t.v,0,0,s)}}class s5{constructor(t,e,s){this.p=sK(e,t.v,0,0,s)}}class s4{constructor(){this.p={}}}class s6{constructor(t,e){let s=t.ef||[];this.effectElements=[];let{length:i}=s;for(let r=0;r<i;r++){let i=new s8(s[r],e,t);this.effectElements.push(i)}}}class s8 extends sH{constructor(t,e,s){super(),this.effectElements=[],this.getValue=this.iterateDynamicProperties,this.init(t,e,s)}init(t,e,s){let i;this.data=t,this.effectElements=[],this.initDynamicPropertyContainer(e);let r=this.data.ef,{length:a}=r;for(let t=0;t<a;t++){switch(i=null,r[t].ty){case 0:i=new sZ(r[t],e,this);break;case 1:i=new sQ(r[t],e,this);break;case 2:i=new s0(r[t],e,this);break;case 3:i=new s1(r[t],e,this);break;case 4:case 7:i=new s5(r[t],e,this);break;case 10:i=new s2(r[t],e,this);break;case 11:i=new s3(r[t],e,this);break;case 5:i=new s6(s,e);break;default:i=new s4}i&&this.effectElements.push(i)}}renderFrame(t){throw Error(`${this.constructor.name}: Method renderFrame is not implemented yet`)}}class s9{checkMasks(){if(!this.data?.hasMask)return!1;let t=0,{length:e}=this.data?.masksProperties||[];for(;t<e;){if(this.data?.masksProperties?.[t].mode!=="n"&&this.data?.masksProperties?.[t].cl!==!1)return!0;t++}return!1}getType(){return this.type}initBaseData(t,e,s){this.globalData=e,this.comp=s,this.data=t,this.layerId=el(),this.data.sr||(this.data.sr=1),this.effectsManager=new s6(this.data,this)}initExpressions(){if(!this.data)throw Error(`${this.constructor.name}: data (LottieLayer) is not implemented`)}setBlendMode(){let t=eS(this.data?.bm),e=this.baseElement||this.layerElement;if(!e)throw Error(`${this.constructor.name}: Both baseElement and layerElement are not implemented`);e.style.mixBlendMode=t}constructor(){this.itemsData=[],this.shapesData=[]}}class s7{constructor(){this.props=sM(tj.Float32,16),this._identity=!0,this._identityCalculated=!1,this.reset()}applyToPoint(t,e,s){return{x:t*this.props[0]+e*this.props[4]+s*this.props[8]+this.props[12],y:t*this.props[1]+e*this.props[5]+s*this.props[9]+this.props[13],z:t*this.props[2]+e*this.props[6]+s*this.props[10]+this.props[14]}}applyToPointArray(t,e,s){return this.isIdentity()?[t,e,s]:[t*this.props[0]+e*this.props[4]+s*this.props[8]+this.props[12],t*this.props[1]+e*this.props[5]+s*this.props[9]+this.props[13],t*this.props[2]+e*this.props[6]+s*this.props[10]+this.props[14]]}applyToPointStringified(t,e){if(this.isIdentity())return`${t},${e}`;let s=this.props;return`${Math.round((t*s[0]+e*s[4]+s[12])*100)/100},${Math.round((t*s[1]+e*s[5]+s[13])*100)/100}`}applyToTriplePoints(t,e,s){let i=sM(tj.Float32,6);if(this.isIdentity())i.set([t[0],t[1],e[0],e[1],s[0],s[1]]);else{let r=this.props[0],a=this.props[1],n=this.props[4],h=this.props[5],o=this.props[12],l=this.props[13];i.set([t[0]*r+t[1]*n+o,t[0]*a+t[1]*h+l,e[0]*r+e[1]*n+o,e[0]*a+e[1]*h+l,s[0]*r+s[1]*n+o,s[0]*a+s[1]*h+l])}return i}applyToX(t,e,s){return t*this.props[0]+e*this.props[4]+s*this.props[8]+this.props[12]}applyToY(t,e,s){return t*this.props[1]+e*this.props[5]+s*this.props[9]+this.props[13]}applyToZ(t,e,s){return t*this.props[2]+e*this.props[6]+s*this.props[10]+this.props[14]}clone(t){return t.props.set(this.props),t}cloneFromProps(t){return this.props.set(t),this}equals(t){return this.props.every((e,s)=>e===t.props[s])}getInverseMatrix(){let t=this.props[0]*this.props[5]-this.props[1]*this.props[4],e=this.props[5]/t,s=-this.props[1]/t,i=-this.props[4]/t,r=this.props[0]/t,a=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/t,n=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/t,h=new s7;return h.setTransform(e,s,0,0,i,r,0,0,0,0,1,0,a,n,0,1),h}inversePoint(t){return this.getInverseMatrix().applyToPoint(t[0],t[1],t[2]||0)}inversePoints(t){return t.map(t=>this.inversePoint(t))}isIdentity(){return this._identityCalculated||(this._identity=1===this.props[0]&&0===this.props[1]&&0===this.props[2]&&0===this.props[3]&&0===this.props[4]&&1===this.props[5]&&0===this.props[6]&&0===this.props[7]&&0===this.props[8]&&0===this.props[9]&&1===this.props[10]&&0===this.props[11]&&0===this.props[12]&&0===this.props[13]&&0===this.props[14]&&1===this.props[15],this._identityCalculated=!0),this._identity}multiply(t){return this.transform(...t.props)}reset(){return this.props.set([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this}rotate(t){if(!t)return this;let e=Math.cos(t),s=Math.sin(t);return this._t(e,-s,0,0,s,e,0,0,0,0,1,0,0,0,0,1)}rotateX(t){if(!t)return this;let e=Math.cos(t),s=Math.sin(t);return this._t(1,0,0,0,0,e,-s,0,0,s,e,0,0,0,0,1)}rotateY(t){if(!t)return this;let e=Math.cos(t),s=Math.sin(t);return this._t(e,0,s,0,0,1,0,0,-s,0,e,0,0,0,0,1)}rotateZ(t){if(!t)return this;let e=Math.cos(t),s=Math.sin(t);return this._t(e,-s,0,0,s,e,0,0,0,0,1,0,0,0,0,1)}scale(t,e,s=1){return 1===t&&1===e&&1===s?this:this._t(t,0,0,0,0,e,0,0,0,0,s,0,0,0,0,1)}setTransform(t,e,s,i,r,a,n,h,o,l,m,p,d,c,u,f){return this.props.set([t,e,s,i,r,a,n,h,o,l,m,p,d,c,u,f]),this}shear(t,e){return this._t(1,e,t,1,0,0)}skew(t,e){return this.shear(Math.tan(t),Math.tan(e))}skewFromAxis(t,e){let s=Math.cos(e),i=Math.sin(e);return this._t(s,i,0,0,-i,s,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,Math.tan(t),1,0,0,0,0,1,0,0,0,0,1)._t(s,-i,0,0,i,s,0,0,0,0,1,0,0,0,0,1)}to2dCSS(){let t=this.roundMatrixProperty(this.props[0]),e=this.roundMatrixProperty(this.props[1]),s=this.roundMatrixProperty(this.props[4]),i=this.roundMatrixProperty(this.props[5]),r=this.roundMatrixProperty(this.props[12]),a=this.roundMatrixProperty(this.props[13]);return`matrix(${t},${e},${s},${i},${r},${a})`}toCSS(){let t="matrix3d(";for(let e=0;e<16;e++)t+=Math.round(1e4*this.props[e])/1e4,t+=15===e?")":",";return t}transform(t,e,s,i,r,a,n,h,o,l,m,p,d,c,u,f){let g=this.props;if(1===t&&0===e&&0===s&&0===i&&0===r&&1===a&&0===n&&0===h&&0===o&&0===l&&1===m&&0===p)return g[12]=g[12]*t+g[15]*d,g[13]=g[13]*a+g[15]*c,g[14]=g[14]*m+g[15]*u,g[15]*=f,this._identityCalculated=!1,this;let y=g[0],b=g[1],v=g[2],_=g[3],w=g[4],S=g[5],k=g[6],E=g[7],A=g[8],M=g[9],x=g[10],C=g[11],P=g[12],D=g[13],T=g[14],N=g[15];return g[0]=y*t+b*r+v*o+_*d,g[1]=y*e+b*a+v*l+_*c,g[2]=y*s+b*n+v*m+_*u,g[3]=y*i+b*h+v*p+_*f,g[4]=w*t+S*r+k*o+E*d,g[5]=w*e+S*a+k*l+E*c,g[6]=w*s+S*n+k*m+E*u,g[7]=w*i+S*h+k*p+E*f,g[8]=A*t+M*r+x*o+C*d,g[9]=A*e+M*a+x*l+C*c,g[10]=A*s+M*n+x*m+C*u,g[11]=A*i+M*h+x*p+C*f,g[12]=P*t+D*r+T*o+N*d,g[13]=P*e+D*a+T*l+N*c,g[14]=P*s+D*n+T*m+N*u,g[15]=P*i+D*h+T*p+N*f,this._identityCalculated=!1,this}translate(t,e,s=0){return 0!==t||0!==e||0!==s?this._t(1,0,0,0,0,1,0,0,0,0,1,0,t,e,s,1):this}_t(...t){return this.transform(...t)}roundMatrixProperty(t){return t<1e-6&&t>0||t>-1e-6&&t<0?Math.round(1e4*t)/1e4:t}}class it extends sH{constructor(t,e,s){if(super(),this.defaultVector=[0,0],this.elem=t,this.frameId=-1,this.propType="transform",this.data=e,this.v=new s7,this.pre=new s7,this.appliedTransformations=0,this.initDynamicPropertyContainer(s||t),e.p&&"s"in e.p?(this.px=sK(t,e.p.x,0,0,this),this.py=sK(t,e.p.y,0,0,this),"z"in e.p&&(this.pz=sK(t,e.p.z,0,0,this))):this.p=sK(t,e.p||{k:[0,0,0]},1,0,this),"rx"in e){if(this.rx=sK(t,e.rx,0,ev,this),this.ry=sK(t,e.ry,0,ev,this),this.rz=sK(t,e.rz,0,ev,this),e.or?.k[0].ti){let{length:t}=e.or.k;for(let s=0;s<t;s++)e.or.k[s].to=null,e.or.k[s].ti=null}this.or=sK(t,e.or,1,ev,this),this.or.sh=!0}else this.r=sK(t,e.r||{k:0},0,ev,this);e.sk&&(this.sk=sK(t,e.sk,0,ev,this),this.sa=sK(t,e.sa,0,ev,this)),this.a=sK(t,e.a||{k:[0,0,0]},1,0,this),this.s=sK(t,e.s||{k:[100,100,100]},1,.01,this),e.o?this.o=sK(t,e.o,0,.01,t):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties?.length||this.getValue(!0)}addDynamicProperty(t){super.addDynamicProperty(t),this.elem.addDynamicProperty(t),this._isDirty=!0}applyToMatrix(t){let e=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||e,this.a&&t.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&t.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&t.skewFromAxis(-this.sk.v,Number(this.sa?.v)),this.r?t.rotate(-Number(this.r.v)):t.rotateZ(-Number(this.rz?.v)).rotateY(Number(this.ry?.v)).rotateX(Number(this.rx?.v)).rotateZ(-Number(this.or?.v[2])).rotateY(Number(this.or?.v[1])).rotateX(Number(this.or?.v[0])),this.data?.p&&"s"in this.data.p?"z"in this.data.p?t.translate(Number(this.px?.v),Number(this.py?.v),-Number(this.pz?.v)):t.translate(Number(this.px?.v),Number(this.py?.v),0):t.translate(Number(this.p?.v[0]),Number(this.p?.v[1]),-Number(this.p?.v[2]))}autoOrient(){throw Error(`${this.constructor.name}: Method autoOrient not implemented`)}getValue(t){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||t){let t;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.a&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.s&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,Number(this.sa?.v)),this.r&&this.appliedTransformations<4?this.v.rotate(-Number(this.r.v)):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-Number(this.rz?.v)).rotateY(Number(this.ry?.v)).rotateX(Number(this.rx?.v)).rotateZ(-Number(this.or?.v[2])).rotateY(Number(this.or?.v[1])).rotateX(Number(this.or?.v[0])),this.autoOriented){let e,s;if(t=this.elem.globalData.frameRate,this.p?.keyframes)Number(this.p._caching?.lastFrame)+Number(this.p.offsetTime)<=this.p.keyframes[0].t?(e=this.p.getValueAtTime?.((this.p.keyframes[0].t+.01)/t,0),s=this.p.getValueAtTime?.(Number(this.p.keyframes[0].t)/t,0)):Number(this.p._caching?.lastFrame)+Number(this.p.offsetTime)>=this.p.keyframes[this.p.keyframes.length-1].t?(e=this.p.getValueAtTime?.(this.p.keyframes[this.p.keyframes.length-1].t/t,0),s=this.p.getValueAtTime?.((this.p.keyframes[this.p.keyframes.length-1].t-.05)/t,0)):(e=this.p.pv,s=this.p.getValueAtTime?.((Number(this.p._caching?.lastFrame)+Number(this.p.offsetTime)-.01)/t,Number(this.p.offsetTime)));else if(this.px?.keyframes&&this.py?.keyframes){e=[0,0],s=[0,0];let i=this.px,r=this.py;Number(i._caching?.lastFrame)+Number(i.offsetTime)<=Number(i.keyframes?.[0].t)?(e[0]=i.getValueAtTime?.((Number(i.keyframes?.[0].t)+.01)/t,0),e[1]=r.getValueAtTime?.((Number(r.keyframes?.[0].t)+.01)/t,0),s[0]=i.getValueAtTime?.(Number(i.keyframes?.[0].t)/t,0),s[1]=r.getValueAtTime?.(Number(r.keyframes?.[0]?.t)/t,0)):Number(i._caching?.lastFrame)+Number(i.offsetTime)>=Number(i.keyframes?.[Number(i.keyframes?.length)-1].t)?(e[0]=i.getValueAtTime?.(Number(i.keyframes?.[Number(i.keyframes?.length)-1].t)/t,0),e[1]=r.getValueAtTime?.(Number(r.keyframes?.[Number(r.keyframes?.length)-1].t)/t,0),s[0]=i.getValueAtTime?.((Number(i.keyframes?.[Number(i.keyframes?.length)-1].t)-.01)/t,0),s[1]=r.getValueAtTime?.((Number(r.keyframes?.[Number(r.keyframes?.length)-1].t)-.01)/t,0)):(e=[i.pv,r.pv],s[0]=i.getValueAtTime?.((Number(i._caching?.lastFrame)+Number(i.offsetTime)-.01)/t,i.offsetTime),s[1]=r.getValueAtTime?.((Number(r._caching?.lastFrame)+Number(r.offsetTime)-.01)/t,r.offsetTime))}else e=s=this.defaultVector;this.v.rotate(-Math.atan2(e[1]-s[1],e[0]-s[0]))}this.data.p&&"s"in this.data.p?"z"in this.data.p?this.v.translate(Number(this.px?.v),Number(this.py?.v),-Number(this.pz?.v)):this.v.translate(Number(this.px?.v),Number(this.py?.v),0):this.p&&this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}precalculateMatrix(){if(this.appliedTransformations=0,this.pre.reset(),!this.a?.effectsSequence?.length){if(!this.a)throw Error(`${this.constructor.name}: Cannot read 'a' value`);if(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s?.effectsSequence?.length){if(!this.s)throw Error(`${this.constructor.name}: Cannot read 's' value`);if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence?.length||this.sa?.effectsSequence?.length)return;this.pre.skewFromAxis(-this.sk.v,Number(this.sa?.v)),this.appliedTransformations=3}if(this.r){this.r.effectsSequence?.length||(this.pre.rotate(-Number(this.r.v)),this.appliedTransformations=4);return}this.rz?.effectsSequence.length||this.ry?.effectsSequence.length||this.rx?.effectsSequence.length||this.or?.effectsSequence.length||(this.pre.rotateZ(-Number(this.rz?.v)).rotateY(Number(this.ry?.v)).rotateX(Number(this.rx?.v)).rotateZ(-Number(this.or?.v[2])).rotateY(this.or?.v[1]).rotateX(this.or?.v[0]),this.appliedTransformations=4)}}}}let ie={TRANSFORM_EFFECT:"transformEffect"};class is extends s9{globalToLocal(t){let e,s=t,i=[];i.push(this.finalTransform);let r=!0,a=this.comp;for(;r;)a?.finalTransform?(a.data.hasMask&&i.splice(0,0,a.finalTransform),a=a.comp):r=!1;let{length:n}=i;for(let t=0;t<n;t++)e=i[t]?.mat.applyToPointArray(0,0,0),s=[s[0]-Number(e?.[0]),s[1]-Number(e?.[1]),0];return s}initTransform(){if(!this.data)throw Error(`${this.constructor.name}: LottiePlayer is not initialized`);let t=new s7;this.finalTransform={_localMatMdf:!1,_matMdf:!1,_opMdf:!1,localMat:t,localOpacity:1,mat:t,mProp:this.data.ks?new it(this,this.data.ks,this):{o:0}},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0)}renderLocalTransform(){if(!this.localTransforms)return;if(!this.finalTransform)throw Error(`${this.constructor.name}: finalTransform is not initialized`);let t=0,{length:e}=this.localTransforms;if(this.finalTransform._localMatMdf=!!this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;t<e;)this.localTransforms[t]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[t]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=Number(this.finalTransform.mProp.o?.v),this.finalTransform._opMdf=!0),t++;if(this.finalTransform._localMatMdf){let s=this.finalTransform.localMat;for(this.localTransforms[0].matrix?.clone(s),t=1;t<e;t++){let e=this.localTransforms[t].matrix;e&&s.multiply(e)}s.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){let s=this.finalTransform.localOpacity;for(t=0;t<e;t++)s*=.01*this.localTransforms[t].opacity;this.finalTransform.localOpacity=s}}renderTransform(){if(!this.finalTransform)throw Error(`${this.constructor.name}: finalTransform is not initialized`);if(this.finalTransform._opMdf=!!(this.finalTransform?.mProp.o?._mdf||this._isFirstFrame),this.finalTransform._matMdf=!!(this.finalTransform?.mProp._mdf||this._isFirstFrame),this.hierarchy){let t=this.finalTransform.mat,e=0,{length:s}=this.hierarchy;if(!this.finalTransform._matMdf)for(;e<s;){if(this.hierarchy[e].finalTransform?.mProp._mdf){this.finalTransform._matMdf=!0;break}e++}if(this.finalTransform._matMdf){let i=this.finalTransform.mProp.v.props;for(t.cloneFromProps(i),e=0;e<s;e++)this.hierarchy[e].finalTransform?.mProp.v&&t?.multiply(this.hierarchy[e].finalTransform.mProp.v)}}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=Number(this.finalTransform.mProp.o?.v))}searchEffectTransforms(){if(!this.renderableEffectsManager)return;let t=this.renderableEffectsManager.getEffects(ie.TRANSFORM_EFFECT);if(!t.length)return;this.localTransforms=[],this.finalTransform&&(this.finalTransform.localMat=new s7);let{length:e}=t;for(let s=0;s<e;s++)this.localTransforms.push(t[s])}constructor(...t){super(...t),this.mHelper=new s7}}class ii extends is{checkParenting(){"parent"in(this.data||{})&&this.comp?.buildElementParenting(this,this.data?.parent,[])}initHierarchy(){this.hierarchy=[],this._isParent=!1,this.checkParenting()}setAsParent(){this._isParent=!0}setHierarchy(t){this.hierarchy=t}}class ir extends ii{addDynamicProperty(t){-1===this.dynamicProperties.indexOf(t)&&this.dynamicProperties.push(t)}initFrame(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1}prepareProperties(t,e){let{length:s}=this.dynamicProperties;for(let t=0;t<s;t++)if(e||this._isParent&&"transform"===this.dynamicProperties[t].propType){if(this.dynamicProperties[t].getValue(),!this.globalData||!this.dynamicProperties[t]._mdf)continue;this.globalData._mdf=!0,this._mdf=!0}}constructor(...t){super(...t),this.dynamicProperties=[]}}class ia extends ir{addRenderableComponent(t){-1===this.renderableComponents.indexOf(t)&&this.renderableComponents.push(t)}checkLayerLimits(t){this.data&&this.globalData&&(this.data.ip-this.data.st<=t&&this.data.op-this.data.st>t?!0!==this.isInRange&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):!1!==this.isInRange&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide()))}checkLayers(t){throw Error(`${this.constructor.name}: Method checkLayers is not implemented`)}checkTransparency(){if(!this.finalTransform)throw Error(`${this.constructor.name}: finalTransform is not implemented`);if(0>=Number(this.finalTransform.mProp.o?.v)){!this.isTransparent&&this.globalData?.renderConfig?.hideOnTransparent&&(this.isTransparent=!0,this.hide());return}this.isTransparent&&(this.isTransparent=!1,this.show())}getLayerSize(){return this.data?.ty===5?{h:Number(this.data.textData?.height),w:Number(this.data.textData?.width)}:{h:Number(this.data?.height),w:Number(this.data?.width)}}hide(){throw Error(`${this.constructor.name}: Method hide not implemented yet`)}initRenderable(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]}prepareRenderableFrame(t,e){this.checkLayerLimits(t)}removeRenderableComponent(t){-1!==this.renderableComponents.indexOf(t)&&this.renderableComponents.splice(this.renderableComponents.indexOf(t),1)}renderRenderable(){let{length:t}=this.renderableComponents;for(let e=0;e<t;e++)this.renderableComponents[e].renderFrame(Number(this._isFirstFrame))}show(){throw Error(`${this.constructor.name}: Method show not implemented yet`)}sourceRectAtTime(){return{height:100,left:0,top:0,width:100}}constructor(...t){super(...t),this.renderableComponents=[]}}class ih extends ia{constructor(t,e,s){super(),this.initFrame(),this.initRenderable(),this.assetData=e.getAssetData(t.refId)||null,this.initBaseData(t,e,s),this._isPlaying=!1,this._canPlay=!1;let i=this.globalData?.getAssetsPath(this.assetData);this.audio=this.globalData?.audioController?.createAudio(i),this._currentTime=0,this.globalData?.audioController?.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=t.tm?sK(this,t.tm,0,e.frameRate,this):{_placeholder:!0},this.lv=sK(this,t.au&&t.au.lv?t.au.lv:{k:[100]},1,.01,this)}getBaseElement(){return null}hide(){this.audio.pause(),this._isPlaying=!1}pause(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1}prepareFrame(t){this.prepareRenderableFrame(t,!0),this.prepareProperties(t,!0),this.tm._placeholder?this._currentTime=t/Number(this.data?.sr):this._currentTime=this.tm.v,this._volume=Number(this.lv?.v[0]);let e=this._volume*Number(this._volumeMultiplier);this._previousVolume!==e&&(this._previousVolume=e,this.audio.volume(e))}renderFrame(t){if(this.isInRange&&this._canPlay){if(!this._isPlaying){this.audio.play(),this.audio.seek(this._currentTime/Number(this.globalData?.frameRate)),this._isPlaying=!0;return}(!this.audio.playing()||Math.abs(this._currentTime/Number(this.globalData?.frameRate)-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/Number(this.globalData?.frameRate))}}resume(){this._canPlay=!0}setMatte(t){throw Error(`${this.constructor.name}: Method setMatte is not implemented`)}setRate(t){this.audio.rate(t)}volume(t){this._volumeMultiplier=t,this._previousVolume=t*this._volume,this.audio.volume(this._previousVolume)}}class io extends ia{constructor(t,e,s){super(),this.assetData=null,this.initFrame(),this.initRenderable(),t.refId&&e?.getAssetData&&(this.assetData=e.getAssetData(t.refId)),this.footageData=e?.imageLoader.getAsset(this.assetData),this.initBaseData(t,e,s)}getBaseElement(){return null}getFootageData(){return this.footageData}initExpressions(){}setMatte(t){throw Error(`${this.constructor.name}: Method setMatte is not implemented`)}}let il=[2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403],im={data:{shapes:[]},shapes:[],size:0,w:0},ip=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function id(t){let e=ic(t);return e>=127462&&e<=127487}function ic(t){let e=0,s=t.charCodeAt(0);if(s>=55296&&s<=56319){let i=t.charCodeAt(1);i>=56320&&i<=57343&&(e=(s-55296)*1024+i-56320+65536)}return e}function iu(t,e){if(eN())return;let s=eg("span");s.setAttribute("aria-hidden","true"),s.style.fontFamily=e;let i=eg("span");i.innerText="giItT1WQy@!-/#",s.style.position="absolute",s.style.left="-10000px",s.style.top="-10000px",s.style.fontSize="300px",s.style.fontVariant="normal",s.style.fontStyle="normal",s.style.fontWeight="normal",s.style.letterSpacing="0",s.appendChild(i),document.body.appendChild(s);let r=i.offsetWidth;return i.style.fontFamily=`${function(t){let e=t.split(","),s=e.length,i=[];for(let t=0;t<s;t++)"sans-serif"!==e[t]&&"monospace"!==e[t]&&i.push(e[t]);return i.join(",")}(t)}, ${e}`,{node:i,parent:s,w:r}}class ig{constructor(){this.chars=null,this.fonts=[],this.isLoaded=!1,this.typekitLoaded=0,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)}addChars(t){let e,s;if(!t)return;this.chars||(this.chars=[]);let i=t.length,r=this.chars.length;for(let a=0;a<i;a++){for(e=0,s=!1;e<r;)this.chars[e].style===t[a].style&&this.chars[e].fFamily===t[a].fFamily&&this.chars[e].ch===t[a].ch&&(s=!0),e++;s||(this.chars.push(t[a]),r+=1)}}addFonts(t,e){if(!t){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=t.list;return}if(!eN()&&!document.body){this.isLoaded=!0;let{length:e}=t.list;for(let s=0;s<e;s++)t.list[s].helper=this.createHelper(t.list[s]),t.list[s].cache={};this.fonts=t.list;return}let s=t.list.length;for(let i=0;i<s;i++){let r,a=!0;if(t.list[i].loaded=!1,t.list[i].monoCase=iu(t.list[i].fFamily,"monospace"),t.list[i].sansCase=iu(t.list[i].fFamily,"sans-serif"),t.list[i].fPath){if(eN()||"p"!==t.list[i].fOrigin&&3!==t.list[i].origin)if(eN()||"g"!==t.list[i].fOrigin&&1!==t.list[i].origin){if(!eN()&&("t"===t.list[i].fOrigin||2===t.list[i].origin)){let{length:s}=r=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]');for(let e=0;e<s;e++)t.list[e].fPath===r[e].src&&(a=!1);if(a){let s=eg("link");s.setAttribute("f-forigin",t.list[i].fOrigin),s.setAttribute("f-origin",`${t.list[i].origin}`),s.setAttribute("rel","stylesheet"),s.setAttribute("href",t.list[i].fPath),e?.appendChild(s)}}}else{let{length:e}=r=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]');for(let s=0;s<e;s++)-1!==r[s].href.indexOf(t.list[s].fPath)&&(a=!1);if(a&&!eN()){let e=eg("link");e.setAttribute("f-forigin",t.list[i].fOrigin),e.setAttribute("f-origin",`${t.list[i].origin}`),e.type="text/css",e.rel="stylesheet",e.href=t.list[i].fPath,document.body.appendChild(e)}}else if((r=document.querySelectorAll(`style[f-forigin="p"][f-family="${t.list[i].fFamily}"], style[f-origin="3"][f-family="${t.list[i].fFamily}"]`)).length>0&&(a=!1),a){let s=eg("style");s.setAttribute("f-forigin",t.list[i].fOrigin),s.setAttribute("f-origin",`${t.list[i].origin}`),s.setAttribute("f-family",t.list[i].fFamily),s.innerText=`@font-face {font-family: ${t.list[i].fFamily}; font-style: normal; src: url('${t.list[i].fPath}');}`,e?.appendChild(s)}}else t.list[i].loaded=!0,s-=1;t.list[i].helper=this.createHelper(t.list[i],e),t.list[i].cache={},this.fonts.push(t.list[i])}0===s?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}getCharData(t,e,s){let i=0,r=this.chars?.length||0;for(;i<r;){if(this.chars?.[i].ch===t&&this.chars?.[i].style===e&&this.chars?.[i].fFamily===s)return this.chars[i];i++}return("string"==typeof t&&13!==t.charCodeAt(0)||!t)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",t,e,s)),im}getFontByName(t){let e=0,s=this.fonts.length;for(;e<s;){if(this.fonts[e].fName===t)return this.fonts[e];e++}return this.fonts[0]}measureText(t,e,s){let i=this.getFontByName(e);if(!i.cache?.[t]){let e=i.helper;if(" "===t){let s=Number(e?.measureText(`|${t}|`)),r=Number(e?.measureText("||"));i.cache[t]=(s-r)/100}else i.cache[t]=Number(e?.measureText(t))/100}return Number(i.cache?.[t])*Number(s)}checkLoadedFonts(){let t,e,s=this.fonts.length;for(let i=0;i<s;i++){if(this.fonts[i].loaded){s-=1;continue}if("n"===this.fonts[i].fOrigin||0===this.fonts[i].origin){this.fonts[i].loaded=!0;continue}t=this.fonts[i].monoCase?.node,e=this.fonts[i].monoCase?.w||0,t?.offsetWidth===e?(t=this.fonts[i].sansCase?.node,e=this.fonts[i].sansCase?.w||0,t?.offsetWidth!==e&&(s-=1,this.fonts[i].loaded=!0)):(s-=1,this.fonts[i].loaded=!0),this.fonts[i].loaded&&(this.fonts[i].sansCase?.parent.parentNode?.removeChild(this.fonts[i].sansCase.parent),this.fonts[i].monoCase?.parent.parentNode?.removeChild(this.fonts[i].monoCase.parent))}if(0!==s&&Date.now()-this.initTime<5e3){setTimeout(this.checkLoadedFontsBinded,20);return}setTimeout(this.setIsLoadedBinded,10)}createHelper(t,e){let s;if(eN())return;let i=document.body&&e?tq.SVG:tq.Canvas,r=iy(t);if(i===tq.SVG){let i=ef("text");i.style.fontSize="100px",i.setAttribute("font-family",t.fFamily),i.setAttribute("font-style",r.style),i.setAttribute("font-weight",r.weight),i.textContent="1",t.fClass?(i.style.fontFamily="inherit",i.setAttribute("class",t.fClass)):i.style.fontFamily=t.fFamily,e?.appendChild(i),s=i}else{let e=new OffscreenCanvas(500,500).getContext("2d");e&&(e.font=`${r.style} ${r.weight} 100px ${t.fFamily}`,s=e)}return{measureText:t=>i===tq.SVG?(s.textContent=t,s.getComputedTextLength()):s.measureText(t).width}}setIsLoaded(){this.isLoaded=!0}}function iy(t){let e=t.fStyle?t.fStyle.split(" "):[],s="normal",i="normal",{length:r}=e;for(let t=0;t<r;t++)switch(e[t].toLowerCase()){case"italic":i="italic";break;case"bold":s="700";break;case"black":s="900";break;case"medium":s="500";break;case"regular":case"normal":s="400";break;case"light":case"thin":s="200"}return{style:i,weight:t.fWeight||s}}class ib{constructor(t){this.animationData=t}getProp(t){return t.sid&&this.animationData.slots&&this.animationData.slots[t.sid]?Object.assign(t,this.animationData.slots[t.sid].p):t}}class iv extends ir{addPendingElement(t){this.pendingElements.push(t)}buildAllItems(){let{length:t}=this.layers;for(let e=0;e<t;e++)this.buildItem(e);this.checkPendingElements()}buildElementParenting(t,e,s=[]){let{elements:i,layers:r}=this,a=0,{length:n}=r;for(;a<n;){if(r[a].ind!==e){a++;continue}if(!i[a]||!0===i[a]){if(this.buildItem(a),!this.addPendingElement)throw Error(`${this.constructor.name}: Method addPendingElement is not initialized`);this.addPendingElement(t),a++;continue}if(s.push(i[a]),i[a].setAsParent(),void 0===r[a].parent){t.setHierarchy(s),a++;continue}this.buildElementParenting(t,r[a].parent,s),a++}}buildItem(t){throw Error(`${this.constructor.name}: Method buildItem not yet implemented`)}checkLayers(t){this.completeLayers=!0;let{length:e}=this.layers||[];for(let s=e-1;s>=0;s--)!this.elements[s]&&this.layers[s].ip-this.layers[s].st<=Number(t)-this.layers[s].st&&this.layers[s].op-this.layers[s].st>Number(t)-this.layers[s].st&&this.buildItem(s),this.completeLayers=!!this.elements[s]&&this.completeLayers;this.checkPendingElements()}checkPendingElements(){throw Error(`${this.constructor.name}: Method checkPendingElements not yet implemented`)}createAudio(t){if(!this.globalData)throw Error(`${this.constructor.name}: Can't access globalData`);return new ih(t,this.globalData,this)}createCamera(t){throw Error("You're using a 3d camera. Try the html renderer.")}createComp(t){throw Error(`${this.constructor.name}: Method createComp not yet implemented`)}createFootage(t){if(!this.globalData)throw Error(`${this.constructor.name}: Can't access globalData`);return new io(t,this.globalData,this)}createImage(t){throw Error(`${this.constructor.name}: Method createImage is not implemented`)}createItem(t){switch(t.ty){case 2:return this.createImage(t);case 0:return this.createComp(t);case 1:return this.createSolid(t);case 3:default:return this.createNull(t);case 4:return this.createShape(t);case 5:return this.createText(t);case 6:return this.createAudio(t);case 13:return this.createCamera(t);case 15:return this.createFootage(t)}}createNull(t){throw Error(`${this.constructor.name}: Method createNull not implemented`)}createShape(t){throw Error(`${this.constructor.name}: Method createShape not implemented`)}createSolid(t){throw Error(`${this.constructor.name}: Method createSolid not implemented`)}createText(t){throw Error(`${this.constructor.name}: Method createText not implemented`)}getElementById(t){let{length:e}=this.elements||[];for(let s=0;s<e;s++)if(this.elements[s].data?.ind===t)return this.elements[s];return null}getElementByPath(t){let e,s=t.shift();if("number"==typeof s)e=this.elements[s];else{let{length:t}=this.elements||[];for(let i=0;i<t;i++)if(this.elements[i].data?.nm===s){e=this.elements[i];break}}return 0===t.length?e:e?.getElementByPath(t)}includeLayers(t){this.completeLayers=!1;let{length:e}=t,{length:s}=this.layers;for(let i=0;i<e;i++){let e=0;for(;e<s;){if(this.layers[e].id===t[i].id){this.layers[e]=t[i];break}e++}}}initItems(){this.globalData?.progressiveLoad||this.buildAllItems()}searchExtraCompositions(t){let{length:e}=t;for(let s=0;s<e;s++)if(t[s].xt){let e=this.createComp(t[s]);e.initExpressions(),this.globalData?.projectInterface?.registerComposition(e)}}setProjectInterface(t){if(!this.globalData)throw Error(`${this.constructor.name}: globalData is not implemented`);this.globalData.projectInterface=t}setupGlobalData(t,e){if(!this.globalData)throw Error(`${this.constructor.name}: globalData is not implemented`);if(!this.animationItem)throw Error(`${this.constructor.name}: animationItem is not implemented`);this.globalData.fontManager=new ig,this.globalData.slotManager=new ib(t),this.globalData.fontManager.addChars(t.chars),this.globalData.fontManager.addFonts(t.fonts,e),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=t.fr||60,this.globalData.nm=t.nm,this.globalData.compSize={h:Number(t.h),w:Number(t.w)}}constructor(...t){super(...t),this.elements=[],this.layers=[],this.pendingElements=[]}}class i_ extends ia{constructor(){super();let{addPendingElement:t,checkLayers:e,createItem:s}=new iv;this.checkLayers=e,this.createItem=s,this.addPendingElement=t}addPendingElement(t){throw Error(`${this.constructor.name}: Method addPendingElement is not implemented`)}createContainerElements(){throw Error(`${this.constructor.name}: Method createContainerElements is not implemented`)}createContent(){throw Error(`${this.constructor.name}: Method createContent is not implemented`)}createItem(t){throw Error(`${this.constructor.name}: Method createItem is not implemented`)}createRenderableComponents(){throw Error(`${this.constructor.name}: Method createRenderableComponents is not implemented`)}destroy(){this.innerElem=null,this.destroyBaseElement()}destroyBaseElement(){throw Error(`${this.constructor.name}: Method destroyBaseElement is not implemented`)}hide(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){let t=this.baseElement||this.layerElement;t&&(t.style.display="none"),this.hidden=!0}}initElement(t,e,s){this.initFrame(),this.initBaseData(t,e,s),this.initTransform(),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()}initRendererElement(){throw Error(`${this.constructor.name}: Method initRendererElement is not implemented`)}prepareFrame(t){this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),this.checkTransparency()}renderElement(){throw Error(`${this.constructor.name}: Method renderElement is not implemented`)}renderFrame(t){if(!this.data?.hd&&!this.hidden){if(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),!this.renderElement)throw Error(`${this.constructor.name}: Method renderElement is not implemented`);this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1)}}renderInnerContent(){throw Error(`${this.constructor.name}: Method renderInnerContent is not implemented`)}show(){if(!this.data)throw Error(`${this.constructor.name}: data (LottieLayer) is not implemented`);if(this.isInRange||!this.isTransparent){if(!this.data.hd){let t=this.baseElement||this.layerElement;if(!t)throw Error(`${this.constructor.name}: Neither baseElement or layerElement is implemented`);t.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}}}class iw extends i_{buildAllItems(){throw Error(`${this.constructor.name}: Method buildAllItems is not implemented`)}destroy(){this.destroyElements(),this.destroyBaseElement()}destroyElements(){let{length:t}=this.layers||[];for(let e=0;e<t;e++)this.elements[e]&&this.elements[e].destroy()}getElements(){return this.elements}initElement(t,e,s){if(this.initFrame(),this.initBaseData(t,e,s),this.initTransform(),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),!this.data)throw Error(`${this.constructor.name}: data (LottieLayer) is not implemented`);(this.data.xt||!e.progressiveLoad)&&this.buildAllItems(),this.hide()}prepareFrame(t){if(!this.data)throw Error(`${this.constructor.name}: data (LottieLayer) is not implemented`);if(this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),!this.isInRange&&!this.data.xt)return;if(this.tm?._placeholder)this.renderedFrame=t/Number(this.data.sr);else{let t=this.tm?.v;t===this.data.op&&(t=this.data.op-1),this.renderedFrame=Number(t)}let{length:e}=this.elements;if(!this.completeLayers){if(!this.checkLayers)throw Error(`${this.constructor.name}: Method checkLayers is not implemented`);this.checkLayers(this.renderedFrame)}for(let t=e-1;t>=0;t--)(this.completeLayers||this.elements[t])&&(this.elements[t].prepareFrame(this.renderedFrame-this.layers[t].st),this.elements[t]._mdf&&(this._mdf=!0))}renderInnerContent(){let{length:t}=this.layers;for(let e=0;e<t;e++)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()}setElements(t){this.elements=t}constructor(...t){super(...t),this.elements=[],this.layers=[]}}class iS{constructor(){this.lengths=[],this.c=!1,this._length=0,this._maxLength=8,this.v=sx(this._maxLength),this.o=sx(this._maxLength),this.i=sx(this._maxLength)}doubleArrayLength(){this.v=this.v.concat(sx(this._maxLength)),this.i=this.i.concat(sx(this._maxLength)),this.o=this.o.concat(sx(this._maxLength)),this._maxLength*=2}length(){return this._length}reverse(){let t=new iS;t.setPathData(this.c,this._length);let e=this.v,s=this.o,i=this.i,r=0;this.c&&(t.setTripleAt(e[0][0],e[0][1],i[0][0],i[0][1],s[0][0],s[0][1],0,!1),r=1);let a=this._length-1,n=this._length;for(let h=r;h<n;h++)t.setTripleAt(e[a][0],e[a][1],i[a][0],i[a][1],s[a][0],s[a][1],h,!1),a-=1;return t}setLength(t){for(;this._maxLength<t;)this.doubleArrayLength();this._length=t}setPathData(t,e){this.c=t,this.setLength(e);let s=0;for(;s<e;)this.v[s]=sP.newElement(),this.o[s]=sP.newElement(),this.i[s]=sP.newElement(),s++}setTripleAt(t,e,s,i,r,a,n,h){this.setXYAt(t,e,"v",n,h),this.setXYAt(s,i,"o",n,h),this.setXYAt(r,a,"i",n,h)}setXYAt(t,e,s,i,r){let a;switch(this._length=Math.max(this._length,i+1),this._length>=this._maxLength&&this.doubleArrayLength(),s){case"v":a=this.v;break;case"i":a=this.i;break;case"o":a=this.o;break;default:a=[]}a[i]&&(!a[i]||r)||(a[i]=sP.newElement()),a[i][0]=t,a[i][1]=e}}let ik=new sC(4,function(){return new iS},function(t){let e=t._length;for(let s=0;s<e;s++)sP.release(t.v[s]),sP.release(t.i[s]),sP.release(t.o[s]),t.v[s]=null,t.i[s]=null,t.o[s]=null;t._length=0,t.c=!1}),iE=ik.newElement,iA=ik.release;function iM(t){let e=iE(),s=void 0===t._length?t.v.length:t._length;e.setLength(s),e.c=t.c;for(let i=0;i<s;i++)e.setTripleAt(t.v[i][0],t.v[i][1],t.o[i][0],t.o[i][1],t.i[i][0],t.i[i][1],i);return e}class ix{constructor(){this._length=0,this._maxLength=4,this.shapes=sx(this._maxLength)}addShape(t){this._length===this._maxLength&&(this.shapes=this.shapes.concat(sx(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=t,this._length+=1}releaseShapes(){for(let t=0;t<this._length;t++)iA(this.shapes[t]);this._length=0}}function iC(){return new ix}function iP(t,e,s){let i=null;switch(s){case 3:case 4:{let r=3===s?e.pt:e.ks,a=r?.k;if(a?.length){i=new iL(t,e,s);break}i=new iF(t,e,s);break}case 5:i=new iT(t,e);break;case 6:i=new iI(t,e);break;case 7:i=new iN(t,e)}return i?.k&&t.addDynamicProperty(i),i}sx(4);class iD extends sH{interpolateShape(t,e,s){let i=s?.lastIndex||0,r,a,n,h=0,o,l=this.keyframes;if(!l)throw Error(`${this.constructor.name}: Could not read keyframe data`);if(t<l[0].t-this.offsetTime)r=l[0].s[0],n=!0,i=0;else if(t>=l[l.length-1].t-this.offsetTime)r=l[l.length-1].s?l[l.length-1].s[0]:l[l.length-2].e[0],n=!0;else{let e,s,o=i,m=l.length-1,p=!0;for(;p&&(e=l[o],!((s=l[o+1]).t-this.offsetTime>t));)o<m-1?o++:p=!1;if(!e||!s)throw Error(`${this.constructor.name}: Could not set keyframe data`);let d=this.keyframesMetadata?.[o]||{};if(n=1===e.h,i=o,!n){if(t>=s.t-this.offsetTime)h=1;else if(t<e.t-this.offsetTime)h=0;else{let i;d.__fnct?i=d.__fnct:"number"==typeof e.o.x&&"number"==typeof e.o.y&&"number"==typeof e.i.x&&"number"==typeof e.i.y&&(d.__fnct=i=sq(e.o.x,e.o.y,e.i.x,e.i.y).get),h=i?.((t-(e.t-this.offsetTime))/(s.t-this.offsetTime-(e.t-this.offsetTime)))||0}a=s.s?s.s[0]:e.e[0]}r=e.s[0]}let m=e._length,p=r.i[0].length;s.lastIndex=i;for(let t=0;t<m;t++)for(let s=0;s<p;s++)o=n?r.i[t][s]:r.i[t][s]+(a.i[t][s]-r.i[t][s])*h,e.i[t][s]=o,o=n?r.o[t][s]:r.o[t][s]+(a.o[t][s]-r.o[t][s])*h,e.o[t][s]=o,o=n?r.v[t][s]:r.v[t][s]+(a.v[t][s]-r.v[t][s])*h,e.v[t][s]=o}interpolateShapeCurrentTime(){if(!this.pv)throw Error(`${this.constructor.name}: Cannot parse ShapePath v value`);let t=Number(this.comp?.renderedFrame)-this.offsetTime,e=this.keyframes[0].t-this.offsetTime,s=this.keyframes[this.keyframes.length-1].t-this.offsetTime,i=Number(this._caching?.lastFrame);return -999999!==i&&(i<e&&t<e||i>s&&t>s)||(this._caching.lastIndex=i<t?Number(this._caching?.lastIndex):0,this.interpolateShape(t,this.pv,this._caching)),this._caching.lastFrame=t,this.pv}processEffectsSequence(){let t,e;if(this.elem?.globalData?.frameId===this.frameId)return;if(!this.effectsSequence?.length){this._mdf=!1;return}if(this.lock&&this.pv){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1,t=this.kf?this.pv:this.data?.ks?this.data.ks.k:this.data?.pt?.k;let s=this.effectsSequence.length;for(e=0;e<s;e++)t=this.effectsSequence?.[e](t);this.setVValue(t),this.lock=!1,this.frameId=this.elem?.globalData?.frameId||0}reset(){this.paths=this.localShapeCollection}setVValue(t){if(!this.v||!t)throw Error(`${this.constructor.name}: ShapePath is not set`);if(!this.shapesEqual(this.v,t)){if(!this.localShapeCollection)throw Error(`${this.constructor.name}: localShapeCollection is not set`);this.v=iM(t),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection}}shapesEqual(t,e){if(t._length!==e._length||t.c!==e.c)return!1;let s=t._length||0;for(let i=0;i<s;i++)if(t.v[i]?.[0]!==e.v[i]?.[0]||t.v[i]?.[1]!==e.v[i]?.[1]||t.o[i]?.[0]!==e.o[i]?.[0]||t.o[i]?.[1]!==e.o[i]?.[1]||t.i[i]?.[0]!==e.i[i]?.[0]||t.i[i]?.[1]!==e.i[i]?.[1])return!1;return!0}constructor(...t){super(...t),this.effectsSequence=[],this.keyframes=[],this.keyframesMetadata=[],this.offsetTime=0}}class iT extends iD{constructor(t,e){super(),this.v=iE(),this.v.c=!0,this.localShapeCollection=iC(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=t,this.comp=t.comp,this.frameId=-1,this.d=e.d,this.initDynamicPropertyContainer(t),this.p=sK(t,e.p,1,0,this),this.s=sK(t,e.s,1,0,this),this.r=sK(t,e.r,0,0,this),this.dynamicProperties?.length?this.k=!0:(this.k=!1,this.convertRectToPath())}convertRectToPath(){let t=this.p.v[0],e=this.p.v[1],s=this.s.v[0]/2,i=this.s.v[1]/2,r=Math.min(s,i,this.r.v),a=.44810000000000005*r;this.v._length=0,2===this.d||1===this.d?(this.v?.setTripleAt(t+s,e-i+r,t+s,e-i+r,t+s,e-i+a,0,!0),this.v?.setTripleAt(t+s,e+i-r,t+s,e+i-a,t+s,e+i-r,1,!0),0===r?(this.v?.setTripleAt(t-s,e+i,t-s+a,e+i,t-s,e+i,2),this.v?.setTripleAt(t-s,e-i,t-s,e-i+a,t-s,e-i,3)):(this.v?.setTripleAt(t+s-r,e+i,t+s-r,e+i,t+s-a,e+i,2,!0),this.v?.setTripleAt(t-s+r,e+i,t-s+a,e+i,t-s+r,e+i,3,!0),this.v?.setTripleAt(t-s,e+i-r,t-s,e+i-r,t-s,e+i-a,4,!0),this.v?.setTripleAt(t-s,e-i+r,t-s,e-i+a,t-s,e-i+r,5,!0),this.v?.setTripleAt(t-s+r,e-i,t-s+r,e-i,t-s+a,e-i,6,!0),this.v?.setTripleAt(t+s-r,e-i,t+s-a,e-i,t+s-r,e-i,7,!0))):(this.v?.setTripleAt(t+s,e-i+r,t+s,e-i+a,t+s,e-i+r,0,!0),0===r?(this.v?.setTripleAt(t-s,e-i,t-s+a,e-i,t-s,e-i,1,!0),this.v?.setTripleAt(t-s,e+i,t-s,e+i-a,t-s,e+i,2,!0),this.v?.setTripleAt(t+s,e+i,t+s-a,e+i,t+s,e+i,3,!0)):(this.v?.setTripleAt(t+s-r,e-i,t+s-r,e-i,t+s-a,e-i,1,!0),this.v?.setTripleAt(t-s+r,e-i,t-s+a,e-i,t-s+r,e-i,2,!0),this.v?.setTripleAt(t-s,e-i+r,t-s,e-i+r,t-s,e-i+a,3,!0),this.v?.setTripleAt(t-s,e+i-r,t-s,e+i-a,t-s,e+i-r,4,!0),this.v?.setTripleAt(t-s+r,e+i,t-s+r,e+i,t-s+a,e+i,5,!0),this.v?.setTripleAt(t+s-r,e+i,t+s-a,e+i,t+s-r,e+i,6,!0),this.v?.setTripleAt(t+s,e+i-r,t+s,e+i-r,t+s,e+i-a,7,!0)))}getValue(){this.elem?.globalData?.frameId!==this.frameId&&(this.elem?.globalData?.frameId&&(this.frameId=this.elem.globalData.frameId),this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())}}class iN extends iD{constructor(t,e){super(),this.v=iE(),this.v.setPathData(!0,0),this.elem=t,this.comp=t.comp,this.data=e,this.frameId=-1,this.d=e.d,this.initDynamicPropertyContainer(t),1===e.sy?(this.ir=sK(t,e.ir,0,0,this),this.is=sK(t,e.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=sK(t,e.pt,0,0,this),this.p=sK(t,e.p,1,0,this),this.r=sK(t,e.r,0,ev,this),this.or=sK(t,e.or,0,0,this),this.os=sK(t,e.os,0,.01,this),this.localShapeCollection=iC(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties?.length?this.k=!0:(this.k=!1,this.convertToPath())}convertPolygonToPath(){let t,e=Math.floor(this.pt.v),s=2*Math.PI/e,i=this.or.v,r=this.os.v,a=2*Math.PI*i/(4*e),n=-(.5*Math.PI),h=this.data?.d===3?-1:1;for(n+=this.r.v,this.v._length=0,t=0;t<e;t++){let e=i*Math.cos(n),o=i*Math.sin(n),l=0===e&&0===o?0:o/Math.sqrt(e*e+o*o),m=0===e&&0===o?0:-e/Math.sqrt(e*e+o*o);e+=+this.p.v[0],o+=+this.p.v[1],this.v?.setTripleAt(e,o,e-l*a*r*h,o-m*a*r*h,e+l*a*r*h,o+m*a*r*h,t,!0),n+=s*h}this.paths.length=0,this.paths[0]=this.v}convertStarToPath(){let t=2*Math.floor(this.pt.v),e=2*Math.PI/t,s=!0,i=this.or.v,r=Number(this.ir?.v),a=this.os.v,n=Number(this.is?.v),h=2*Math.PI*i/(2*t),o=2*Math.PI*r/(2*t),l,m,p,d=-Math.PI/2;d+=this.r.v;let c=this.data?.d===3?-1:1;this.v._length=0;for(let u=0;u<t;u++){l=s?i:r,m=s?a:n,p=s?h:o;let t=l*Math.cos(d),f=l*Math.sin(d),g=0===t&&0===f?0:f/Math.sqrt(t*t+f*f),y=0===t&&0===f?0:-t/Math.sqrt(t*t+f*f);t+=+this.p.v[0],f+=+this.p.v[1],this.v?.setTripleAt(t,f,t-g*p*m*c,f-y*p*m*c,t+g*p*m*c,f+y*p*m*c,u,!0),s=!s,d+=e*c}}convertToPath(){throw Error(`${this.constructor.name}: Method convertToPath is not implemented`)}getValue(){this.elem?.globalData?.frameId!==this.frameId&&(this.frameId=this.elem?.globalData?.frameId||0,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())}}class iI extends iD{constructor(t,e){super(),this._cPoint=.5519,this.v=iE(),this.v.setPathData(!0,4),this.localShapeCollection=iC(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=e.d,this.elem=t,this.comp=t.comp,this.frameId=-1,this.initDynamicPropertyContainer(t),this.p=sK(t,e.p,1,0,this),this.s=sK(t,e.s,1,0,this),this.dynamicProperties?.length?this.k=!0:(this.k=!1,this.convertEllToPath())}convertEllToPath(){let t=this.p.v[0],e=this.p.v[1],s=this.s.v[0]/2,i=this.s.v[1]/2,r=3!==this.d,a=this.v;if(!a)throw Error(`${this.constructor.name}: Could not get value of ellipse`);a.v[0][0]=t,a.v[0][1]=e-i,a.v[1][0]=r?t+s:t-s,a.v[1][1]=e,a.v[2][0]=t,a.v[2][1]=e+i,a.v[3][0]=r?t-s:t+s,a.v[3][1]=e,a.i[0][0]=r?t-s*this._cPoint:t+s*this._cPoint,a.i[0][1]=e-i,a.i[1][0]=r?t+s:t-s,a.i[1][1]=e-i*this._cPoint,a.i[2][0]=r?t+s*this._cPoint:t-s*this._cPoint,a.i[2][1]=e+i,a.i[3][0]=r?t-s:t+s,a.i[3][1]=e+i*this._cPoint,a.o[0][0]=r?t+s*this._cPoint:t-s*this._cPoint,a.o[0][1]=e-i,a.o[1][0]=r?t+s:t-s,a.o[1][1]=e+i*this._cPoint,a.o[2][0]=r?t-s*this._cPoint:t+s*this._cPoint,a.o[2][1]=e+i,a.o[3][0]=r?t-s:t+s,a.o[3][1]=e-i*this._cPoint}getValue(){this.elem?.globalData?.frameId!==this.frameId&&(this.frameId=this.elem?.globalData?.frameId||0,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())}}class iF extends iD{constructor(t,e,s){super(),this.propType="shape",this.comp=t.comp,this.container=t,this.elem=t,this.data=e,this.k=!1,this.kf=!1,this._mdf=!1;let i=3===s?e.pt?.k:e.ks?.k;if(!i)throw Error(`${this.constructor.name}: Could now get Path Data`);this.v=iM(i),this.pv=iM(this.v),this.localShapeCollection=iC(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.effectsSequence=[],this.getValue=this.processEffectsSequence}}class iL extends iD{constructor(t,e,s){super(),this.propType="shape",this.comp=t.comp,this.elem=t,this.container=t,this.offsetTime=t.data?.st||0,this.keyframes=3===s?e.pt?.k:e.ks?.k??[],this.keyframesMetadata=[],this.k=!0,this.kf=!0;let{length:i}=this.keyframes[0]?.s?.[0].i||[];this.v=iE(),this.v.setPathData(!!this.keyframes[0].s?.[0].c,i),this.pv=iM(this.v),this.localShapeCollection=iC(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=-999999,this._caching={lastFrame:-999999,lastIndex:0},this.effectsSequence=[this.interpolateShapeCurrentTime.bind(this)],this.getValue=this.processEffectsSequence}}class i${constructor(t,e,s){this.masksProperties=[],this.data=t,this.element=e,this.globalData=s,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;let i=this.globalData.defs,{length:r}=this.masksProperties;this.viewData=sx(r),this.solidPath="";let a=this.masksProperties,n=0,h=[],o=el(),l,m,p,d="clipPath",c="clip-path";for(let t=0;t<r;t++){let e;("a"!==a[t].mode&&"n"!==a[t].mode||a[t].inv||a[t].o?.k!==100||a[t].o?.x)&&(d="mask",c="mask"),("s"===a[t].mode||"i"===a[t].mode)&&0===n?((l=ef("rect")).setAttribute("fill","#ffffff"),l.setAttribute("width",`${Number(this.element.comp?.data?.w)}`),l.setAttribute("height",`${Number(this.element.comp?.data?.h)}`),h.push(l)):l=null;let s=ef("path");if("n"===a[t].mode){this.viewData[t]={elem:s,lastPath:"",op:sK(this.element,a[t].o,0,.01,this.element),prop:iP(this.element,a[t],3)},i?.appendChild(s);continue}if(n+=1,s.setAttribute("fill","s"===a[t].mode?"#000000":"#ffffff"),s.setAttribute("clip-rule","nonzero"),a[t].x?.k===0)m=null,p=null;else{d="mask",c="mask",p=sK(this.element,a[t].x,0,null,this.element),e=el();let r=ef("filter");r.setAttribute("id",e),(m=ef("feMorphology")).setAttribute("operator","erode"),m.setAttribute("in","SourceGraphic"),m.setAttribute("radius","0"),r.appendChild(m),i?.appendChild(r),s.setAttribute("stroke","s"===a[t].mode?"#000000":"#ffffff")}if(this.storedData[t]={elem:s,expan:m,filterId:e,lastOperator:"",lastPath:"",lastRadius:0,x:p},"i"===a[t].mode){let{length:t}=h,e=ef("g");for(let s=0;s<t;s++)e.appendChild(h[s]);let r=ef("mask");r.setAttribute("mask-type","alpha"),r.id=`${o}_${n}`,r.appendChild(s),i?.appendChild(r),e.setAttribute("mask",`url(${en()}#${o}_${n})`),h.length=0,h.push(e)}else h.push(s);a[t].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[t]={elem:s,invRect:l,lastPath:"",op:sK(this.element,a[t].o,0,.01,this.element),prop:iP(this.element,a[t],3)},this.viewData[t].prop?.k||this.drawPath(a[t],this.viewData[t].prop.v,this.viewData[t])}this.maskElement=ef(d);let{length:u}=h;for(let t=0;t<u;t++)this.maskElement.appendChild(h[t]);n>0&&(this.maskElement.setAttribute("id",o),this.element.maskedElement?.setAttribute(c,`url(${en()}#${o})`),i?.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}createLayerSolidPath(){let t="M0,0 ";return t+` h${this.globalData?.compSize?.w||0} v${this.globalData?.compSize?.h||0} h-${this.globalData?.compSize?.w||0} v-${this.globalData?.compSize?.h||0} `}destroy(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null}drawPath(t,e,s){let i,r=` M${e.v[0]?.[0]},${e.v[0]?.[1]}`,a=e._length||0;for(i=1;i<a;i++)r+=` C${e.o[i-1]?.[0]},${e.o[i-1]?.[1]} ${e.i[i]?.[0]},${e.i[i]?.[1]} ${e.v[i]?.[0]},${e.v[i]?.[1]}`;if(e.c&&a>1&&(r+=` C${e.o[i-1]?.[0]},${e.o[i-1]?.[1]} ${e.i[0]?.[0]},${e.i[0]?.[1]} ${e.v[0]?.[0]},${e.v[0]?.[1]}`),s.lastPath!==r){let i="";s.elem&&(e.c&&(i=t?.inv?this.solidPath+r:r),s.elem.setAttribute("d",i)),s.lastPath=r}}getMaskelement(){return this.maskElement}getMaskProperty(t){return this.viewData[t].prop}renderFrame(t){let e=this.element.finalTransform?.mat,{length:s}=this.masksProperties||[];for(let i=0;i<s;i++){if((this.viewData[i].prop?._mdf||t)&&this.drawPath(this.masksProperties[i]||null,this.viewData[i].prop.v,this.viewData[i]),(this.viewData[i].op._mdf||t)&&this.viewData[i].elem.setAttribute("fill-opacity",`${this.viewData[i].op.v}`),this.masksProperties?.[i].mode==="n"||(this.viewData[i].invRect&&(this.element.finalTransform?.mProp._mdf||t)&&this.viewData[i].invRect?.setAttribute("transform",`${e?.getInverseMatrix().to2dCSS()}`),!this.storedData[i]||!this.storedData[i].x||!(this.storedData[i].x?._mdf||t)))continue;let s=this.storedData[i].expan;if(0>Number(this.storedData[i].x?.v)){"erode"!==this.storedData[i].lastOperator&&(this.storedData[i].lastOperator="erode",this.storedData[i].elem.setAttribute("filter",`url(${en()}#${this.storedData[i].filterId})`)),s?.setAttribute("radius",`${-Number(this.storedData[i].x?.v)}`);continue}"dilate"!==this.storedData[i].lastOperator&&(this.storedData[i].lastOperator="dilate",this.storedData[i].elem.removeAttribute("filter")),this.storedData[i].elem.setAttribute("stroke-width",`${2*Number(this.storedData[i].x?.v)}`)}}}function iV(){let t=ef("feColorMatrix");if(!t)throw Error("Could not create SVGFEColorMatrixElement Element");return t.setAttribute("type","matrix"),t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),t}function iz(t,e){let s=ef("filter");if(!s)throw Error(`Could not create ${t} filter element`);return s.id=t,e||(s.setAttribute("filterUnits","objectBoundingBox"),s.setAttribute("x","0%"),s.setAttribute("y","0%"),s.setAttribute("width","100%"),s.setAttribute("height","100%")),s}class iO{constructor(){if(this.maskType=!0,this.offscreenCanvas="undefined"!=typeof OffscreenCanvas,this.svgLumaHidden=!0,!ex())return;this.maskType=!/MSIE 10/i.test(navigator.userAgent)&&!/MSIE 9/i.test(navigator.userAgent)&&!/rv:11.0/i.test(navigator.userAgent)&&!/Edge\/\d./i.test(navigator.userAgent),this.svgLumaHidden=!/firefox/i.test(navigator.userAgent)}}let iR="filter_result_";class iB{constructor(t){let e,s="SourceGraphic",i=el(),r=iz(i,!0),a=0;this.filters=[];let{length:n}=t.data.ef||[];for(let i=0;i<n;i++)e=null,t.data.ef[i].ty&&eh[t.data.ef[i].ty]&&(e=new eh[t.data.ef[i].ty].effect(r,t.effectsManager?.effectElements[i],t,iR+a,s),s=iR+a,eh[t.data.ef[i].ty].countsAsEffect&&(a+=1)),e&&this.filters.push(e);a&&(t.globalData.defs.appendChild(r),t.layerElement?.setAttribute("filter",`url(${en()}#${i})`)),this.filters.length&&t.addRenderableComponent(this)}getEffects(t){let{length:e}=this.filters,s=[];for(let i=0;i<e;i++)this.filters[i].type===t&&s.push(this.filters[i]);return s}renderFrame(t){let{length:e}=this.filters;for(let s=0;s<e;s++)this.filters[s].renderFrame(t)}}class iq extends i_{createContainerElements(){if(!this.data)throw Error(`${this.constructor.name}: data (LottieLayer) is not implemented`);if(!this.globalData)throw Error(`${this.constructor.name}: globalData is not implemented`);if(!this.layerElement)throw Error(`${this.constructor.name}: layerElement is not implemented`);this.matteElement=ef("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;let t=null;if(this.data.td){this.matteMasks={};let e=ef("g");this.layerId&&e.setAttribute("id",this.layerId),e.appendChild(this.layerElement),t=e,this.globalData.defs.appendChild(e)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),t=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement?.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement?.setAttribute("class",this.data.cl),0===this.data.ty&&!this.data.hd){let e=ef("clipPath"),s=ef("path");s.setAttribute("d",`M0,0 L${this.data.w},0 L${this.data.w},${this.data.h} L0,${this.data.h}z`);let i=el();if(e.setAttribute("id",i),e.appendChild(s),this.globalData.defs.appendChild(e),this.checkMasks()){let e=ef("g");e.setAttribute("clip-path",`url(${en()}#${i})`),this.layerElement&&e.appendChild(this.layerElement),this.transformedElement=e,t?t.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path",`url(${en()}#${i})`)}0!==this.data.bm&&this.setBlendMode()}createRenderableComponents(){if(!this.data)throw Error(`${this.constructor.name}: layerData is not initialized`);if(!this.globalData)throw Error(`${this.constructor.name}: globalData is not initialized`);this.maskManager=new i$(this.data,this,this.globalData),this.renderableEffectsManager=new iB(this),this.searchEffectTransforms()}destroyBaseElement(){this.layerElement=null,this.matteElement=null,this.maskManager?.destroy()}getBaseElement(){return this.data?.hd?null:this.baseElement||null}getMatte(t=1){let e,s,i,r;if(this.matteMasks||(this.matteMasks={}),this.matteMasks[t])return this.matteMasks[t];let a=new iO,n=`${this.layerId}_${t}`;switch(t){case 1:case 3:{let h=ef("mask");if(h?.setAttribute("id",n),h?.setAttribute("mask-type",3===t?"luminance":"alpha"),i=ef("use"),i?.setAttributeNS("http://www.w3.org/1999/xlink","href",`#${this.layerId}`),h.appendChild(i),this.globalData?.defs.appendChild(h),a.maskType||1!==t)break;h.setAttribute("mask-type","luminance"),s=iz(e=el()),this.globalData?.defs.appendChild(s),s.appendChild(iV()),r=ef("g"),r?.appendChild(i),h.appendChild(r),r?.setAttribute("filter",`url(${en()}#${e})`)}break;case 2:{let t=ef("mask");t.setAttribute("id",n),t.setAttribute("mask-type","alpha");let h=ef("g");t.appendChild(h),s=iz(e=el());let o=ef("feComponentTransfer");o.setAttribute("in","SourceGraphic"),s.appendChild(o);let l=ef("feFuncA");l.setAttribute("type","table"),l.setAttribute("tableValues","1.0 0.0"),o.appendChild(l),this.globalData?.defs.appendChild(s);let m=ef("rect");if(!m)throw Error(`${this.constructor.name}: Could not create RECT element`);m.setAttribute("width",`${Number(this.comp?.data?.w)}`),m.setAttribute("height",`${Number(this.comp?.data?.h)}`),m.setAttribute("x","0"),m.setAttribute("y","0"),m.setAttribute("fill","#ffffff"),m.setAttribute("opacity","0"),h.setAttribute("filter",`url(${en()}#${e})`),h.appendChild(m),(i=ef("use")).setAttributeNS("http://www.w3.org/1999/xlink","href",`#${this.layerId}`),h.appendChild(i),a.maskType||(t.setAttribute("mask-type","luminance"),s.appendChild(iV()),r=ef("g"),h.appendChild(m),this.layerElement&&r.appendChild(this.layerElement),h.appendChild(r)),this.globalData?.defs.appendChild(t)}}return this.matteMasks[t]=n,this.matteMasks[t]}initRendererElement(){this.layerElement=ef("g")}renderElement(){if(!this.finalTransform)throw Error(`${this.constructor.name}: finalTransform is not implemented`);this.finalTransform._localMatMdf&&this.transformedElement?.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement?.setAttribute("opacity",`${this.finalTransform.localOpacity}`)}setMatte(t){this.matteElement&&this.matteElement.setAttribute("mask",`url(${en()}#${t})`)}}class ij extends iq{constructor(t,e,s){super(),this.layers=[],t.refId&&e.getAssetData&&(this.assetData=e.getAssetData(t.refId)),this.assetData&&this.assetData.sid&&(this.assetData=e.slotManager?.getProp(this.assetData)||null);let{renderInnerContent:i}=new iw;this.renderInnerContent=i,this.initElement(t,e,s),this.sourceRect={height:Number(this.assetData?.h),left:0,top:0,width:Number(this.assetData?.w)}}createContent(){let t="";this.assetData&&this.globalData?.getAssetsPath&&(t=this.globalData.getAssetsPath(this.assetData)),this.assetData&&(this.innerElem=ef("image"),this.innerElem.setAttribute("width",`${this.assetData.w}px`),this.innerElem.setAttribute("height",`${this.assetData.h}px`),this.innerElem.setAttribute("preserveAspectRatio",this.assetData?.pr||this.globalData?.renderConfig?.imagePreserveAspectRatio||""),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.layerElement?.appendChild(this.innerElem))}sourceRectAtTime(){return this.sourceRect}}class iH extends ir{constructor(t,e,s){super(),this.initFrame(),this.initBaseData(t,e,s),this.initTransform(),this.initHierarchy()}getBaseElement(){return null}prepareFrame(t){this.prepareProperties(t,!0)}renderFrame(t){return null}}class iG extends ij{constructor(t,e,s){super(t,e,s),this.initElement(t,e,s)}createContent(){let t=ef("rect");t.width.baseVal.value=Number(this.data?.sw),t.height.baseVal.value=Number(this.data?.sh),this.data?.sc&&t.setAttribute("fill",`${this.data.sc}`),this.layerElement?.appendChild(t)}}class iW extends sH{constructor(t,e,s,i){let r;super(),this.elem=t,this.frameId=-1,this.dataProps=sx(e.length),this.renderer=s,this.k=!1,this.dashStr="",this.dashArray=sM(tj.Float32,e.length?e.length-1:0),this.dashoffset=sM(tj.Float32,1),this.initDynamicPropertyContainer(i);let a=e.length||0;for(let s=0;s<a;s++)r=sK(t,e[s].v,0,0,this),this.k=r?.k||this.k,this.dataProps[s]={n:e[s].n,p:r};this.k||this.getValue(!0),this._isAnimated=this.k}getValue(t){if(this.elem.globalData.frameId===this.frameId&&!t||(this.elem.globalData.frameId&&(this.frameId=this.elem.globalData.frameId),this.iterateDynamicProperties(),this._mdf=this._mdf||!!t,!this._mdf))return;let e=this.dataProps.length;this.renderer===tq.SVG&&(this.dashStr="");for(let t=0;t<e;t++){if("o"===this.dataProps[t].n){this.dashoffset[0]=this.dataProps[t].p.v;continue}if(this.renderer===tq.SVG){this.dashStr+=` ${this.dataProps[t].p.v}`;continue}this.dashArray[t]=this.dataProps[t].p.v}}}class iY extends sH{constructor(t,e,s){super(),this.data=e,this.c=sM(tj.Uint8c,4*e.p);let i=e.k.k[0].s?e.k.k[0].s.length-4*e.p:e.k.k.length-4*e.p;this.o=sM(tj.Float32,i),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=i,this.initDynamicPropertyContainer(s),this.prop=sK(t,e.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}checkCollapsable(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s){let t=0,e=this.data.k.k.length;for(;t<e;){if(!this.comparePoints(this.data.k.k[t].s,this.data.p))return!1;t++}}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0}comparePoints(t,e){let s=0,i=this.o.length/2;for(;s<i;){if(Math.abs(t[4*s]-t[4*e+2*s])>.01)return!1;s++}return!0}getValue(t){let e,s;if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,!this.prop._mdf&&!t||!eD(this.prop.v))return;let i=4*this.data.p;for(let r=0;r<i;r++)e=r%4==0?100:255,s=Math.round(this.prop.v[r]*e),this.c[r]!==s&&(this.c[r]=s,this._cmdf=!t);if(this.o.length){let{length:i}=this.prop.v;for(let r=4*this.data.p;r<i;r++)e=r%2==0?100:1,s=r%2==0?Math.round(100*this.prop.v[r]):this.prop.v[r],this.o[r-4*this.data.p]!==s&&(this.o[r-4*this.data.p]=s,this._omdf=!t)}this._mdf=!t}}class iU{constructor(){this.it=[],this.prevViewData=[],this.gr=ef("g")}}class iX{constructor(t,e,s){this.it=[],this.pathsData=[],this.prevViewData=[],this.caches=[],this.styles=[],this.transformers=t,this.lStr="",this.sh=s,this.lvl=e,this._isAnimated=!!s?.k;let i=0,{length:r}=t;for(;i<r;){if(t[i].mProps.dynamicProperties?.length){this._isAnimated=!0;break}i++}}setAsAnimated(){this._isAnimated=!0}}class iJ{constructor(t,e,s){this.transform={container:s,mProps:t,op:e},this.elements=[],this._isAnimated=!!(this.transform.mProps.dynamicProperties?.length||this.transform.op.effectsSequence.length)}}class iK{constructor(t,e){this.data=t,this.type=t.ty,this.d="",this.lvl=e,this._mdf=!1,this.closed=!0===t.hd,this.pElem=ef("path"),this.msElem=null}reset(){this.d="",this._mdf=!1}}class iZ{constructor(t,e){this.elem=t,this.pos=e}}class iQ extends sH{constructor(t,e,s){super(),this.cst=[],this.it=[],this.ost=[],this.prevViewData=[],this.stops=[],this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.initGradientData(t,e,s)}initGradientData(t,e,s){this.o=sK(t,e.o,0,.01,this),this.s=sK(t,e.s,1,null,this),this.e=sK(t,e.e,1,null,this),this.h=sK(t,e.h||{k:0},0,.01,this),this.a=sK(t,e.a||{k:0},0,ev,this),this.g=new iY(t,e.g,this),this.style=s,this.stops=[],this.setGradientData(s.pElem,e),this.setGradientOpacity(e,s),this._isAnimated=!!this._isAnimated}setGradientData(t,e){let s,i=el(),r=ef(1===e.t?"linearGradient":"radialGradient");r.setAttribute("id",i),r.setAttribute("spreadMethod","pad"),r.setAttribute("gradientUnits","userSpaceOnUse");let a=[],n=4*(e.g?.p||1);for(let t=0;t<n;t+=4)s=ef("stop"),r.appendChild(s),a.push(s);t.setAttribute("gf"===e.ty?"fill":"stroke",`url(${en()}#${i})`),this.gf=r,this.cst=a}setGradientOpacity(t,e){if(this.g?._hasOpacity&&!this.g._collapsable){let s,i=ef("mask"),r=ef("path");if(!r||!i)throw Error(`${this.constructor.name}: Could not create svg element`);i.appendChild(r);let a=el(),n=el();i.setAttribute("id",n);let h=ef(1===t.t?"linearGradient":"radialGradient");h.setAttribute("id",a),h.setAttribute("spreadMethod","pad"),h.setAttribute("gradientUnits","userSpaceOnUse");let o=((t.g?.k.k)[0].s?(t.g?.k.k)[0].s.length:t.g?.k.k.length)||0,l=this.stops||[];for(let e=4*(t.g?.p||1);e<o;e+=2)(s=ef("stop"))&&(s.setAttribute("stop-color","rgb(255,255,255)"),h.appendChild(s),l.push(s));r.setAttribute("gf"===t.ty?"fill":"stroke",`url(${en()}#${a})`),"gs"===t.ty&&(r.setAttribute("stroke-linecap",tH[t.lc||2]),r.setAttribute("stroke-linejoin",tG[t.lj||2]),1===t.lj&&r.setAttribute("stroke-miterlimit",`${Number(t.ml)}`)),this.of=h,this.ms=i,this.ost=l,this.maskId=n,e.msElem=r}}}class i0 extends iQ{constructor(t,e,s){super(t,e,s),this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.w=sK(t,e.w,0,null,this),this.d=new iW(t,e.d||[],tq.SVG,this),this.initGradientData(t,e,s),this._isAnimated=!!this._isAnimated}}class i1 extends sH{constructor(t,e,s){super(),this.it=[],this.prevViewData=[],this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=sK(t,e.o,0,.01,this),this.c=sK(t,e.c,1,255,this),this.style=s}}class i2 extends i1{constructor(t,e,s){super(t,e,s),this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=sK(t,e.o,0,.01,this),this.w=sK(t,e.w,0,null,this),this.d=new iW(t,e.d||[],tq.SVG,this),this.c=sK(t,e.c,1,255,this),this.style=s,this._isAnimated=!!this._isAnimated}}class i3 extends sH{constructor(t,e,s){super(),this.it=[],this.prevViewData=[],this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.style=s}}class i5 extends i_{addProcessedElement(t,e){let s=this.processedElements,i=s.length;for(;i;)if(s[--i].elem===t){s[i].pos=e;return}s.push(new iZ(t,e))}addShapeToModifiers(t){let{length:e}=this.shapeModifiers;for(let s=0;s<e;s++)this.shapeModifiers[s].addShape(t)}isShapeInAnimatedModifiers(t){let e=0,{length:s}=this.shapeModifiers;for(;e<s;){if(this.shapeModifiers[e].isAnimatedWithShape(t))return!0;e++}return!1}prepareFrame(t){this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange)}renderModifiers(){if(!this.shapeModifiers.length)return;let{length:t}=this.shapes;for(let e=0;e<t;e++)this.shapes[e].sh.reset();let{length:e}=this.shapeModifiers;for(let t=e-1;t>=0&&!this.shapeModifiers[t].processShapes(!!this._isFirstFrame);t--);}searchProcessedElement(t){let e=this.processedElements,s=0,{length:i}=e;for(;s<i;){if(e[s].elem===t)return e[s].pos;s++}return 0}constructor(...t){super(...t),this.processedElements=[],this.shapeModifiers=[],this.shapes=[]}}let i4=new s7,i6=new s7;function i8(t,e,s){if(!e)throw Error("SVGElementsRenderer: Method renderContetTransform is missing data");(s||e.transform.op._mdf)&&e.transform.container.setAttribute("opacity",`${e.transform.op.v??1}`),(s||e.transform.mProps._mdf)&&e.transform.container.setAttribute("transform",e.transform.mProps.v.to2dCSS())}function i9(t,e,s){if(!e)throw Error("SVGElementsRenderer: Method renderFill is missing data");let i=e.style;e.c?.v&&(e.c._mdf||s)&&i.pElem.setAttribute("fill",`rgb(${Math.floor(e.c.v[0])},${Math.floor(e.c.v[1])},${e.c.v[2]})`),(e.o?._mdf||s)&&i.pElem.setAttribute("fill-opacity",`${e.o?.v}`)}function i7(t,e,s){let i,r;if(!e)throw Error("SVGElementsRenderer: Method renderGradient is missing data");let a=e.gf,n=e.g?._hasOpacity,h=e.s?.v||[0,0],o=e.e?.v||[0,0];if(e.o?._mdf||s){let s="gf"===t.ty?"fill-opacity":"stroke-opacity";e.style?.pElem.setAttribute(s,`${e.o?.v}`)}if(e.s?._mdf||s){let s=1===t.t?"x1":"cx",i="x1"===s?"y1":"cy";a?.setAttribute(s,`${h[0]}`),a?.setAttribute(i,`${h[1]}`),n&&!e.g?._collapsable&&(e.of?.setAttribute(s,`${h[0]}`),e.of?.setAttribute(i,`${h[1]}`))}if(e.g&&(e.g._cmdf||s)){i=e.cst||[];let t=e.g.c,{length:s}=i;for(let e=0;e<s;e+=1)(r=i[e]).setAttribute("offset",`${t[4*e]}%`),r.setAttribute("stop-color",`rgb(${t[4*e+1]},${t[4*e+2]},${t[4*e+3]})`)}if(n&&e.g&&(e.g._omdf||s)){let t=e.g.o,{length:s}=i=e.g._collapsable?e.cst||[]:e.ost||[];for(let a=0;a<s;a+=1)r=i[a],e.g._collapsable||r.setAttribute("offset",`${t[2*a]}%`),r.setAttribute("stop-opacity",`${t[2*a+1]}`)}if(1===t.t)(e.e?._mdf||s)&&(a?.setAttribute("x2",`${o[0]}`),a?.setAttribute("y2",`${o[1]}`),n&&!e.g?._collapsable&&(e.of?.setAttribute("x2",`${o[0]}`),e.of?.setAttribute("y2",`${o[1]}`)));else{let t=0;if((e.s?._mdf||e.e?._mdf||s)&&(t=Math.sqrt(Math.pow(h[0]-o[0],2)+Math.pow(h[1]-o[1],2)),a?.setAttribute("r",`${t}`),n&&!e.g?._collapsable&&e.of?.setAttribute("r",`${t}`)),e.e?._mdf||e.h?._mdf||e.a?._mdf||s){t||(t=Math.sqrt(Math.pow(h[0]-o[0],2)+Math.pow(h[1]-o[1],2)));let s=Math.atan2(o[1]-h[1],o[0]-h[0]),i=Number(e.h?.v);i>=1?i=.99:i<=-1&&(i=-.99);let r=t*i,l=Math.cos(s+Number(e.a?.v))*r+h[0],m=Math.sin(s+Number(e.a?.v))*r+h[1];a?.setAttribute("fx",`${l}`),a?.setAttribute("fy",`${m}`),n&&!e.g?._collapsable&&(e.of?.setAttribute("fx",`${l}`),e.of?.setAttribute("fy",`${m}`))}}}function rt(t,e,s){i7(t,e,s),ri(t,e,s)}function re(t){}function rs(t,e,s){let i,r,a,n,h,o,l;if(!e)throw Error("SVGElementsRenderer: Method renderPath is missing data");let{length:m}=e.styles,p=e.lvl;for(let d=0;d<m;d++){if(r=e.sh?._mdf||!!s,e.styles[d].lvl<p){for(h=i6.reset(),o=p-e.styles[d].lvl,l=e.transformers.length-1;!r&&o>0;)r=e.transformers[l].mProps._mdf||r,o--,l--;if(r)for(o=p-e.styles[d].lvl,l=e.transformers.length-1;o>0;)h.multiply(e?.transformers[l].mProps.v),o--,l--}else h=i4;n=e.sh.paths;let m=n?._length||0;if(r){i="";for(let t=0;t<m;t++)(a=n?.shapes?.[t])&&a._length&&(i+=eu(a,a._length,!!a.c,h));e.caches[d]=i}else i=e.caches[d];e.styles[d].d+=!0===t.hd?"":i,e.styles[d]._mdf=r||e.styles[d]._mdf}}function ri(t,e,s){if(!e)throw Error("SVGElementsRenderer: Method renderStroke is missing data");let i=e.style,r=e.d;r&&(r._mdf||s)&&r.dashStr&&(i?.pElem.setAttribute("stroke-dasharray",r.dashStr),i?.pElem.setAttribute("stroke-dashoffset",`${r.dashoffset[0]}`)),e.c&&(e.c._mdf||s)&&i?.pElem.setAttribute("stroke",`rgb(${Math.floor(e.c.v[0])},${Math.floor(e.c.v[1])},${e.c.v[2]})`),e.o&&(e.o?._mdf||s)&&i?.pElem.setAttribute("stroke-opacity",`${e.o.v}`),e.w&&(e.w?._mdf||s)&&(i?.pElem.setAttribute("stroke-width",`${e.w.v}`),i?.msElem?.setAttribute("stroke-width",`${e.w.v}`))}function rr(t,e){ra[t]||(ra[t]=e)}let ra={};class rn extends i5{constructor(t,e,s){super(),this.shapes=[],this.shapesData=t.shapes||[],this.stylesList=[],this.shapes=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[];let{createContainerElements:i,createRenderableComponents:r,destroyBaseElement:a,getBaseElement:n,getMatte:h,initRendererElement:o,renderElement:l,setMatte:m}=new iq;this.createContainerElements=i,this.createRenderableComponents=r,this.destroyBaseElement=a,this.getBaseElement=n,this.initRendererElement=o,this.renderElement=l,this.getMatte=h,this.setMatte=m,this.initElement(t,e,s),this.prevViewData=[]}addToAnimatedContents(t,e){let s=0,i=this.animatedContents.length;for(;s<i;){if(this.animatedContents[s].element===e)return;s++}this.animatedContents.push({data:t,element:e,fn:function(t){switch(t.ty){case tB.Fill:return i9;case tB.GradientFill:return i7;case tB.GradientStroke:return rt;case tB.Stroke:return ri;case tB.Path:case tB.Ellipse:case tB.Rectangle:case tB.PolygonStar:return rs;case tB.Transform:return i8;case tB.NoStyle:return re;default:return null}}(t)})}buildExpressionInterface(){throw Error(`${this.constructor.name}: Method buildExpressionInterface not implemented`)}createContent(){if(!this.layerElement)throw Error(`${this.constructor.name}: Could not access Layer`);if(!this.shapesData)throw Error(`${this.constructor.name}: Could not access ShapesData`);this.searchShapes(this.shapesData,this.itemsData,this.prevViewData||[],this.layerElement,0,[],!0),this.filterUniqueShapes()}createGroupElement(t){let e=new iU;return t.ln&&e.gr.setAttribute("id",t.ln),t.cl&&e.gr.setAttribute("class",t.cl),t.bm&&(e.gr.style.mixBlendMode=eS(t.bm)),e}createShapeElement(t,e,s){let i=4;switch(t.ty){case"rc":i=5;break;case"el":i=6;break;case"sr":i=7}let r=new iX(e,s,iP(this,t,i));return this.shapes.push(r),this.addShapeToModifiers(r),this.addToAnimatedContents(t,r),r}createStyleElement(t,e){let s=null,i=new iK(t,e),r=i.pElem;switch(t.ty){case"st":s=new i2(this,t,i);break;case"fl":s=new i1(this,t,i);break;case"gf":case"gs":(s=new("gf"===t.ty?iQ:i0)(this,t,i)).gf&&this.globalData?.defs.appendChild(s.gf),s.maskId&&s.ms&&s.of&&(this.globalData?.defs.appendChild(s.ms),this.globalData?.defs.appendChild(s.of),r.setAttribute("mask",`url(${en()}#${s.maskId})`));break;case"no":s=new i3(this,t,i)}return("st"===t.ty||"gs"===t.ty)&&(r.setAttribute("stroke-linecap",tH[t.lc||2]),r.setAttribute("stroke-linejoin",tG[t.lj||2]),r.setAttribute("fill-opacity","0"),1===t.lj&&t.ml&&r.setAttribute("stroke-miterlimit",`${t.ml}`)),2===t.r&&r.setAttribute("fill-rule","evenodd"),t.ln&&r.setAttribute("id",t.ln),t.cl&&r.setAttribute("class",t.cl),t.bm&&(r.style.mixBlendMode=eS(t.bm)),this.stylesList.push(i),s&&this.addToAnimatedContents(t,s),s}createTransformElement(t,e){let s=new it(this,t,this);if(!s.o)throw Error(`${this.constructor.name}: Missing required data in TransformProperty`);let i=new iJ(s,s.o,e);return this.addToAnimatedContents(t,i),i}destroy(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null}filterUniqueShapes(){let{length:t}=this.shapes,e=this.stylesList.length,s=[],i,r=!1;for(let a=0;a<e;a++){i=this.stylesList[a],r=!1,s.length=0;for(let e=0;e<t;e++)-1!==this.shapes[e].styles.indexOf(i)&&(s.push(this.shapes[e]),r=this.shapes[e]._isAnimated||r);s.length>1&&r&&this.setShapesAsAnimated(s)}}getBaseElement(){throw Error(`${this.constructor.name}: Method getBaseElement is not implemented`)}getMatte(t){throw Error(`${this.constructor.name}: Method getMatte not yet implemented`)}initSecondaryElement(){throw Error(`${this.constructor.name}: Method initSecondaryElement not yet implemented`)}reloadShapes(){if(!this.layerElement)throw Error(`${this.constructor.name}: Could not access layerElement`);if(!this.shapesData)throw Error(`${this.constructor.name}: Could not access shapesData`);this._isFirstFrame=!0;let{length:t}=this.itemsData||[];for(let e=0;e<t;e++)this.prevViewData[e]=this.itemsData[e];this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes();let{length:e}=this.dynamicProperties||[];for(let t=0;t<e;t++)this.dynamicProperties?.[t].getValue();this.renderModifiers()}renderInnerContent(){this.renderModifiers();let{length:t}=this.stylesList;for(let e=0;e<t;e++)this.stylesList[e].reset();this.renderShape();for(let e=0;e<t;e++)(this.stylesList[e]._mdf||this._isFirstFrame)&&(this.stylesList[e].msElem&&(this.stylesList[e].msElem?.setAttribute("d",this.stylesList[e].d),this.stylesList[e].d=`M0 0${this.stylesList[e].d}`),this.stylesList[e].pElem.setAttribute("d",this.stylesList[e].d||"M0 0"))}renderShape(){let{length:t}=this.animatedContents;for(let e=0;e<t;e++)(this._isFirstFrame||this.animatedContents[e].element._isAnimated)&&!0!==this.animatedContents[e].data&&this.animatedContents[e].fn&&this.animatedContents[e].fn(this.animatedContents[e].data,this.animatedContents[e].element,this._isFirstFrame)}searchShapes(t,e,s,i,r,a,n){let h,o,l=n,m=[...a],p=[],d=[],{length:c}=t;for(let a=c-1;a>=0;a--){let n=this.searchProcessedElement(t[a]);switch(n?e[a]=s[n-1]:t[a]._render=l,t[a].ty){case"fl":case"st":case"gf":case"gs":case"no":n?e[a].style.closed=!1:e[a]=this.createStyleElement(t[a],r),t[a]._render&&e[a]?.style?.pElem.parentNode!==i&&i.appendChild(e[a].style.pElem),p.push(e[a]?.style);break;case"gr":if(n){let{length:t}=e[a]?.it||[];for(let s=0;s<t;s++)e[a].prevViewData[s]=e[a].it[s]}else e[a]=this.createGroupElement(t[a]);this.searchShapes(t[a].it,e[a]?.it||[],e[a]?.prevViewData||[],e[a].gr,r+1,m,l),t[a]._render&&e[a]?.gr?.parentNode!==i&&i.appendChild(e[a].gr);break;case"tr":n||(e[a]=this.createTransformElement(t[a],i)),(h=e[a]?.transform)&&m.push(h);break;case"sh":case"rc":case"el":case"sr":n||(e[a]=this.createShapeElement(t[a],m,r)),this.setElementStyles(e[a]);break;case"tm":case"rd":case"ms":case"pb":case"zz":case"op":n?(o=e[a]).closed=!1:((o=new ra[t[a].ty]).init(this,t[a]),e[a]=o,this.shapeModifiers.push(o)),d.push(o);break;case"rp":if(n){(o=e[a]).closed=!0,d.push(o);break}o=new ra[t[a].ty],e[a]=o,o.init(this,t,a,e),this.shapeModifiers.push(o),l=!1,d.push(o)}this.addProcessedElement(t[a],a+1)}let{length:u}=p;for(let t=0;t<u;t++)p[t].closed=!0;let{length:f}=d;for(let t=0;t<f;t++)d[t].closed=!0}setElementStyles(t){let{length:e}=this.stylesList;for(let s=0;s<e;s++)this.stylesList[s].closed||t.styles.push(this.stylesList[s])}setMatte(t){throw Error(`${this.constructor.name}: Method setMatte not yet implemented`)}setShapesAsAnimated(t){let{length:e}=t;for(let s=0;s<e;s++)t[s].setAsAnimated()}}class rh{constructor(t,e,s,i,r,a){this.o=t,this.sw=e,this.sc=s,this.fc=i,this.m=r,this.p=a,this._mdf={fc:!!i,m:!0,o:!0,p:!0,sc:!!s,sw:!!e}}update(t,e,s,i,r,a){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;let n=!1;return this.o!==t&&(this.o=t,this._mdf.o=!0,n=!0),this.sw!==e&&(this.sw=e,this._mdf.sw=!0,n=!0),this.sc!==s&&(this.sc=s,this._mdf.sc=!0,n=!0),this.fc!==i&&(this.fc=i,this._mdf.fc=!0,n=!0),this.m!==r&&(this.m=r,this._mdf.m=!0,n=!0),Array.isArray(a)&&a.length&&(this.p[0]!==a[0]||this.p[1]!==a[1]||this.p[4]!==a[4]||this.p[5]!==a[5]||this.p[12]!==a[12]||this.p[13]!==a[13])&&(this.p=a,this._mdf.p=!0,n=!0),n}}class ro extends sH{constructor(t,e){super(),this._currentTextLength=-1,this.k=!1,this.data=e,this.elem=t,this.comp=t.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(t),this.s=sK(t,e.s||{k:0},0,0,this),"e"in e?this.e=sK(t,e.e,0,0,this):this.e={v:100},this.o=sK(t,e.o||{k:0},0,0,this),this.xe=sK(t,e.xe||{k:0},0,0,this),this.ne=sK(t,e.ne||{k:0},0,0,this),this.sm=sK(t,e.sm||{k:100},0,0,this),this.a=sK(t,e.a,0,.01,this),this.dynamicProperties?.length||this.getValue()}getMult(t,e){let s=t;this._currentTextLength!==this.elem.textProperty?.currentData.l?.length&&this.getValue();let i=0,r=0,a=1,n=1;this.ne.v>0?i=this.ne.v/100:r=-this.ne.v/100,this.xe.v>0?a=1-this.xe.v/100:n=1+this.xe.v/100;let h=sq(i,r,a,n).get,o=0,l=this.finalS,m=this.finalE;switch(this.data.sh){case 2:o=h(o=m===l?+(s>=m):Math.max(0,Math.min(.5/(m-l)+(s-l)/(m-l),1)));break;case 3:o=h(o=m===l?s>=m?0:1:1-Math.max(0,Math.min(.5/(m-l)+(s-l)/(m-l),1)));break;case 4:m===l?o=0:(o=Math.max(0,Math.min(.5/(m-l)+(s-l)/(m-l),1)))<.5?o*=2:o=1-2*(o-.5),o=h(o);break;case 5:if(m===l)o=0;else{let t=m-l,e=-t/2+(s=Math.min(Math.max(0,s+.5-l),m-l)),i=t/2;o=Math.sqrt(1-e*e/(i*i))}o=h(o);break;case 6:o=h(o=m===l?0:(1+Math.cos(Math.PI+2*Math.PI*(s=Math.min(Math.max(0,s+.5-l),m-l))/(m-l)))/2);break;default:s>=Math.floor(l)&&(o=s-l<0?Math.max(0,Math.min(Math.min(m,1)-(l-s),1)):Math.max(0,Math.min(m-s,1))),o=h(o)}if(100!==this.sm.v){let t=.01*this.sm.v;0===t&&(t=1e-8);let e=.5-.5*t;o<e?o=0:(o=(o-e)/t)>1&&(o=1)}return o*Number(this.a.v)}getValue(t){this.iterateDynamicProperties(),this._mdf=t||this._mdf,this._currentTextLength=this.elem.textProperty?.currentData.l?.length||0,t&&2===this.data.r&&this.e?.v&&(this.e.v=this._currentTextLength);let e=2===this.data.r?1:100/this.data.totalChars,s=Number(this.o?.v)/e,i=Number(this.s?.v)/e+s,r=Number(this.e?.v)/e+s;if(i>r){let t=i;i=r,r=t}this.finalS=i,this.finalE=r}}class rl{constructor(t,e,s){let i={propType:!1},r=e?.a;this.a={a:r?.a?sK(t,r.a,1,0,s):i,fb:r?.fb?sK(t,r.fb,0,.01,s):i,fc:r?.fc?sK(t,r.fc,1,0,s):i,fh:r?.fh?sK(t,r.fh,0,0,s):i,fs:r?.fs?sK(t,r.fs,0,.01,s):i,o:r?.o?sK(t,r.o,0,.01,s):i,p:r?.p?sK(t,r.p,1,0,s):i,r:r?.r?sK(t,r.r,0,ev,s):i,rx:r?.rx?sK(t,r.rx,0,ev,s):i,ry:r?.ry?sK(t,r.ry,0,ev,s):i,s:r?.s?sK(t,r.s,1,.01,s):i,sa:r?.sa?sK(t,r.sa,0,ev,s):i,sc:r?.sc?sK(t,r.sc,1,0,s):i,sk:r?.sk?sK(t,r.sk,0,ev,s):i,sw:r?.sw?sK(t,r.sw,0,0,s):i,t:r?.t?sK(t,r.t,0,0,s):i},this.s=new ro(t,e?.s),this.s.t=e?.s?.t}}class rm extends sH{constructor(t,e,s){super(),this.defaultPropsArray=[],this.mHelper=new s7,this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=t,this._renderType=e,this._elem=s,this._animatorsData=sx(Number(this._textData.a?.length)),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(s)}getMeasures(t,e){let s,i,r,a;if(this.lettersChangedFlag=!!e,!this._mdf&&!this._isFirstFrame&&!e&&(!this._hasMaskedPath||!this._pathData.m._mdf))return;this._isFirstFrame=!1;let n=this._moreOptions.alignment.v,h=this._animatorsData,o=this._textData,l=this.mHelper,m=this._renderType,p=this.renderedLetters.length,d,c,u,f,g=t.l,y,b=0,v,_=0,w,S=0,k=0,E,A=null,M,x=0,C=0,P=0,D,T;if(this._hasMaskedPath){if(T=this._pathData.m,!this._pathData.n||this._pathData._mdf){let t,e=T.v;for(this._pathData.r.v&&(e=e.reverse()),y={segments:[],tLength:0},f=e._length-1,C=0,u=0;u<f;u++)t=sI(e.v[u],e.v[u+1],[e.o[u][0]-e.v[u][0],e.o[u][1]-e.v[u][1]],[e.i[u+1][0]-e.v[u+1][0],e.i[u+1][1]-e.v[u+1][1]]),y.tLength+=t.segmentLength,y.segments.push(t),C+=t.segmentLength;u=f,T.v.c&&(t=sI(e.v[u],e.v[0],[e.o[u][0]-e.v[u][0],e.o[u][1]-e.v[u][1]],[e.i[0][0]-e.v[0][0],e.i[0][1]-e.v[0][1]]),y.tLength+=t.segmentLength,y.segments.push(t),C+=t.segmentLength),this._pathData.pi=y}if(y=this._pathData.pi,b=this._pathData.f.v,k=0,S=1,_=0,w=!0,M=y.segments,b<0&&T.v.c)for(y.tLength<Math.abs(b)&&(b=-Math.abs(b)%y.tLength),k=M.length-1,S=(A=M[k].points).length-1;b<0;)b+=A?.[S]?.partialLength,(S-=1)<0&&(k-=1,S=(A=M[k].points).length-1);E=(A=M[k].points)[S-1],x=(v=A[S]).partialLength}f=g?.length||0,d=0,c=0;let N=1.2*(t.finalSize||0)*.714,I=!0,F=h.length,L,$=-1,V,z,O,R=b,B=k,q=S,j=-1,H,G=[0,0,0],W=0,Y=[0,0,0],U,X,J,K,Z="",Q=this.defaultPropsArray,tt;if(2===t.j||1===t.j){let e=0,a=0,n=2===t.j?-.5:-1,l=0,m=!0;for(u=0;u<f;u++){if(g?.[u].n){for(e&&(e+=a);l<u;)g[l].animatorJustifyOffset=e,l++;e=0,m=!0;continue}for(r=0;r<F;r++)s=h[r].a,s?.t.propType&&(m&&2===t.j&&(a+=Number(s.t.v)*n),i=h[r].s,Array.isArray(L=i?.getMult(Number(g?.[u].anIndexes[r]),o.a?.[r].s?.totalChars))?e+=Number(s.t.v)*L[0]*n:e+=Number(s.t.v)*Number(L)*n);m=!1}for(e&&(e+=a);l<u;)g&&(g[l].animatorJustifyOffset=e,l+=1)}for(u=0;u<f;u++){if(l.reset(),H=1,g?.[u].n)d=0,c+=t.yOffset||0,c+=+!!I,b=R,I=!1,this._hasMaskedPath&&(k=B||0,S=q||0,E=(A=M?.[k]?.points||[])[S-1],x=(v=A[S]).partialLength,_=0),Z="",K="",X="",tt="",Q=this.defaultPropsArray;else{if(this._hasMaskedPath){if(j!==g?.[u].line){switch(t.j){case 1:b+=C-Number(t.lineWidths?.[Number(g?.[u].line)]);break;case 2:b+=(C-Number(t.lineWidths?.[Number(g?.[u].line)]))/2}j=g?.[u].line||0}$!==g?.[u].ind&&(g?.[$]&&(b+=Number(g[$].extra)),b+=(g?.[u].an||0)/2,$=g?.[u].ind||0),b+=n[0]*(g?.[u].an||0)*.005;let e=0;for(r=0;r<F;r++){if(s=h[r].a,s?.p.propType){if(i=h[r].s,!(L=i?.getMult(Number(g?.[u].anIndexes[r]),o.a?.[r].s?.totalChars)))continue;Array.isArray(s.p.v)&&(Array.isArray(L)?e+=s.p.v[0]*L[0]:e+=s.p.v[0]*L)}if(s?.a.propType){if(i=h[r].s,(L=i?.getMult(Number(g?.[u].anIndexes[r]),o.a?.[r].s?.totalChars))&&Array.isArray(s.a.v)){if(Array.isArray(L)){e+=s.a.v[0]*L[0];continue}e+=s.a.v[0]*L}}}for(w=!0,this._pathData.a.v&&(b=.5*(g?.[0].an||0)+(C-this._pathData.f.v-.5*(g?.[0].an||0)-.5*Number(g?.[Number(g?.length)-1].an))*$/(f-1)+this._pathData.f.v);w;)_+x>=b+e||!A?(P=(b+e-_)/(v?.partialLength||0),z=Number(E?.point[0])+(Number(v?.point[0])-Number(E?.point[0]))*P,O=Number(E?.point[1])+(Number(v?.point[1])-Number(E?.point[1]))*P,l.translate(-n[0]*Number(g?.[u].an)*.005,-(.01*(n[1]*N))),w=!1):A&&(_+=Number(v?.partialLength),(S+=1)>=A.length&&(S=0,k+=1,M?.[k]?A=M[k].points:T.v.c?(S=0,k=0,A=M?.[k].points||[]):(_-=Number(v?.partialLength),A=null)),A&&(E=v,x=(v=A[S]).partialLength));V=Number(g?.[u].an)/2-Number(g?.[u].add),l.translate(-V,0,0)}else V=Number(g?.[u].an)/2-Number(g?.[u].add),l.translate(-V,0,0),l.translate(-n[0]*Number(g?.[u].an)*.005,-n[1]*N*.01,0);for(r=0;r<F;r++)if(s=h[r].a,s?.t.propType&&(i=h[r].s,L=i?.getMult(Number(g?.[u].anIndexes[r]),o.a?.[r].s?.totalChars),0!==d||0!==t.j)){if(this._hasMaskedPath){Array.isArray(L)?b+=Number(s.t.v)*L[0]:b+=Number(s.t.v)*Number(L);continue}if(Array.isArray(L)){d+=Number(s.t.v)*L[0];continue}d+=Number(s.t.v)*Number(L)}for(t.strokeWidthAnim&&(W=t.sw||0),t.strokeColorAnim&&(G=t.sc?[Number(t.sc[0]),Number(t.sc[1]),Number(t.sc[2])]:[0,0,0]),t.fillColorAnim&&t.fc&&(Y=[Number(t.fc[0]),Number(t.fc[1]),Number(t.fc[2])]),r=0;r<F;r+=1)if(s=h[r].a,s?.a.propType){if(i=h[r].s,!(L=i?.getMult(Number(g?.[u].anIndexes[r]),o.a?.[r].s?.totalChars))||!Array.isArray(s.a.v))continue;if(Array.isArray(L)){l.translate(-s.a.v[0]*L[0],-s.a.v[1]*L[1],s.a.v[2]*L[2]);continue}l.translate(-s.a.v[0]*L,-s.a.v[1]*L,s.a.v[2]*L)}for(r=0;r<F;r++)if(s=h[r].a,s?.s.propType){if(i=h[r].s,!(L=i?.getMult(Number(g?.[u].anIndexes[r]),o.a?.[r].s?.totalChars))||!Array.isArray(s.s.v))continue;if(Array.isArray(L)){l.scale(1+(s.s.v[0]-1)*L[0],1+(s.s.v[1]-1)*L[1],1);continue}l.scale(1+(s.s.v[0]-1)*L,1+(s.s.v[1]-1)*L,1)}for(r=0;r<F;r++)if(s=h[r].a,i=h[r].s,L=i?.getMult(Number(g?.[u].anIndexes[r]),o.a?.[r].s?.totalChars)){if(s?.sk.propType&&(Array.isArray(L)?l.skewFromAxis(-Number(s.sk.v)*L[0],Number(s.sa.v)*L[1]):l.skewFromAxis(-Number(s.sk.v)*L,Number(s.sa.v)*L)),s?.r.propType&&(Array.isArray(L)?l.rotateZ(-Number(s.r.v)*L[2]):l.rotateZ(-Number(s.r.v)*L)),s?.ry.propType&&(Array.isArray(L)?l.rotateY(Number(s.ry.v)*L[1]):l.rotateY(Number(s.ry.v)*L)),s?.rx.propType&&(Array.isArray(L)?l.rotateX(Number(s.rx.v)*L[0]):l.rotateX(Number(s.rx.v)*L)),s?.o.propType&&(Array.isArray(L)?H+=(Number(s.o.v)*L[0]-H)*L[0]:H+=(Number(s.o.v)*L-H)*L),t.strokeWidthAnim&&s?.sw.propType&&(Array.isArray(L)?W+=Number(s.sw.v)*L[0]:W+=Number(s.sw.v)*L),t.strokeColorAnim&&s?.sc.propType&&Array.isArray(s.sc.v))for(U=0;U<3;U++)Array.isArray(L)?G[U]+=(s.sc.v[U]-G[U])*L[0]:G[U]+=(s.sc.v[U]-G[U])*L;if(t.fillColorAnim&&t.fc){if(s?.fc.propType)for(U=0;U<3;U++)Array.isArray(s.fc.v)&&(Array.isArray(L)?Y[U]+=(s.fc.v[U]-Y[U])*L[0]:Y[U]+=(s.fc.v[U]-Y[U])*L);s?.fh.propType&&(Y=Array.isArray(L)?ep(Y,Number(s.fh.v)*L[0]):ep(Y,Number(s.fh.v)*L)),s?.fs.propType&&(Y=Array.isArray(L)?ed(Y,Number(s.fs.v)*L[0]):ed(Y,Number(s.fs.v)*L)),s?.fb.propType&&(Y=Array.isArray(L)?em(Y,Number(s.fb.v)*L[0]):em(Y,Number(s.fb.v)*L))}}for(r=0;r<F;r++)if(s=h[r].a,s?.p.propType){if(i=h[r].s,!(L=i?.getMult(Number(g?.[u].anIndexes[r]),o.a?.[r].s?.totalChars))||!Array.isArray(s.p.v))continue;this._hasMaskedPath?Array.isArray(L)?l.translate(0,s.p.v[1]*L[0],-s.p.v[2]*L[1]):l.translate(0,s.p.v[1]*L,-s.p.v[2]*L):Array.isArray(L)?l.translate(s.p.v[0]*L[0],s.p.v[1]*L[1],-s.p.v[2]*L[2]):l.translate(s.p.v[0]*L,s.p.v[1]*L,-s.p.v[2]*L)}if(t.strokeWidthAnim&&(X=W<0?0:W),t.strokeColorAnim&&(J=`rgb(${Math.round(255*G[0])},${Math.round(255*G[1])},${Math.round(255*G[2])})`),t.fillColorAnim&&t.fc&&(K=`rgb(${Math.round(255*Y[0])},${Math.round(255*Y[1])},${Math.round(255*Y[2])})`),this._hasMaskedPath){if(l.translate(0,-Number(t.ls)),l.translate(0,n[1]*N*.01+c,0),this._pathData.p.v){let t=180*Math.atan(D=(Number(v?.point[1])-Number(E?.point[1]))/(Number(v?.point[0])-Number(E?.point[0])))/Math.PI;Number(v?.point[0])<Number(E?.point[0])&&(t+=180),l.rotate(-t*Math.PI/180)}l.translate(Number(z),Number(O),0),b-=n[0]*Number(g?.[u].an)*.005,g?.[u+1]&&$!==g?.[u+1].ind&&(b+=g[u].an/2,b+=.001*t.tr*Number(t.finalSize))}else{switch(l.translate(d,c,0),t.ps&&l.translate(t.ps[0],t.ps[1]+Number(t.ascent),0),t.j){case 1:l.translate(Number(g?.[u].animatorJustifyOffset)+Number(t.justifyOffset)+(Number(t.boxWidth)-Number(t.lineWidths?.[Number(g?.[u].line)])),0,0);break;case 2:l.translate(Number(g?.[u].animatorJustifyOffset)+Number(t.justifyOffset)+(Number(t.boxWidth)-Number(t.lineWidths?.[Number(g?.[u].line)]))/2,0,0)}l.translate(0,-Number(t.ls)),l.translate(V,0,0),l.translate(n[0]*Number(g?.[u].an)*.005,n[1]*N*.01,0),d+=Number(g?.[u].l)+.001*t.tr*Number(t.finalSize)}"html"===m?Z=l.toCSS():"svg"===m?Z=l.to2dCSS():Q=[l.props[0],l.props[1],l.props[2],l.props[3],l.props[4],l.props[5],l.props[6],l.props[7],l.props[8],l.props[9],l.props[10],l.props[11],l.props[12],l.props[13],l.props[14],l.props[15]],tt=H}if(p<=u){a=new rh(Number(tt),Number(X),J,K,Z,Q),this.renderedLetters.push(a),p+=1,this.lettersChangedFlag=!0;continue}a=this.renderedLetters[u],this.lettersChangedFlag=a.update(Number(tt),Number(X),J,K,Z,Q)||this.lettersChangedFlag}}getValue(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())}searchProperties(t){let e=this._textData.a?.length||0;for(let t=0;t<e;t++)this._animatorsData[t]=new rl(this._elem,this._textData.a?.[t],this);this._textData.p&&this._textData.p.m?(this._pathData={a:sK(this._elem,this._textData.p.a,0,0,this),f:sK(this._elem,this._textData.p.f,0,0,this),l:sK(this._elem,this._textData.p.l,0,0,this),m:this._elem.maskManager?.getMaskProperty(this._textData.p.m),p:sK(this._elem,this._textData.p.p,0,0,this),r:sK(this._elem,this._textData.p.r,0,0,this)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=sK(this._elem,this._textData.m?.a,1,0,this)}}class rp extends sH{constructor(t,e){super(),this.defaultBoxWidth=[0,0],this._frameId=-999999,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,e?.d&&e.d.sid&&(e.d=t.globalData.slotManager?.getProp(e.d)),this.data=e,this.elem=t,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={__complete:!1,ascent:0,boxWidth:this.defaultBoxWidth,f:"",fc:"",fillColorAnim:!1,finalLineHeight:0,finalSize:0,finalText:[],fStyle:"",fWeight:"",justifyOffset:0,l:[],lh:0,lineWidths:[],ls:0,of:"",ps:null,s:0,sc:"",strokeColorAnim:!1,strokeWidthAnim:!1,sw:0,t:0,tr:0,yOffset:0},this.copyData(this.currentData,this.data?.d?.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}addEffect(t){this.effectsSequence.push(t),this.elem.addDynamicProperty(this)}buildFinalText(t){let e=[],s=0,i=t.length,r,a,n=!1,h=!1,o="";for(;s<i;){var l;(n=h,h=!1,r=t.charCodeAt(s),o=t.charAt(s),-1!==il.indexOf(r))?n=!0:r>=55296&&r<=56319?function(t,e){let s=e,i=ic(t.substring(s,2));if(127988!==i)return!1;let r=0;for(s+=2;r<5;){if((i=ic(t.substring(s,2)))<917601||i>917626)return!1;r+=1,s+=2}return 917631===ic(t.substr(s,2))}(t,s)?o=t.substring(s,14):(a=t.charCodeAt(s+1))>=56320&&a<=57343&&(function(t,e){let s=t.toString(16)+e.toString(16);return -1!==ip.indexOf(s)}(r,a)?(o=t.substring(s,2),n=!0):o=id((l=t.substring(s,4)).substring(0,2))&&id(l.substring(2,2))?t.substring(s,4):t.substring(s,2)):r>56319?(a=t.charCodeAt(s+1),65039===r&&(n=!0)):8205===r&&(n=!0,h=!0),n?(e[e.length-1]+=o,n=!1):e.push(o),s+=o.length}return e}canResizeFont(t){this.canResize=t,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)}completeTextData(t){let e,s,i,r,a,n;t.__complete=!0;let{fontManager:h}=this.elem.globalData;if(!h)throw Error(`${this.constructor.name}: FontManager not loaded to globalData`);let o=this.data,l=[],m,p,d=0,c,u=o?.m?.g,f=0,g=0,y=0,b=[],v=0,_=0,w=h?.getFontByName(t.f),S,k=0,E=iy(w);t.fWeight=E.weight,t.fStyle=E.style,t.finalSize=t.s,t.finalText=this.buildFinalText(`${t.t}`),m=t.finalText?.length||0,t.finalLineHeight=t.lh;let A=t.tr/1e3*t.finalSize;if(t.sz){let s,i,r=!0,a=t.sz[0],n=t.sz[1];for(;r;){i=this.buildFinalText(`${t.t}`),s=0,v=0,m=i.length,A=t.tr/1e3*t.finalSize;let o=-1;for(let r=0;r<m;r++)e=i[r].charCodeAt(0),p=!1," "===i[r]?o=r:(13===e||3===e)&&(v=0,p=!0,s+=t.finalLineHeight||1.2*t.finalSize),h?.chars?(S=h.getCharData(i[r],w.fStyle,w.fFamily),k=p?0:S.w*t.finalSize/100):k=h?.measureText(i[r],t.f,t.finalSize)||0,v+k>Number(a)&&" "!==i[r]?(-1===o?m+=1:r=o,s+=t.finalLineHeight||1.2*t.finalSize,i.splice(r,+(o===r),"\r"),o=-1,v=0):(v+=k,v+=A);s+=Number(w.ascent)*t.finalSize/100,this.canResize&&t.finalSize>this.minimumFontSize&&Number(n)<s?(t.finalSize-=1,t.finalLineHeight=t.finalSize*t.lh/t.s):(t.finalText=i,m=t.finalText.length,r=!1)}}v=-A,k=0;let M=0;for(let i=0;i<m;i++)if(p=!1,13===(e=(s=t.finalText[i]).charCodeAt(0))||3===e?(M=0,b.push(v),_=v>_?v:_,v=-2*A,c="",p=!0,y+=1):c=s,h.chars?(S=h.getCharData(s,w.fStyle,h.getFontByName(t.f).fFamily),k=p?0:S.w*t.finalSize/100):k=h.measureText(c,t.f,t.finalSize)," "===s?M+=k+A:(v+=k+A+M,M=0),l.push({add:f,an:k,animatorJustifyOffset:0,anIndexes:[],l:k,line:y,n:p,val:c}),2===u){if(f+=k,""===c||" "===c||i===m-1){for((""===c||" "===c)&&(f-=k);g<=i;)l[g].an=f,l[g].ind=d,l[g].extra=k,g+=1;d+=1,f=0}}else if(3===u){if(f+=k,""===c||i===m-1){for(""===c&&(f-=k);g<=i;)l[g].an=f,l[g].ind=d,l[g].extra=k,g+=1;f=0,d+=1}}else l[d].ind=d,l[d].extra=0,d+=1;if(t.l=l,_=v>_?v:_,b.push(v),t.sz)t.boxWidth=t.sz[0],t.justifyOffset=0;else switch(t.boxWidth=_,t.j){case 1:t.justifyOffset=-t.boxWidth;break;case 2:t.justifyOffset=-t.boxWidth/2;break;default:t.justifyOffset=0}t.lineWidths=b;let x=o?.a,C=x?.length||0,P=[];for(let e=0;e<C;e++){if(!(i=x?.[e]))continue;i.a?.sc&&(t.strokeColorAnim=!0),i.a?.sw&&(t.strokeWidthAnim=!0),(i.a?.fc||i.a?.fh||i.a?.fs||i.a?.fb)&&(t.fillColorAnim=!0),n=0,a=Number(i.s?.b);for(let t=0;t<m;t++)(r=l[t]).anIndexes[e]=n,(1===a&&""!==r.val||2===a&&""!==r.val&&" "!==r.val||3===a&&(r.n||" "===r.val||t===m-1)||4===a&&(r.n||t===m-1))&&(1===Number(i.s?.rn)&&P.push(n),n+=1);o?.a&&o.a[e].s&&(o.a[e].s.totalChars=n);let s=-1,h;if(i.s?.rn===1)for(let t=0;t<m;t++)s!==Number((r=l[t]).anIndexes[e])&&(s=r.anIndexes[e],h=P.splice(Math.floor(Math.random()*P.length),1)[0]),h&&(r.anIndexes[e]=h)}t.yOffset=t.finalLineHeight||1.2*t.finalSize,t.ls=t.ls||0,t.ascent=Number(w.ascent)*t.finalSize/100}copyData(t,e){for(let s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}getKeyframeValue(){let t=this.data?.d?.k,e=Number(this.elem.comp?.renderedFrame),s=0,i=t?.length||0;for(;s<=i-1&&!(s===i-1||Number(t?.[s+1].t)>e);)s++;return this.keysIndex!==s&&(this.keysIndex=s),this.data?.d?.k[this.keysIndex].s}getValue(t){if((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!t)return;this.data?.d?.k[this.keysIndex].s.t&&(this.currentData.t=this.data.d.k[this.keysIndex].s.t);let e=this.currentData,s=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;let{length:i}=this.effectsSequence,r=t||this.data?.d?.k[this.keysIndex].s;for(let t=0;t<i;t++)r=s===this.keysIndex?this.effectsSequence[t](this.currentData,r?.t):this.effectsSequence[t](r,r?.t);e!==r&&this.setCurrentData(r),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}recalculate(t){let e=this.data?.d.k[t].s;e&&(e.__complete=!1),this.keysIndex=0,this._isFirstFrame=!0,this.getValue(e)}searchKeyframes(){return this.kf=Number(this.data?.d.k.length)>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf}searchProperty(){return this.searchKeyframes()}setCurrentData(t){t.__complete||this.completeTextData(t),this.currentData=t,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0}setMinimumFontSize(t){this.minimumFontSize=Math.floor(t)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)}updateDocumentData(t,e){let s=e;s=void 0===s?this.keysIndex:s;let i=this.copyData({},this.data?.d?.k[s].s);i=this.copyData(i,t),this.data?.d?.k[s].s&&(this.data.d.k[s].s=i),this.recalculate(s),this.setCurrentData(i),this.elem.addDynamicProperty(this)}}class rd extends i_{applyTextPropertiesToMatrix(t,e,s,i,r){switch(t.ps&&e.translate(t.ps[0],t.ps[1]+Number(t.ascent),0),e.translate(0,-Number(t.ls),0),t.j){case 1:e.translate(Number(t.justifyOffset)+(Number(t.boxWidth)-Number(t.lineWidths?.[s])),0,0);break;case 2:e.translate(Number(t.justifyOffset)+(Number(t.boxWidth)-Number(t.lineWidths?.[s]))/2,0,0)}e.translate(i,r,0)}buildColor(t){return`rgb(${Math.round(255*t[0])},${Math.round(255*t[1])},${Math.round(255*t[2])})`}buildNewText(){throw Error(`${this.constructor.name}: Method buildNewText it not implemented`)}canResizeFont(t){this.textProperty?.canResizeFont(t)}createPathShape(t,e){let s,i="",{length:r}=e;for(let a=0;a<r;a++)"sh"===e[a].ty&&e[a].ks?.k&&(i+=eu(s=e[a].ks.k,s.i.length,!0,t));return i}initElement(t,e,s){this.emptyProp=new rh,this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(t,e,s),this.textProperty=new rp(this,t.t),this.textAnimator=new rm(t.t,this.renderType||tq.SVG,this),this.initTransform(),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties||[])}prepareFrame(t){this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange)}setMinimumFontSize(t){this.textProperty?.setMinimumFontSize(t)}updateDocumentData(t,e){this.textProperty?.updateDocumentData(t,e)}validateText(){(this.textProperty?._mdf||this?.textProperty?._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)}}class rc extends rd{constructor(t,e,s){super(),this.renderedLetters=[],this.emptyShapeData={shapes:[]},this.textSpans=[],this.renderType=tq.SVG;let{createContainerElements:i,createRenderableComponents:r,destroyBaseElement:a,getBaseElement:n,getMatte:h,initRendererElement:o,renderElement:l,setMatte:m}=new iq;this.createContainerElements=i,this.createRenderableComponents=r,this.getBaseElement=n,this.getMatte=h,this.destroyBaseElement=a,this.initRendererElement=o,this.renderElement=l,this.setMatte=m,this.initElement(t,e,s)}buildNewText(){let t,e;this.addDynamicProperty(this);let s=this.textProperty?.currentData;if(!this.globalData||!this.layerElement||!s)throw Error(`${this.constructor.name}: Cannot access required data`);this.renderedLetters=sx(s.l?.length||0),s.fc?this.layerElement.setAttribute("fill",this.buildColor(s.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),s.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(s.sc)),this.layerElement.setAttribute("stroke-width",`${s.sw||0}`)),this.layerElement.setAttribute("font-size",`${s.finalSize||0}`);let i=this.globalData.fontManager?.getFontByName(s.f);if(i?.fClass)this.layerElement.setAttribute("class",i.fClass);else{i?.fFamily&&this.layerElement.setAttribute("font-family",i.fFamily);let t=s.fWeight,e=s.fStyle;this.layerElement.setAttribute("font-style",e),this.layerElement.setAttribute("font-weight",t)}this.layerElement.setAttribute("aria-label",`${s.t}`);let r=s.l||[],a=!!this.globalData.fontManager?.chars;e=r.length;let n=null,h=this.mHelper,o=this.data?.singleShape,l=0,m=0,p=!0,d=.001*s.tr*Number(s.finalSize);if(!o||a||s.sz){let c,u=this.textSpans.length;for(t=0;t<e;t++){if(this.textSpans[t]||(this.textSpans[t]={childSpan:null,glyph:null,span:null}),!a||!o||0===t){if(n=u>t?this.textSpans[t].span:ef(a?"g":"text"),u<=t){if(n?.setAttribute("stroke-linecap","butt"),n?.setAttribute("stroke-linejoin","round"),n?.setAttribute("stroke-miterlimit","4"),this.textSpans[t].span=n,a){let e=ef("g");n?.appendChild(e),this.textSpans[t].childSpan=e}this.textSpans[t].span=n,n&&this.layerElement.appendChild(n)}n&&(n.style.display="inherit")}if(h.reset(),o&&(r[t].n&&(l=-d,m+=Number(s.yOffset),m+=+!!p,p=!1),this.applyTextPropertiesToMatrix(s,h,r[t].line,l,m),l+=r[t].l||0,l+=d),a){let e;if(c=this.globalData.fontManager?.getCharData(s.finalText[t],i?.fStyle,this.globalData.fontManager.getFontByName(s.f).fFamily),c?.t===1)e=new rf(c.data,this.globalData,this);else{let t=this.emptyShapeData;c?.data&&c.data.shapes&&(t=this.buildShapeData(c.data,Number(s.finalSize))),e=new rn(t,this.globalData,this)}if(this.textSpans[t].glyph){let e=this.textSpans[t].glyph;e?.layerElement&&this.textSpans[t].childSpan?.removeChild(e.layerElement),e?.destroy()}this.textSpans[t].glyph=e,e._debug=!0,e.prepareFrame(0),e.renderFrame(),e.layerElement&&this.textSpans[t].childSpan?.appendChild(e.layerElement),c?.t===1&&this.textSpans[t].childSpan?.setAttribute("transform",`scale(${Number(s.finalSize)/100},${Number(s.finalSize)/100})`);continue}o&&n?.setAttribute("transform",`translate(${h.props[12]},${h.props[13]})`),n&&(n.textContent=r[t].val),n?.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}o&&n&&n.setAttribute("d","")}else{let i=this.textContainer,r="start";switch(s.j){case 1:r="end";break;case 2:r="middle";break;default:r="start"}i?.setAttribute("text-anchor",r),i?.setAttribute("letter-spacing",`${d}`);let a=this.buildTextContents(s.finalText);for(t=0,e=a.length,m=s.ps?s.ps[1]+Number(s.ascent):0;t<e;t++)(n=this.textSpans[t].span||ef("tspan")).textContent=a[t],n.setAttribute("x","0"),n.setAttribute("y",`${m}`),n.style.display="inherit",i?.appendChild(n),this.textSpans[t]||(this.textSpans[t]={glyph:null,span:null}),this.textSpans[t].span=n,m+=Number(s.finalLineHeight);i&&this.layerElement.appendChild(i)}for(;t<this.textSpans.length&&this.textSpans[t].span;)this.textSpans[t].span.style.display="none",t++;this._sizeChanged=!0}buildShapeData(t,e){if(t.shapes&&t.shapes.length){let s=t.shapes[0];if(s.it){let t=s.it[s.it.length-1];t.s&&(t.s.k[0]=e,t.s.k[1]=e)}}return t}buildTextContents(t){let e=0,s=t.length,i=[],r="";for(;e<s;)"\r"===t[e]||"\x03"===t[e]?(i.push(r),r=""):r+=t[e],e++;return i.push(r),i}createContent(){this.data?.singleShape&&!this.globalData?.fontManager?.chars&&(this.textContainer=ef("text"))}getBaseElement(){throw Error(`${this.constructor.name}: Method getBaseElement is not implemented`)}getMatte(t){throw Error(`${this.constructor.name}: Method getMatte is not implemented`)}getValue(){let t,{length:e}=this.textSpans;this.renderedFrame=this.comp?.renderedFrame;for(let s=0;s<e;s++)(t=this.textSpans[s].glyph)&&(t.prepareFrame(Number(this.comp?.renderedFrame)-Number(this.data?.st)),t._mdf&&(this._mdf=!0))}renderInnerContent(){if(this.validateText(),!this.data?.singleShape||this._mdf){if(!this.textProperty)throw Error(`${this.constructor.name}: textProperty is not initialized`);if(this.textAnimator?.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator?.lettersChangedFlag){let t,e,s;this._sizeChanged=!0;let i=this.textAnimator?.renderedLetters,r=this.textProperty.currentData.l,{length:a}=r||[];for(let n=0;n<a;n++)!r?.[n].n&&(t=i?.[n],e=this.textSpans[n].span,(s=this.textSpans[n].glyph)&&s.renderFrame(),t?._mdf.m&&e?.setAttribute("transform",t.m),t?._mdf.o&&e?.setAttribute("opacity",`${t.o??1}`),t?._mdf.sw&&e?.setAttribute("stroke-width",`${t.sw||0}`),t?._mdf.sc&&e?.setAttribute("stroke",t.sc),t?._mdf.fc&&e?.setAttribute("fill",t.fc))}}}setMatte(t){throw Error(`${this.constructor.name}: Method setMatte is not implemented`)}sourceRectAtTime(){if(this.prepareFrame(Number(this.comp?.renderedFrame)-Number(this.data?.st)),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;let t=this.layerElement?.getBBox();if(t)return this.bbox={height:t.height,left:t.x,top:t.y,width:t.width},this.bbox}return null}}class ru extends iv{appendElementInPos(t,e){let s;if(!t.getBaseElement)throw Error(`${t.constructor.name}: Method getBaseElement is not implemented`);let i=t.getBaseElement();if(!i)return;let r=0;for(;r<e;)this.elements[r]&&!0!==this.elements[r]&&this.elements[r].getBaseElement()&&(s=this.elements[r].getBaseElement()),r++;s?this.layerElement?.insertBefore(i,s):this.layerElement?.appendChild(i)}buildItem(t){if(!this.layers)throw Error(`${this.constructor.name}: layers it not implemented`);if(!this.globalData)throw Error(`${this.constructor.name}: globalData it not implemented`);let e=this.elements;if(e[t]||99===this.layers[t].ty)return;e[t]=!0;let s=this.createItem(this.layers[t]);if(!s)throw Error(`${this.constructor.name}: Could not create element`);if(e[t]=s,this.appendElementInPos(s,t),this.layers[t].tt){let i="tp"in this.layers[t]?this.findIndexByInd(this.layers[t].tp):t-1;if(-1===i)return;if(!this.elements[i]||!0===this.elements[i]){this.buildItem(i),this.addPendingElement(s);return}let r=e[i].getMatte(this.layers[t].tt);s.setMatte(r)}}checkPendingElements(){for(;this.pendingElements.length;){let t=this.pendingElements.pop();if(t?.checkParenting(),t?.data?.tt){let e=0,{length:s}=this.elements||[];for(;e<s;){if(this.elements[e]!==t){e++;continue}let s="tp"in t.data?this.findIndexByInd(t.data.tp):e-1,i=this.elements[s].getMatte(this.layers[e].tt);t.setMatte(i);break}e++}}}configAnimation(t){try{if(!this.animationItem)throw Error(`${this.constructor.name}: Can't access animationItem`);if(!this.globalData)throw Error(`${this.constructor.name}: Can't access globalData`);if(!this.renderConfig)throw Error(`${this.constructor.name}: Can't access renderConfig`);if(!this.svgElement)throw Error(`${this.constructor.name}: Can't access svgElement`);this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox",`0 0 ${t.w} ${t.h}`),!this.renderConfig.viewBoxOnly&&(this.svgElement.setAttribute("width",`${t.w}`),this.svgElement.setAttribute("height",`${t.h}`),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.renderConfig?.contentVisibility&&(this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility)),this.renderConfig.width&&this.svgElement.setAttribute("width",`${this.renderConfig.width}`),this.renderConfig.height&&this.svgElement.setAttribute("height",`${this.renderConfig.height}`),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),void 0!==this.renderConfig.focusable&&this.svgElement.setAttribute("focusable",`${this.renderConfig.focusable}`),this.renderConfig.preserveAspectRatio&&this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper?.appendChild(this.svgElement);let e=this.globalData.defs;this.setupGlobalData(t,e),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=t;let s=ef("clipPath"),i=ef("rect");i.setAttribute("width",`${t.w}`),i.setAttribute("height",`${t.h}`),i.setAttribute("x","0"),i.setAttribute("y","0");let r=el();s.setAttribute("id",r),s.appendChild(i),this.layerElement?.setAttribute("clip-path",`url(${en()}#${r})`),e.appendChild(s),this.layers=t.layers,this.elements=sx(t.layers.length)}catch(t){console.error(t)}}createImage(t){if(!this.globalData)throw Error(`${this.constructor.name}: Can't access globalData`);return new ij(t,this.globalData,this)}createNull(t){if(!this.globalData)throw Error(`${this.constructor.name}: Can't access globalData`);return new iH(t,this.globalData,this)}createShape(t){if(!this.globalData)throw Error(`${this.constructor.name}: Can't access globalData`);return new rn(t,this.globalData,this)}createSolid(t){if(!this.globalData)throw Error(`${this.constructor.name}: Can't access globalData`);return new iG(t,this.globalData,this)}createText(t){if(!this.globalData)throw Error(`${this.constructor.name}: Can't access globalData`);return new rc(t,this.globalData,this)}destroy(){if(!this.animationItem)throw Error(`${this.constructor.name}: Can't access animationItem`);if(!this.globalData)throw Error(`${this.constructor.name}: Can't access globalData`);this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;let{length:t}=this.layers;for(let e=0;e<t;e++)this.elements[e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null}findIndexByInd(t){let{length:e}=this.layers;for(let s=0;s<e;s++)if(this.layers[s].ind===t)return s;return -1}hide(){this.layerElement&&(this.layerElement.style.display="none")}renderFrame(t){try{if(!this.globalData||this.renderedFrame===t||this.destroyed)return;let e=t;null===e?e=this.renderedFrame:this.renderedFrame=Number(e),this.globalData.frameNum=e,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=e,this.globalData._mdf=!1;let{length:s}=this.layers;this.completeLayers||this.checkLayers(e);for(let t=s-1;t>=0;t--)(this.completeLayers||this.elements[t])&&this.elements[t].prepareFrame(Number(e)-Number(this.layers[t].st));if(this.globalData._mdf)for(let t=0;t<s;t++)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()}catch(t){console.error(t)}}show(){if(!this.layerElement)throw Error(`${this.constructor.name}: layerElement is not implemented`);this.layerElement.style.display="block"}updateContainerSize(t,e){throw Error(`${this.constructor.name}: Method updateContainerSize is not implemented`)}}class rf extends iq{constructor(t,e,s){super(),this.layers=t.layers||[],this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?sx(this.layers.length):[];let{appendElementInPos:i,buildItem:r,checkPendingElements:a,configAnimation:n,createImage:h,createNull:o,createShape:l,createSolid:m,createText:p,findIndexByInd:d,hide:c}=new ru,{destroy:u,destroyElements:f,getElements:g,initElement:y,prepareFrame:b,renderInnerContent:v,setElements:_}=new iw;this.appendElementInPos=i,this.buildItem=r,this.checkPendingElements=a,this.configAnimation=n,this.createImage=h,this.createNull=o,this.createShape=l,this.createSolid=m,this.createText=p,this.destroy=u,this.destroyElements=f,this.findIndexByInd=d,this.hide=c,this.getElements=g,this.initElement=y,this.prepareFrame=b,this.renderInnerContent=v,this.setElements=_,this.initElement(t,e,s),this.tm=t.tm?sK(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}appendElementInPos(t,e){throw Error(`${this.constructor.name}: Method appendElementInPos is not impelemented`)}buildItem(t){throw Error(`${this.constructor.name}: Method buildItem is not impelemented`)}checkPendingElements(){throw Error(`${this.constructor.name}: Method checkPendingElements is not impelemented`)}configAnimation(t){throw Error(`${this.constructor.name}: Method configAnimation is not impelemented`)}createComp(t){if(!this.globalData)throw Error(`${this.constructor.name}: Cannot access global data`);return new rf(t,this.globalData,this)}createImage(t){throw Error(`${this.constructor.name}: Method createImage is not impelemented`)}createNull(t){throw Error(`${this.constructor.name}: Method createNull is not impelemented`)}createShape(t){throw Error(`${this.constructor.name}: Method createShape is not impelemented`)}createSolid(t){throw Error(`${this.constructor.name}: Method createSolid is not impelemented`)}createText(t){throw Error(`${this.constructor.name}: Method createText is not impelemented`)}destroyElements(){throw Error(`${this.constructor.name}: Method destroyElements is not impelemented`)}findIndexByInd(t){throw Error(`${this.constructor.name}: Method findIndexByInd is not impelemented`)}getElements(){throw Error(`${this.constructor.name}: Method getElements is not impelemented`)}setElements(t){throw Error(`${this.constructor.name}: Method setElements is not impelemented`)}}class rg extends sH{addShape(t){if(this.closed)return;t.sh.container?.addDynamicProperty(t.sh);let e={data:t,localShapeCollection:iC(),shape:t.sh};this.shapes.push(e),this.addShapeToModifier(e),this._isAnimated&&t.setAsAnimated()}addShapeToModifier(t){throw Error(`${this.constructor.name}: Method addShapeToModifier is not implemented`)}init(t,e,s,i){this.shapes=[],this.elem=t,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e),this.frameId=-999999,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)}initModifierProperties(t,e){throw Error(`${this.constructor.name}: Method initModifierProperties is not implemented`)}isAnimatedWithShape(t){throw Error(`${this.constructor.name}: Method isAnimatedWithShape is not implemented`)}processKeys(){this.elem?.globalData.frameId!==this.frameId&&(this.frameId=this.elem?.globalData.frameId,this.iterateDynamicProperties())}constructor(...t){super(...t),this.shapes=[]}}function ry(t,e,s,i,r,a,n){let h=eA(e,s),o=e.v[s%Number(e._length)],l=e.v[0===s?Number(e._length)-1:s-1],m=e.v[(s+1)%Number(e._length)],p=2===a?Math.sqrt(Math.pow(Number(o?.[0])-Number(l?.[0]),2)+Math.pow(Number(o?.[1])-Number(l?.[1]),2)):0,d=2===a?Math.sqrt(Math.pow(Number(o?.[0])-Number(m?.[0]),2)+Math.pow(Number(o?.[1])-Number(m?.[1]),2)):0;eJ(t,e.v[s%Number(e._length)]||[0,0],h,n,i,d/((r+1)*2),p/((r+1)*2))}let rb={loadAnimation:function(t){try{let e=new su;return sE(e,null),e.setParams(t),e}catch(t){throw console.error(t),Error("Could not load animation")}}},rv=setInterval(()=>{eN()||"complete"===document.readyState&&(clearInterval(rv),function(){if(eN())return;let t=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),{length:e}=t;for(let s=0;s<e;s++)!function(t,e){try{if(!t)return null;let s=0;for(;s<sy;){if(sv[s].elem===t&&null!==sv[s].elem)return sv[s].animation;s++}let i=new su;sE(i,t),i.setData(t,e)}catch(t){throw console.error(t),Error("Could not register animation")}}(t[s],void 0)}())},100);c=tq.SVG,u=class extends ru{constructor(t,e){super(),this.animationItem=t,this.layers=[],this.renderedFrame=-1,this.svgElement=ef("svg");let s="";if(e?.title){let t=ef("title"),i=el();t.setAttribute("id",i),t.textContent=e.title,this.svgElement.appendChild(t),s+=i}if(e?.description){let t=ef("desc"),i=el();t.setAttribute("id",i),t.textContent=e.description,this.svgElement.appendChild(t),s+=` ${i}`}s&&this.svgElement.setAttribute("aria-labelledby",s);let i=ef("defs");this.svgElement.appendChild(i);let r=ef("g");this.svgElement.appendChild(r),this.layerElement=r,this.renderConfig={className:e?.className||"",contentVisibility:e?.contentVisibility||"visible",filterSize:{height:e?.filterSize&&e.filterSize.height||"100%",width:e?.filterSize&&e.filterSize.width||"100%",x:e?.filterSize&&e.filterSize.x||"0%",y:e?.filterSize&&e.filterSize.y||"0%"},focusable:e?.focusable,height:e?.height,hideOnTransparent:e?.hideOnTransparent!==!1,id:e?.id||"",imagePreserveAspectRatio:e?.imagePreserveAspectRatio||"xMidYMid slice",preserveAspectRatio:e?.preserveAspectRatio||"xMidYMid meet",progressiveLoad:e?.progressiveLoad||!1,runExpressions:!e||void 0===e.runExpressions||e.runExpressions,viewBoxOnly:e?.viewBoxOnly||!1,viewBoxSize:e?.viewBoxSize||!1,width:e?.width},this.globalData={_mdf:!1,defs:i,frameNum:-1,frameRate:60,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType=tq.SVG}createComp(t){if(!this.globalData)throw Error(`${this.constructor.name}: Can't access globalData`);return new rf(t,this.globalData,this)}},es[c]=u,rr("tm",class extends rg{addPaths(t,e){let{length:s}=t;for(let i=0;i<s;i++)e.addShape(t[i])}addSegment(t,e,s,i,r,a,n){r.setXYAt(e[0],e[1],"o",a),r.setXYAt(s[0],s[1],"i",a+1),n&&r.setXYAt(t[0],t[1],"v",a),r.setXYAt(i[0],i[1],"v",a+1)}addSegmentFromArray(t,e,s,i){e.setXYAt(t[1],t[5],"o",s),e.setXYAt(t[2],t[6],"i",s+1),i&&e.setXYAt(t[0],t[4],"v",s),e.setXYAt(t[3],t[7],"v",s+1)}addShapes(t,e,s){let i=s,{pathsData:r=[]}=t,a=t.shape?.paths?.shapes||[],n=t.shape?.paths?._length||0,h,o,l=0,m,p,d,c=[],u,f=!0;i?(p=i._length,u=i._length):(i=iE(),p=0,u=0),i&&c.push(i);for(let t=0;t<n;t++){if(!i)continue;let{lengths:s}=r[t];for(h=1,i.c=a[t].c,o=a[t].c?s.length:s.length+1;h<o;h++){if(l+(m=s[h-1]).addedLength<e.s){l+=m.addedLength,i.c=!1;continue}if(l>e.e){i.c=!1;break}e.s<=l&&e.e>=l+m.addedLength?(this.addSegment(a[t].v[h-1],a[t].o[h-1],a[t].i[h],a[t].v[h],i,p,f),f=!1):(d=sF(a[t].v[h-1],a[t].v[h],a[t].o[h-1],a[t].i[h],(e.s-l)/m.addedLength,(e.e-l)/m.addedLength,s[h-1]),this.addSegmentFromArray(d,i,p,f),f=!1,i.c=!1),l+=m.addedLength,p+=1}if(a[t].c&&s.length){if(m=s[h-1],l<=e.e){let r=s[h-1].addedLength;e.s<=l&&e.e>=l+r?(this.addSegment(a[t].v[h-1],a[t].o[h-1],a[t].i[0],a[t].v[0],i,p,f),f=!1):(d=sF(a[t].v[h-1],a[t].v[0],a[t].o[h-1],a[t].i[0],(e.s-l)/r,(e.e-l)/r,s[h-1]),this.addSegmentFromArray(d,i,p,f),f=!1,i.c=!1)}else i.c=!1;l+=m.addedLength,p+=1}if(i._length&&(i.setXYAt(i.v[u][0],i.v[u][1],"i",u),i.setXYAt(i.v[i._length-1][0],i.v[i._length-1][1],"o",i._length-1)),l>e.e)break;t<n-1&&(i=iE(),f=!0,i&&c.push(i),p=0)}return c}addShapeToModifier(t){t.pathsData=[]}calculateShapeEdges(t,e,s,i,r){let a=[];e<=1?a.push({e,s:t}):t>=1?a.push({e:e-1,s:t-1}):(a.push({e:1,s:t}),a.push({e:e-1,s:0}));let n=[],{length:h}=a;for(let t=0;t<h;t++)if(!(a[t].e*r<i||a[t].s*r>i+s)){let e,h;e=a[t].s*r<=i?0:(a[t].s*r-i)/s,h=a[t].e*r>=i+s?1:(a[t].e*r-i)/s,n.push([e,h])}return n.length||n.push([0,0]),n}initModifierProperties(t,e){this.s=sK(t,e.s,0,.01,this),this.e=sK(t,e.e,0,.01,this),this.o=sK(t,e.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=e.m,this._isAnimated=!!this.s.effectsSequence?.length||!!this.e.effectsSequence?.length||!!this.o.effectsSequence?.length}processShapes(t){let e,s;if(this._mdf||t){let t=Number(this.o?.v)%360/360;if(t<0&&(t+=1),(e=Number(this.s?.v)>1?1+t:0>Number(this.s?.v)?0+t:Number(this.s?.v)+t)>(s=Number(this.e?.v)>1?1+t:0>Number(this.e?.v)?0+t:Number(this.e?.v)+t)){let t=e;e=s,s=t}e=1e-4*Math.round(1e4*e),s=1e-4*Math.round(1e4*s),this.sValue=e,this.eValue=s}else e=this.sValue||0,s=this.eValue||0;let i,r,a,n,h,o,l=0,{length:m}=this.shapes;if(s===e)for(let t=0;t<m;t++)this.shapes[t].localShapeCollection?.releaseShapes(),this.shapes[t].shape._mdf=!0,this.shapes[t].shape.paths=this.shapes[t].localShapeCollection,this._mdf&&(this.shapes[t].pathsData.length=0);else if((1!==s||0!==e)&&(0!==s||1!==e)){let p,d,c=[];for(let e=0;e<m;e++)if(p=this.shapes?.[e],p.shape?._mdf||this._mdf||t||2===this.m){if(i=p.shape?.paths,a=i?._length||0,o=0,!p.shape?._mdf&&p.pathsData?.length)o=p.totalShapeLength;else{for(r=0,n=this.releasePathsData(p.pathsData);r<a;r++)i&&(h=function(t){let e,s=sT.newElement(),i=t.c,r=t.v,a=t.o,n=t.i,h=t._length||0,{lengths:o}=s,l=0;for(e=0;e<h-1;e++)o[e]=sV(r[e],r[e+1],a[e],n[e+1]),l+=o[e].addedLength;return i&&h&&(o[e]=sV(r[e],r[0],a[e],n[0]),l+=o[e].addedLength),s.totalLength=l,s}(i.shapes[r]),n.push(h),o+=h.totalLength);p.totalShapeLength=o,p.pathsData=n}l+=Number(o),p.shape._mdf=!0}else p.shape.paths=p.localShapeCollection;let u=e,f=s,g=0,y;for(let t=m-1;t>=0;t--)if(p=this.shapes?.[t],p.shape?._mdf){if(!(d=p.localShapeCollection))throw Error(`${this.constructor.name}: Could not set localShapeCollection`);for(d.releaseShapes(),2===this.m&&m>1?(y=this.calculateShapeEdges(e,s,p.totalShapeLength||0,g,l),g+=Number(p.totalShapeLength)):y=[[u,f]],a=y.length,r=0;r<a;r++){u=y[r][0],f=y[r][1],c.length=0,f<=1?c.push({e:Number(p.totalShapeLength)*f,s:Number(p.totalShapeLength)*u}):u>=1?c.push({e:Number(p.totalShapeLength)*(f-1),s:Number(p.totalShapeLength)*(u-1)}):(c.push({e:Number(p.totalShapeLength),s:Number(p.totalShapeLength)*u}),c.push({e:Number(p.totalShapeLength)*(f-1),s:0}));let t=this.addShapes(p,c[0]);if(c[0].s!==c[0].e){if(c.length>1){let e=p.shape.paths?.shapes[p.shape.paths._length-1];if(e?.c){let e=t.pop();this.addPaths(t,d),t=this.addShapes(p,c[1],e)}else this.addPaths(t,d),t=this.addShapes(p,c[1])}this.addPaths(t,d)}}p.shape.paths=d}}else if(this._mdf)for(let t=0;t<m;t++)this.shapes[t].pathsData.length=0,this.shapes[t].shape._mdf=!0}releasePathsData(t){let{length:e}=t;for(let s=0;s<e;s++)sT.release(t[s]);return t.length=0,t}}),rr("pb",class extends rg{initModifierProperties(t,e){this.getValue=this.processKeys,this.amount=sK(t,e.a,0,null,this),this._isAnimated=!!this.amount?.effectsSequence.length}processPath(t,e){let s,i,r,a,n,h,o=e/100,l=[0,0],m=t._length,p=0;for(p=0;p<m;p++)l[0]+=t.v[p][0],l[1]+=t.v[p][1];l[0]/=m,l[1]/=m;let d=iE();for(p=0,d.c=t.c;p<m;p++)s=t.v[p][0]+(l[0]-t.v[p][0])*o,i=t.v[p][1]+(l[1]-t.v[p][1])*o,r=t.o[p][0]+-((l[0]-t.o[p][0])*o),a=t.o[p][1]+-((l[1]-t.o[p][1])*o),n=t.i[p][0]+-((l[0]-t.i[p][0])*o),h=t.i[p][1]+-((l[1]-t.i[p][1])*o),d.setTripleAt(s,i,r,a,n,h,p);return d}processShapes(t){let{length:e}=this.shapes||[],s=this.amount?.v;if(0!==s){let i,r,a;for(let n=0;n<e;n++){if(a=(r=this.shapes?.[n]).localShapeCollection,!(!r.shape?._mdf&&!this._mdf&&!t)){a?.releaseShapes(),r.shape._mdf=!0,i=r.shape?.paths?.shapes;let t=r.shape?.paths?._length||0;for(let e=0;e<t;e++)a?.addShape(this.processPath(i[e],s))}r.localShapeCollection&&(r.shape.paths=r.localShapeCollection)}}this.dynamicProperties?.length||(this._mdf=!1)}}),rr("rp",class extends rg{addShapeToModifier(t){t.pathsData=[]}applyTransforms(t,e,s,i,r,a){if(!i.s||!i.p||!i.a||!i.r)throw Error(`${this.constructor.name}: Missing required data from Transform`);let n=a?-1:1,h=i.s.v[0]+(1-i.s.v[0])*(1-r),o=i.s.v[1]+(1-i.s.v[1])*(1-r);t.translate(i.p.v[0]*n*r,i.p.v[1]*n*r,i.p.v[2]),e.translate(-i.a.v[0],-i.a.v[1],i.a.v[2]),e.rotate(-i.r.v*n*r),e.translate(i.a.v[0],i.a.v[1],i.a.v[2]),s.translate(-i.a.v[0],-i.a.v[1],i.a.v[2]),s.scale(a?1/h:h,a?1/o:o),s.translate(i.a.v[0],i.a.v[1],i.a.v[2])}changeGroupRender(t,e){let{length:s}=t;for(let i=0;i<s;i++)t[i]._render=e,"gr"===t[i].ty&&this.changeGroupRender(t[i].it,e)}cloneElements(t){let e=JSON.parse(JSON.stringify(t));return this.resetElements(e),e}init(t,e,s,i=[]){if(!Array.isArray(e))throw Error(`${this.constructor.name}: Method init, param arr must be array`);let r=Number(s);for(this.elem=t,this.arr=e,this.pos=r,this.elemsData=i,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e[r]);r>0;)r--,this._elements.unshift(e[r]);if(this.dynamicProperties?.length){this.k=!0;return}this.getValue(!0)}initModifierProperties(t,e){this.getValue=this.processKeys,this.c=sK(t,e.c,0,null,this),this.o=sK(t,e.o,0,null,this),e.tr&&(this.tr=new it(t,e.tr,this),this.so=sK(t,e.tr.so,0,.01,this),this.eo=sK(t,e.tr.eo,0,.01,this)),this.data=e,this.dynamicProperties?.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new s7,this.rMatrix=new s7,this.sMatrix=new s7,this.tMatrix=new s7,this.matrix=new s7}processShapes(t){let e,s,i,r,a,n,h=!1;if(!this._mdf&&!t){for(n=Number(this._currentCopies),r=0,a=1;n;)(s=this.elemsData?.[r].it)&&(i=s[s.length-1].transform.mProps.v.props,s[s.length-1].transform.mProps._mdf=!1,s[s.length-1].transform.op._mdf=!1,n--,r+=a);return h}let o=Math.ceil(Number(this.c?.v));if(this._groups.length<o){for(;this._groups.length<o;){let t={it:this.cloneElements(this._elements),ty:"gr"};t.it?.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{e:0,s:0,t:0},{e:0,s:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:tB.Transform}),this.arr.splice(0,0,t),this._groups.splice(0,0,t),this._currentCopies?this._currentCopies++:this._currentCopies=1}this.elem?.reloadShapes(),h=!0}n=0;let l=!1,m=this._groups.length-1;for(r=0;r<=m-1;r++){if(l=n<o,this._groups[r]&&(this._groups[r]._render=l),this.changeGroupRender(this._groups[r].it||[],l),!l){let t=this.elemsData[r].it,e=t[t.length-1];0===e.transform.op.v?e.transform.op._mdf=!1:(e.transform.op._mdf=!0,e.transform.op.v=0)}n++}if(this._currentCopies=o,!this.matrix||!this.pMatrix||!this.rMatrix||!this.sMatrix||!this.tMatrix)throw Error(`${this.constructor.name}: Could not set Matrix`);if(!this.tr)throw Error(`${this.constructor.name}: Transformproperty is not set`);let p=Number(this.o?.v),d=p%1,c=p>0?Math.floor(p):Math.ceil(p),u=this.pMatrix.props,f=this.rMatrix.props,g=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();let y=0;if(p>0){for(;y<c;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),y++;d&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,d,!1),y+=d)}else if(p<0){for(;y>c;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),y--;d&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-d,!0),y-=d)}for(r=this.data?.m===1?0:this._currentCopies-1,a=this.data?.m===1?1:-1,n=this._currentCopies;n;){let{length:t}=i=(s=this.elemsData[r].it)[s.length-1].transform.mProps.v.props;if(s[s.length-1].transform.mProps._mdf=!0,s[s.length-1].transform.op._mdf=!0,s[s.length-1].transform.op.v=1===this._currentCopies?Number(this.so?.v):Number(this.so?.v)+(Number(this.eo?.v)-Number(this.so?.v))*(r/(this._currentCopies-1)),0===y)for(this.matrix.reset(),e=0;e<t;e++)i[e]=this.matrix.props[e];else{for((0!==r&&1===a||r!==this._currentCopies-1&&-1===a)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15]),this.matrix.transform(g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],g[8],g[9],g[10],g[11],g[12],g[13],g[14],g[15]),this.matrix.transform(u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8],u[9],u[10],u[11],u[12],u[13],u[14],u[15]),e=0;e<t;e++)i[e]=this.matrix.props[e];this.matrix.reset()}y++,n--,r+=a}return h}resetElements(t){let{length:e}=t;for(let s=0;s<e;s++)t[s]._processed=!1,"gr"===t[s].ty&&this.resetElements(t[s].it)}constructor(...t){super(...t),this.arr=[],this.elemsData=[],this._elements=[],this._groups=[]}}),rr("rd",class extends rg{initModifierProperties(t,e){this.getValue=this.processKeys,this.rd=sK(t,e.r,0,null,this),this._isAnimated=!!this.rd?.effectsSequence.length}processPath(t,e){let s=iE();s.c=t.c;let i=t._length,r,a,n,h,o,l,m=0,p,d,c,u,f,g;for(let y=0;y<i;y++)r=t.v[y],n=t.o[y],a=t.i[y],r[0]===n[0]&&r[1]===n[1]&&r[0]===a[0]&&r[1]===a[1]?0!==y&&y!==i-1||t.c?(h=0===y?t.v[i-1]:t.v[y-1],l=(o=Math.sqrt(Math.pow(r[0]-h[0],2)+Math.pow(r[1]-h[1],2)))?Math.min(o/2,e)/o:0,p=f=r[0]+(h[0]-r[0])*l,d=g=r[1]-(r[1]-h[1])*l,c=p-(p-r[0])*.5519,u=d-(d-r[1])*.5519,s.setTripleAt(p,d,c,u,f,g,m),m+=1,h=y===i-1?t.v[0]:t.v[y+1],l=(o=Math.sqrt(Math.pow(r[0]-h[0],2)+Math.pow(r[1]-h[1],2)))?Math.min(o/2,e)/o:0,p=c=r[0]+(h[0]-r[0])*l,d=u=r[1]+(h[1]-r[1])*l,f=p-(p-r[0])*.5519,g=d-(d-r[1])*.5519,s.setTripleAt(p,d,c,u,f,g,m)):s.setTripleAt(r[0],r[1],n[0],n[1],a[0],a[1],m):s.setTripleAt(t.v[y][0],t.v[y][1],t.o[y][0],t.o[y][1],t.i[y][0],t.i[y][1],m),m+=1;return s}processShapes(t){let{length:e}=this.shapes||[],s=this.rd?.v;if(0!==s){let i,r,a;for(let n=0;n<e;n++){if(a=(i=this.shapes?.[n]).localShapeCollection,!(!i.shape?._mdf&&!this._mdf&&!t)){a?.releaseShapes(),i.shape._mdf=!0,r=i.shape?.paths?.shapes||[];let t=i.shape?.paths?._length||0;for(let e=0;e<t;e++)a?.addShape(this.processPath(r[e],s))}i.shape.paths=i.localShapeCollection}}this.dynamicProperties?.length||(this._mdf=!1)}}),rr("zz",class extends rg{initModifierProperties(t,e){this.getValue=this.processKeys,this.amplitude=sK(t,e.s,0,null,this),this.frequency=sK(t,e.r,0,null,this),this.pointsType=sK(t,e.pt,0,null,this),this._isAnimated=this.amplitude?.effectsSequence.length!==0||this.frequency?.effectsSequence.length!==0||this.pointsType?.effectsSequence.length!==0}processPath(t,e,s,i){let r=t._length,a=iE();if(a.c=t.c,t.c||(r-=1),0===r)return a;let n=-1,h=t5(t,0);ry(a,t,0,e,s,i,n);for(let o=0;o<r;o++)n=function(t,e,s,i,r,a){let n=a;for(let a=0;a<i;a++){let h=(a+1)/(i+1),o=2===r?Math.sqrt(Math.pow(e.points[3][0]-e.points[0][0],2)+Math.pow(e.points[3][1]-e.points[0][1],2)):0,l=e.normalAngle(h);eJ(t,e.point(h),l,n,s,o/((i+1)*2),o/((i+1)*2)),n=-n}return n}(a,h,e,s,i,-n),h=o!==r-1||t.c?t5(t,(o+1)%r):null,ry(a,t,o+1,e,s,i,n);return a}processShapes(t){if(!this.shapes)throw Error(`${this.constructor.name}: shapes is not initialized`);let e=Number(this.amplitude?.v),s=Math.max(0,Math.round(Number(this.frequency?.v))),i=Number(this.pointsType?.v);if(0!==e){let r,a,n,{length:h}=this.shapes;for(let o=0;o<h;o++){if(a=(r=this.shapes[o]).localShapeCollection,!(!r.shape?._mdf&&!this._mdf&&!t)){a?.releaseShapes(),r.shape._mdf=!0,n=r.shape?.paths?.shapes||[];let{_length:t}=r.shape?.paths||{_length:0};for(let r=0;r<t;r++)a?.addShape(this.processPath(n[r],e,s,i))}r.shape.paths=r.localShapeCollection}}this.dynamicProperties?.length||(this._mdf=!1)}}),rr("op",class extends rg{initModifierProperties(t,e){this.getValue=this.processKeys,this.amount=sK(t,e.a,0,null,this),this.miterLimit=sK(t,e.ml,0,null,this),this.lineJoin=e.lj,this._isAnimated=this.amount?.effectsSequence.length!==0}processPath(t,e,s,i){let r=iE();r.c=t.c;let a=t.length();t.c||(a-=1);let n,h=[];for(let s=0;s<a;s++)n=t5(t,s),h.push(eR(n,e));if(!t.c)for(let s=a-1;s>=0;s--)n=function(t,e){let s=(e+1)%t.length();return new t3(t.v[s],t.i[s],t.o[e],t.v[e],!0)}(t,s),h.push(eR(n,e));h=eG(h);let o=null,l=null,{length:m}=h;for(let t=0;t<m;t++){let e=h[t];l&&(o=eI(r,l,e[0],s,i)),l=e[e.length-1];let{length:a}=e;for(let t=0;t<a;t++)n=e[t],o&&ej(n.points[0],o)?r.setXYAt(n.points[1][0],n.points[1][1],"o",r.length()-1):r.setTripleAt(n.points[0][0],n.points[0][1],n.points[1][0],n.points[1][1],n.points[0][0],n.points[0][1],r.length()),r.setTripleAt(n.points[3][0],n.points[3][1],n.points[3][0],n.points[3][1],n.points[2][0],n.points[2][1],r.length()),o=n.points[3]}return h.length&&eI(r,l,h[0][0],s,i),r}processShapes(t){let{length:e}=this.shapes||[],s=Number(this.amount?.v),i=Number(this.miterLimit?.v),r=Number(this.lineJoin);if(0!==s){let a,n,h;for(let o=0;o<e;o++){if(h=(n=this.shapes?.[o]).localShapeCollection,!(!n.shape?._mdf&&!this._mdf&&!t)){h?.releaseShapes(),n.shape._mdf=!0,a=n.shape?.paths?.shapes;let t=n.shape?.paths?._length||0;for(let e=0;e<t;e++)h?.addShape(this.processPath(a[e],s,r,i))}n.shape.paths=n.localShapeCollection}}this.dynamicProperties?.length||(this._mdf=!1)}});class r_ extends tz{static get observedAttributes(){return["animateOnScroll","autoplay","controls","direction","hover","loop","mode","speed","src","subframe"]}static get observedProperties(){return["playerState","_isSettingsOpen","_seeker","_currentAnimation","_animations"]}static get styles(){let t=new CSSStyleSheet;return t.replace("* {\n  box-sizing: border-box;\n}\n\n:host {\n  --lottie-player-toolbar-height: 35px;\n  --lottie-player-toolbar-background-color: #fff;\n  --lottie-player-toolbar-icon-color: #000;\n  --lottie-player-toolbar-icon-hover-color: #000;\n  --lottie-player-toolbar-icon-active-color: #4285f4;\n  --lottie-player-seeker-track-color: rgb(0 0 0 / 20%);\n  --lottie-player-seeker-thumb-color: #4285f4;\n  --lottie-player-seeker-display: block;\n\n  width: 100%;\n  height: 100%;\n\n  &:not([hidden]) {\n    display: block;\n  }\n\n  .main {\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n    width: 100%;\n    margin: 0;\n    padding: 0;\n  }\n\n  .animation {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    margin: 0;\n    padding: 0;\n  }\n\n  [data-controls='true'] .animation {\n    height: calc(100% - 35px);\n  }\n\n  .animation-container {\n    position: relative;\n  }\n\n  .popover {\n    position: absolute;\n    right: 5px;\n    bottom: 40px;\n    background-color: var(--lottie-player-toolbar-background-color);\n    border-radius: 5px;\n    padding: 10px 15px;\n    border: solid 2px var(--lottie-player-toolbar-icon-color);\n    animation: fade-in 0.2s ease-in-out;\n\n    &::before {\n      content: '';\n      right: 10px;\n      border: 7px solid transparent;\n      margin-right: -7px;\n      height: 0;\n      width: 0;\n      position: absolute;\n      pointer-events: none;\n      top: 100%;\n      border-top-color: var(--lottie-player-toolbar-icon-color);\n    }\n  }\n\n  .error {\n    display: flex;\n    margin: auto;\n    justify-content: center;\n    height: 100%;\n    align-items: center;\n\n    & svg {\n      width: 100%;\n      height: auto;\n    }\n  }\n\n  .toolbar {\n    display: flex;\n    place-items: center center;\n    background: var(--lottie-player-toolbar-background-color);\n    margin: 0;\n    height: 35px;\n    padding: 5px;\n    border-radius: 5px;\n    gap: 5px;\n\n    &.has-error {\n      pointer-events: none;\n      opacity: 0.5;\n    }\n\n    & button {\n      cursor: pointer;\n      fill: var(--lottie-player-toolbar-icon-color);\n      color: var(--lottie-player-toolbar-icon-color);\n      background: none;\n      border: 0;\n      padding: 0;\n      outline: 0;\n      height: 100%;\n      margin: 0;\n      align-items: center;\n      gap: 5px;\n      opacity: 0.9;\n\n      &:not([hidden]) {\n        display: flex;\n      }\n\n      &:hover {\n        opacity: 1;\n      }\n\n      &[data-active='true'] {\n        opacity: 1;\n        fill: var(--lottie-player-toolbar-icon-active-color);\n      }\n\n      &:disabled {\n        opacity: 0.5;\n      }\n\n      &:focus {\n        outline: 0;\n      }\n\n      & svg {\n        pointer-events: none;\n\n        & > * {\n          fill: inherit;\n        }\n      }\n\n      &.disabled svg {\n        display: none;\n      }\n    }\n  }\n\n  .progress-container {\n    position: relative;\n    width: 100%;\n\n    &.simple {\n      margin-right: 12px;\n    }\n  }\n\n  .seeker {\n    appearance: none;\n    outline: none;\n    width: 100%;\n    height: 20px;\n    border-radius: 3px;\n    border: 0;\n    cursor: pointer;\n    background-color: transparent;\n\n    display: var(--lottie-player-seeker-display);\n    color: var(--lottie-player-seeker-thumb-color);\n    margin: 0;\n    padding: 7.5px 0;\n    position: relative;\n    z-index: 1;\n\n    &::-webkit-slider-runnable-track,\n    &::-webkit-slider-thumb {\n      appearance: none;\n      outline: none;\n    }\n\n    &::-webkit-slider-thumb {\n      height: 15px;\n      width: 15px;\n      border-radius: 50%;\n      border: 0;\n      background-color: var(--lottie-player-seeker-thumb-color);\n      cursor: pointer;\n      -webkit-transition: transform 0.2s ease-in-out;\n      transition: transform 0.2s ease-in-out;\n      transform: scale(0);\n    }\n\n    &:hover::-webkit-slider-thumb,\n    &:focus::-webkit-slider-thumb {\n      transform: scale(1);\n    }\n\n    &::-moz-range-progress {\n      background-color: var(--lottie-player-seeker-thumb-color);\n      height: 5px;\n      border-radius: 3px;\n    }\n\n    &::-moz-range-thumb {\n      height: 15px;\n      width: 15px;\n      border-radius: 50%;\n      background-color: var(--lottie-player-seeker-thumb-color);\n      border: 0;\n      cursor: pointer;\n      -moz-transition: transform 0.2s ease-in-out;\n      transition: transform 0.2s ease-in-out;\n      transform: scale(0);\n    }\n\n    &:hover::-moz-range-thumb,\n    &:focus::-moz-range-thumb {\n      transform: scale(1);\n    }\n\n    &::-ms-track {\n      width: 100%;\n      height: 5px;\n      cursor: pointer;\n      background: transparent;\n      border-color: transparent;\n      color: transparent;\n    }\n\n    &::-ms-fill-upper {\n      background: var(--lottie-player-seeker-track-color);\n      border-radius: 3px;\n    }\n\n    &::-ms-fill-lower {\n      background-color: var(--lottie-player-seeker-thumb-color);\n      border-radius: 3px;\n    }\n\n    &::-ms-thumb {\n      border: 0;\n      height: 15px;\n      width: 15px;\n      border-radius: 50%;\n      background: var(--lottie-player-seeker-thumb-color);\n      cursor: pointer;\n      -ms-transition: transform 0.2s ease-in-out;\n      transition: transform 0.2s ease-in-out;\n      transform: scale(0);\n    }\n\n    &:hover::-ms-thumb {\n      transform: scale(1);\n    }\n\n    &:focus {\n      &::-ms-thumb {\n        transform: scale(1);\n      }\n\n      &::-ms-fill-lower,\n      &::-ms-fill-upper {\n        background: var(--lottie-player-seeker-track-color);\n      }\n    }\n  }\n\n  & progress {\n    appearance: none;\n    outline: none;\n    position: absolute;\n    width: 100%;\n    height: 5px;\n    border-radius: 3px;\n    border: 0;\n    top: 0;\n    left: 0;\n    margin: 7.5px 0;\n    background-color: var(--lottie-player-seeker-track-color);\n    pointer-events: none;\n\n    &::-webkit-progress-inner-element {\n      border-radius: 3px;\n      overflow: hidden;\n    }\n\n    &::-webkit-slider-runnable-track {\n      background-color: transparent;\n    }\n\n    &::-webkit-progress-value {\n      background-color: var(--lottie-player-seeker-thumb-color);\n    }\n  }\n\n  & *::-moz-progress-bar {\n    background-color: var(--lottie-player-seeker-thumb-color);\n  }\n}\n\n@keyframes fade-in {\n  0% {\n    opacity: 0;\n  }\n\n  100% {\n    opacity: 1;\n  }\n}\n\n@media (prefers-color-scheme: dark) {\n  :host {\n    --lottie-player-toolbar-background-color: #000;\n    --lottie-player-toolbar-icon-color: #fff;\n    --lottie-player-toolbar-icon-hover-color: #fff;\n    --lottie-player-seeker-track-color: rgb(255 255 255 / 60%);\n  }\n}\n"),t}set animateOnScroll(t){this.setAttribute("animateOnScroll",(!!t).toString())}get animateOnScroll(){let t=this.getAttribute("animateOnScroll");return"true"===t||""===t||"1"===t}set autoplay(t){this.setAttribute("autoplay",(!!t).toString())}get autoplay(){let t=this.getAttribute("autoplay");return"true"===t||""===t||"1"===t}set background(t){this.setAttribute("background",t)}get background(){return this.getAttribute("background")||"transparent"}set controls(t){this.setAttribute("controls",(!!t).toString())}get controls(){let t=this.getAttribute("controls");return"true"===t||""===t||"1"===t}set count(t){this.setAttribute("count",t.toString())}get count(){let t=this.getAttribute("count");return t?Number(t):0}set description(t){t&&this.setAttribute("description",t)}get description(){return this.getAttribute("description")}set direction(t){this.setAttribute("direction",t.toString())}get direction(){let t=Number(this.getAttribute("direction"));return -1===t?t:1}set hover(t){this.setAttribute("hover",t.toString())}get hover(){let t=this.getAttribute("hover");return"true"===t||""===t||"1"===t}set intermission(t){this.setAttribute("intermission",t.toString())}get intermission(){let t=Number(this.getAttribute("intermission"));return isNaN(t)?0:t}set loop(t){this.setAttribute("loop",(!!t).toString())}get loop(){let t=this.getAttribute("loop");return"true"===t||""===t||"1"===t}set mode(t){this.setAttribute("mode",t.toString())}get mode(){let t=this.getAttribute("mode");return t===y.Bounce?t:y.Normal}set objectfit(t){this.setAttribute("objectfit",t)}get objectfit(){let t=this.getAttribute("objectfit");return t&&Object.values(f).includes(t)?t:f.Contain}set preserveAspectRatio(t){this.setAttribute("preserveAspectRatio",t||v.Contain)}get preserveAspectRatio(){let t=this.getAttribute("preserveAspectRatio");return t&&Object.values(v).includes(t)?t:null}set simple(t){this.setAttribute("simple",t.toString())}get simple(){let t=this.getAttribute("simple");return"true"===t||""===t||"1"===t}set speed(t){this.setAttribute("speed",t?.toString())}get speed(){let t=this.getAttribute("speed");return null===t||isNaN(Number(t))?1:Number(t)}set src(t){this.setAttribute("src",t||"")}get src(){return this.getAttribute("src")}set subframe(t){this.setAttribute("subframe",(!!t).toString())}get subframe(){let t=this.getAttribute("subframe");return"true"===t||""===t||"1"===t}constructor(){super(),this.playerState=g.Loading,this._container=null,this._errorMessage="Something went wrong",this._identifier=this.id||w(),this._isSettingsOpen=!1,this._playerState={count:0,loaded:!1,prev:g.Loading,scrollTimeout:null,scrollY:0,visible:!1},this._render=tR,this._renderControls=tO,this._seeker=0,this._animations=[],this._currentAnimation=0,this._isBounce=!1,this._lottieInstance=null,this._multiAnimationSettings=[],this._handleSettingsClick=({target:t})=>{this._toggleSettings(),t instanceof HTMLElement&&t.focus()},this._complete=this._complete.bind(this),this._dataFailed=this._dataFailed.bind(this),this._dataReady=this._dataReady.bind(this),this._DOMLoaded=this._DOMLoaded.bind(this),this._enterFrame=this._enterFrame.bind(this),this._freeze=this._freeze.bind(this),this._handleBlur=this._handleBlur.bind(this),this._handleScroll=this._handleScroll.bind(this),this._handleSeekChange=this._handleSeekChange.bind(this),this._handleWindowBlur=this._handleWindowBlur.bind(this),this._loopComplete=this._loopComplete.bind(this),this._mouseEnter=this._mouseEnter.bind(this),this._mouseLeave=this._mouseLeave.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._switchInstance=this._switchInstance.bind(this),this.togglePlay=this.togglePlay.bind(this),this.stop=this.stop.bind(this),this.prev=this.prev.bind(this),this.next=this.next.bind(this),this.snapshot=this.snapshot.bind(this),this.toggleLoop=this.toggleLoop.bind(this),this.toggleBoomerang=this.toggleBoomerang.bind(this),this.destroy=this.destroy.bind(this),this.template=document.createElement("template"),this.shadow=this.attachShadow({mode:"open"})}async attributeChangedCallback(t,e,s){if(this._lottieInstance){if("animateOnScroll"===t){if(""===s||s){this._lottieInstance.autoplay=!1,addEventListener("scroll",this._handleScroll,{capture:!0,passive:!0});return}removeEventListener("scroll",this._handleScroll,!0)}if("autoplay"===t){if(this.animateOnScroll)return;if(""===s||s){this.play();return}this.stop()}if("controls"===t&&this._renderControls(),"direction"===t){if(-1===Number(s))return this.setDirection(-1);this.setDirection(1)}if("hover"===t&&this._container){if(""===s||s){this._container.addEventListener("mouseenter",this._mouseEnter),this._container.addEventListener("mouseleave",this._mouseLeave);return}this._container.removeEventListener("mouseenter",this._mouseEnter),this._container.removeEventListener("mouseleave",this._mouseLeave)}if("loop"===t){let t=this.shadow.querySelector(".toggleLoop");t instanceof HTMLButtonElement&&(t.dataset.active=s),this.setLoop(""===s||!!s)}if("mode"===t){let t=this.shadow.querySelector(".toggleBoomerang");t instanceof HTMLButtonElement&&(t.dataset.active=(s===y.Bounce).toString()),this._isBounce=s===y.Bounce}if("speed"===t){let t=Number(s);t&&!isNaN(t)&&this.setSpeed(t)}"src"===t&&await this.load(s),"subframe"===t&&this.setSubframe(""===s||!!s)}}async connectedCallback(){super.connectedCallback(),this._render(),this._container=this.shadow.querySelector(".animation"),this._renderControls(),void 0!==document.hidden&&document.addEventListener("visibilitychange",this._onVisibilityChange),this._addIntersectionObserver(),await this.load(this.src),this.dispatchEvent(new CustomEvent(b.Rendered))}destroy(){this._lottieInstance&&(this.playerState=g.Destroyed,this._lottieInstance.destroy(),this._lottieInstance=null,this.dispatchEvent(new CustomEvent(b.Destroyed)),this.remove(),document.removeEventListener("visibilitychange",this._onVisibilityChange))}disconnectedCallback(){this._intersectionObserver&&(this._intersectionObserver.disconnect(),this._intersectionObserver=void 0),this._lottieInstance&&this._lottieInstance.destroy(),document.removeEventListener("visibilitychange",this._onVisibilityChange)}getLottie(){return this._lottieInstance}getManifest(){return this._manifest}getMultiAnimationSettings(){return this._multiAnimationSettings}getSegment(){return this._segment}async load(t){if(!this.shadowRoot||!t)return;try{let{animations:e,manifest:s}=await tw(t);if(!e||e.some(t=>!this._isLottie(t)))throw Error("Broken or corrupted file");this._isBounce=this.mode===y.Bounce,this._multiAnimationSettings?.length&&this._multiAnimationSettings[this._currentAnimation]?.mode&&(this._isBounce=this._multiAnimationSettings[this._currentAnimation].mode===y.Bounce),this._animations=e,this._manifest=s??{animations:[{autoplay:!this.animateOnScroll&&this.autoplay,direction:this.direction,id:w(),loop:this.loop,mode:this.mode,speed:this.speed}]},this._lottieInstance&&this._lottieInstance.destroy(),this.playerState=g.Stopped,!this.animateOnScroll&&(this.autoplay||this._multiAnimationSettings?.[this._currentAnimation]?.autoplay)&&(this.playerState=g.Playing),tN()||(this._lottieInstance=rb.loadAnimation({...this._getOptions(),animationData:e[this._currentAnimation]}))}catch(t){this._errorMessage=tx(t).message,this.playerState=g.Error,this.dispatchEvent(new CustomEvent(b.Error));return}this._addEventListeners();let e=this._multiAnimationSettings?.[this._currentAnimation]?.speed??this.speed??this._manifest.animations[this._currentAnimation].speed,s=this._multiAnimationSettings?.[this._currentAnimation]?.direction??this.direction??this._manifest.animations[this._currentAnimation].direction??1;this._lottieInstance?.setSpeed(e),this._lottieInstance?.setDirection(s),this._lottieInstance?.setSubframe(!!this.subframe),(this.autoplay||this.animateOnScroll)&&(-1===this.direction&&this.seek("99%"),"IntersectionObserver"in window||(this.animateOnScroll||this.play(),this._playerState.visible=!0),this._addIntersectionObserver())}next(){this._currentAnimation++,this._switchInstance()}pause(){if(this._lottieInstance){this.playerState&&(this._playerState.prev=this.playerState);try{this._lottieInstance.pause(),this.dispatchEvent(new CustomEvent(b.Pause))}finally{this.playerState=g.Paused}}}async play(){if(this._lottieInstance){this.playerState&&(this._playerState.prev=this.playerState);try{this._lottieInstance.play(),this.dispatchEvent(new CustomEvent(b.Play))}finally{this.playerState=g.Playing}}}prev(){this._currentAnimation--,this._switchInstance(!0)}propertyChangedCallback(t,e,s){if(!this.shadow)return;let i=this.shadow.querySelector(".togglePlay"),r=this.shadow.querySelector(".stop"),a=this.shadow.querySelector(".prev"),n=this.shadow.querySelector(".next"),h=this.shadow.querySelector(".seeker"),o=this.shadow.querySelector("progress"),l=this.shadow.querySelector(".popover");i instanceof HTMLButtonElement&&r instanceof HTMLButtonElement&&n instanceof HTMLButtonElement&&a instanceof HTMLButtonElement&&h instanceof HTMLInputElement&&o instanceof HTMLProgressElement&&("playerState"===t&&(i.dataset.active=(s===g.Playing||s===g.Paused).toString(),r.dataset.active=(s===g.Stopped).toString(),s===g.Playing?i.innerHTML='<svg width="24" height="24" aria-hidden="true" focusable="false"><path d="M14.016 5.016H18v13.969h-3.984V5.016zM6 18.984V5.015h3.984v13.969H6z"/></svg>':i.innerHTML='<svg width="24" height="24" aria-hidden="true" focusable="false"><path d="M8.016 5.016L18.985 12 8.016 18.984V5.015z"/></svg>'),"_seeker"===t&&"number"==typeof s&&(h.value=s.toString(),h.ariaValueNow=s.toString(),o.value=s),"_animations"===t&&Array.isArray(s)&&this._currentAnimation+1<s.length&&(n.hidden=!1),"_currentAnimation"===t&&"number"==typeof s&&(s+1>=this._animations.length?n.hidden=!0:n.hidden=!1,s?a.hidden=!1:a.hidden=!0),"_isSettingsOpen"===t&&"boolean"==typeof s&&l instanceof HTMLDivElement&&(l.hidden=!s))}async reload(){this._lottieInstance&&this.src&&(this._lottieInstance.destroy(),await this.load(this.src))}seek(t){if(!this._lottieInstance)return;let e=t.toString().match(/^([0-9]+)(%?)$/);if(!e)return;let s=Math.round("%"===e[2]?this._lottieInstance.totalFrames*Number(e[1])/100:Number(e[1]));if(this._seeker=s,this.playerState===g.Playing||this.playerState===g.Frozen&&this._playerState.prev===g.Playing){this._lottieInstance.goToAndPlay(s,!0),this.playerState=g.Playing;return}this._lottieInstance.goToAndStop(s,!0),this._lottieInstance.pause()}setCount(t){this.count=t}setDirection(t){this._lottieInstance&&this._lottieInstance.setDirection(t)}setLoop(t){this._lottieInstance&&this._lottieInstance.setLoop(t)}setMultiAnimationSettings(t){this._multiAnimationSettings=t}setSegment(t){this._segment=t}setSpeed(t=1){this._lottieInstance&&this._lottieInstance.setSpeed(t)}setSubframe(t){this._lottieInstance&&this._lottieInstance.setSubframe(t)}snapshot(t=!0,e="AM Lottie"){try{if(!this.shadowRoot)throw Error("Unknown error");let s=this.shadowRoot.querySelector(".animation svg");if(!s)throw Error("Could not retrieve animation from DOM");let i=s instanceof Node?new XMLSerializer().serializeToString(s):null;if(!i)throw Error("Could not serialize SVG element");return t&&tv(i,{mimeType:"image/svg+xml",name:`${tk(this.src||e)}-${t_(this._seeker)}.svg`}),i}catch(t){return console.error(t),null}}stop(){if(this._lottieInstance){this.playerState&&(this._playerState.prev=this.playerState),this._playerState.count=0;try{this._lottieInstance.stop(),this.dispatchEvent(new CustomEvent(b.Stop))}finally{this.playerState=g.Stopped}}}toggleBoomerang(){let t=this._multiAnimationSettings?.[this._currentAnimation];if(t?.mode!==void 0){if(t.mode===y.Normal){t.mode=y.Bounce,this._isBounce=!0;return}t.mode=y.Normal,this._isBounce=!1;return}if(this.mode===y.Normal){this.mode=y.Bounce,this._isBounce=!0;return}this.mode=y.Normal,this._isBounce=!1}toggleLoop(){let t=!this.loop;this.loop=t,this.setLoop(t)}togglePlay(){if(!this._lottieInstance)return;let{currentFrame:t,playDirection:e,totalFrames:s}=this._lottieInstance;return this.playerState===g.Playing?this.pause():this.playerState!==g.Completed?this.play():(this.playerState=g.Playing,this._isBounce)?(this.setDirection(-1*e),this._lottieInstance.goToAndPlay(t,!0)):-1===e?this._lottieInstance.goToAndPlay(s,!0):this._lottieInstance.goToAndPlay(0,!0)}_freeze(){if(this._lottieInstance){this.playerState&&(this._playerState.prev=this.playerState);try{this._lottieInstance.pause(),this.dispatchEvent(new CustomEvent(b.Freeze))}finally{this.playerState=g.Frozen}}}_handleBlur(){setTimeout(()=>this._toggleSettings(!1),200)}_handleSeekChange({target:t}){!(!(t instanceof HTMLInputElement)||!this._lottieInstance||isNaN(Number(t.value)))&&this.seek(Math.round(Number(t.value)/100*this._lottieInstance.totalFrames))}_addEventListeners(){this._toggleEventListeners("add")}_addIntersectionObserver(){this._container&&!this._intersectionObserver&&"IntersectionObserver"in window&&(this._intersectionObserver=new IntersectionObserver(t=>{let{length:e}=t;for(let s=0;s<e;s++){if(!t[s].isIntersecting||document.hidden){this.playerState===g.Playing&&this._freeze(),this._playerState.visible=!1;continue}this.animateOnScroll||this.playerState!==g.Frozen||this.play(),this._playerState.scrollY||(this._playerState.scrollY=scrollY),this._playerState.visible=!0}}),this._intersectionObserver.observe(this._container))}_complete(){if(!this._lottieInstance)return;if(this._animations.length>1){if(this._multiAnimationSettings?.[this._currentAnimation+1]?.autoplay)return this.next();if(this.loop&&this._currentAnimation===this._animations.length-1)return this._currentAnimation=0,this._switchInstance()}let{currentFrame:t,totalFrames:e}=this._lottieInstance;this._seeker=Math.round(t/e*100),this.playerState=g.Completed,this.dispatchEvent(new CustomEvent(b.Complete,{detail:{frame:t,seeker:this._seeker}}))}_dataFailed(){this.playerState=g.Error,this.dispatchEvent(new CustomEvent(b.Error))}_dataReady(){this.dispatchEvent(new CustomEvent(b.Load))}_DOMLoaded(){this._playerState.loaded=!0,this.dispatchEvent(new CustomEvent(b.Ready))}_enterFrame(){if(!this._lottieInstance)return;let{currentFrame:t,totalFrames:e}=this._lottieInstance;this._seeker=Math.round(t/e*100),this.dispatchEvent(new CustomEvent(b.Frame,{detail:{frame:t,seeker:this._seeker}}))}_getOptions(){if(!this._container)throw Error("Container not rendered");let t=this.preserveAspectRatio??(this.objectfit&&tb(this.objectfit)),e=this._multiAnimationSettings?.length?this._multiAnimationSettings?.[this._currentAnimation]:void 0,s=this._manifest?.animations?.[this._currentAnimation],i=!!this.loop;s?.loop!==void 0&&void 0===this.loop&&(i=!!s.loop),e?.loop!==void 0&&(i=!!e.loop);let r=!!this.autoplay;s?.autoplay!==void 0&&void 0===this.autoplay&&(r=!!s.autoplay),e?.autoplay!==void 0&&(r=!!e.autoplay),this.animateOnScroll&&(r=!1);let a=this._segment;return this._segment?.every(t=>t>0)&&(a=[this._segment[0]-1,this._segment[1]-1]),this._segment?.some(t=>t<0)&&(a=void 0),{autoplay:r,container:this._container,initialSegment:a,loop:i,renderer:_.SVG,rendererSettings:{hideOnTransparent:!0,imagePreserveAspectRatio:t,preserveAspectRatio:t,progressiveLoad:!0}}}_handleScroll(){if(this.animateOnScroll&&this._lottieInstance){if(tN()){console.warn("DotLottie: Scroll animations might not work properly in a Server Side Rendering context. Try to wrap this in a client component.");return}if(this._playerState.visible){this._playerState.scrollTimeout&&clearTimeout(this._playerState.scrollTimeout),this._playerState.scrollTimeout=setTimeout(()=>{this.playerState=g.Paused},400);let t=Math.min(Math.max((scrollY>this._playerState.scrollY?scrollY-this._playerState.scrollY:this._playerState.scrollY-scrollY)/3,1),3*this._lottieInstance.totalFrames)/3;window.requestAnimationFrame(()=>{t<(this._lottieInstance?.totalFrames??0)?(this.playerState=g.Playing,this._lottieInstance?.goToAndStop(t,!0)):this.playerState=g.Paused})}}}_handleWindowBlur({type:t}){this.playerState===g.Playing&&"blur"===t&&this._freeze(),this.playerState===g.Frozen&&"focus"===t&&this.play()}_isLottie(t){return["v","ip","op","layers","fr","w","h"].every(e=>Object.prototype.hasOwnProperty.call(t,e))}_loopComplete(){if(!this._lottieInstance)return;let{playDirection:t,totalFrames:e}=this._lottieInstance,s=this._segment?this._segment[0]:0,i=this._segment?this._segment[0]:e;if(this.count&&(this._isBounce?this._playerState.count+=.5:this._playerState.count+=1,this._playerState.count>=this.count)){this.setLoop(!1),this.playerState=g.Completed,this.dispatchEvent(new CustomEvent(b.Complete));return}return(this.dispatchEvent(new CustomEvent(b.Loop)),this._isBounce)?(this._lottieInstance.goToAndStop(-1===t?s:.99*i,!0),this._lottieInstance.setDirection(-1*t),setTimeout(()=>{this.animateOnScroll||this._lottieInstance?.play()},this.intermission)):(this._lottieInstance.goToAndStop(-1===t?.99*i:s,!0),setTimeout(()=>{this.animateOnScroll||this._lottieInstance?.play()},this.intermission))}_mouseEnter(){this.hover&&this.playerState!==g.Playing&&this.play()}_mouseLeave(){this.hover&&this.playerState===g.Playing&&this.stop()}_onVisibilityChange(){if(document.hidden&&this.playerState===g.Playing){this._freeze();return}this.playerState===g.Frozen&&this.play()}_removeEventListeners(){this._toggleEventListeners("remove")}_switchInstance(t=!1){if(this._animations[this._currentAnimation])try{if(this._lottieInstance?.destroy(),tN()||(this._lottieInstance=rb.loadAnimation({...this._getOptions(),animationData:this._animations[this._currentAnimation]})),this._multiAnimationSettings?.[this._currentAnimation]?.mode&&(this._isBounce=this._multiAnimationSettings[this._currentAnimation].mode===y.Bounce),this._removeEventListeners(),this._addEventListeners(),this.dispatchEvent(new CustomEvent(t?b.Previous:b.Next)),this._multiAnimationSettings?.[this._currentAnimation]?.autoplay??this.autoplay){if(this.animateOnScroll){this._lottieInstance?.goToAndStop(0,!0),this.playerState=g.Paused;return}this._lottieInstance?.goToAndPlay(0,!0),this.playerState=g.Playing;return}this._lottieInstance?.goToAndStop(0,!0),this.playerState=g.Stopped}catch(t){this._errorMessage=tx(t).message,this.playerState=g.Error,this.dispatchEvent(new CustomEvent(b.Error))}}_toggleEventListeners(t){let e="add"===t?"addEventListener":"removeEventListener";this._lottieInstance&&(this._lottieInstance[e]("enterFrame",this._enterFrame),this._lottieInstance[e]("complete",this._complete),this._lottieInstance[e]("loopComplete",this._loopComplete),this._lottieInstance[e]("DOMLoaded",this._DOMLoaded),this._lottieInstance[e]("data_ready",this._dataReady),this._lottieInstance[e]("data_failed",this._dataFailed)),this._container&&this.hover&&(this._container[e]("mouseenter",this._mouseEnter),this._container[e]("mouseleave",this._mouseLeave)),window[e]("focus",this._handleWindowBlur,{capture:!1,passive:!0}),window[e]("blur",this._handleWindowBlur,{capture:!1,passive:!0}),this.animateOnScroll&&window[e]("scroll",this._handleScroll,{capture:!0,passive:!0})}_toggleSettings(t){if(void 0===t){this._isSettingsOpen=!this._isSettingsOpen;return}this._isSettingsOpen=t}}tN()||(globalThis.dotLottiePlayer=()=>new r_,customElements.define("dotlottie-player",r_)),t.PlayMode=y,t.PlayerEvents=b,t.PlayerState=g,t.default=r_,t.tagName="dotlottie-player",Object.defineProperty(t,"__esModule",{value:!0})}(this["@aarsteinmedia/dotlottie-player-light"]=this["@aarsteinmedia/dotlottie-player-light"]||{});
