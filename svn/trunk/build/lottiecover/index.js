(()=>{var e,t={500:(e,t)=>{var n;!function(){"use strict";var l={}.hasOwnProperty;function o(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=i(e,a(n)))}return e}function a(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return o.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)l.call(e,n)&&e[n]&&(t=i(t,n));return t}function i(e,t){return t?e?e+" "+t:e+t:e}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},830:(e,t,n)=>{"use strict";const l=window.wp.blocks,o=window.wp.components,a=window.ReactJSXRuntime;function i(){return(0,a.jsxs)(o.SVG,{role:"img",viewBox:"0 0 80 80",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",children:[(0,a.jsx)("style",{children:"\n\t\t\t\t.am-lottieplayer-path {\n\t\t\t\t\tfill: url(#a)\n\t\t\t\t}\n\t\t\t\t.block-editor-block-toolbar .am-lottieplayer-path,\n\t\t\t\t.components-panel .am-lottieplayer-path {\n\t\t\t\t\tfill: var(--wp-admin-theme-color-darker-10)\n\t\t\t\t}"}),(0,a.jsx)("defs",{children:(0,a.jsxs)("radialGradient",{cx:".2",cy:"1.07",id:"a",r:"1.2",children:[(0,a.jsx)("stop",{offset:"10%",children:(0,a.jsx)("animate",{attributeName:"stop-color",dur:"12s",repeatCount:"indefinite",values:"#24708f;#e18d4c;#1f374c;#85c6e0;#24708f;"})}),(0,a.jsx)("stop",{offset:"90%",children:(0,a.jsx)("animate",{attributeName:"stop-color",dur:"24s",repeatCount:"indefinite",values:"#85c6e0;#24708f;#e18d4c;#1f374c;#85c6e0;"})})]})}),(0,a.jsx)(o.Path,{className:"am-lottieplayer-path",d:"M60 0H20C9 0 0 9 0 20v39.5C0 71 9 80 20 80h39.5c11 0 20.5-9 20.5-20V20C80 9 71 0 60 0zm4.9 59.7h-7.4V37.1c0-3.2.3-8.2.3-8.2h-.1s-.9 4.7-1.7 7.5l-6.8 23.3h-4l-11-30.2c-.8-2.2-2-5.8-2-5.8h-.1s-1.1 3.4-1.9 5.8L18.7 59.7H15l15-39.4h4.2l11.4 30c.3-1.4 1.2-6.1 2.4-10.2l5.6-19.8H65v39.4z"})]})}const r=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"gb/lottiecover","title":"AM LottieCover","category":"media","description":"Add a Lottie animation with a text overlay — great for headers.","keywords":["animation","gif","motion","vector","SVG","Lottie","dotLottie"],"textdomain":"am-lottieplayer","attributes":{"align":{"enum":["none","left","right","center","wide","full"],"default":"none"},"allowedBlocks":{"type":"array","default":["core/paragraph","core/heading","core/buttons"]},"alt":{"type":"string","default":""},"autoplay":{"type":"boolean","default":true},"controls":{"type":"boolean"},"content":{"type":"string","default":""},"contentPosition":{"type":"string","default":""},"clickEvent":{"type":"boolean","default":false},"dimRatio":{"type":"number","default":50},"direction":{"type":"number","default":1},"focalPoint":{"type":"object","default":{}},"fullscreen":{"type":"boolean","default":false},"hasParallax":{"type":"boolean","default":false},"height":{"type":"number","default":null},"heightUnit":{"type":"string","default":"px"},"hover":{"type":"boolean","default":false},"id":{"type":"string","default":null},"intermission":{"type":"number"},"isDark":{"type":"boolean","default":true},"loop":{"type":"boolean","default":true},"mode":{"enum":["bounce","normal"],"default":"normal"},"objectFit":{"type":"string","default":"cover"},"once":{"type":"boolean","default":false},"overlayColor":{"type":"string","default":"transparent"},"mouseOut":{"type":"string","default":"stop"},"renderer":{"enum":["svg","canvas","html"],"default":"svg"},"scrollEvent":{"type":"boolean","default":false},"scrollDelay":{"type":"number","default":null},"simple":{"type":"boolean","default":true},"speed":{"type":"number","default":1},"src":{"type":"string","default":""},"subframe":{"type":"boolean","default":true},"templateLock":{"type":["string","boolean"],"enum":["all","insert","contentOnly",false]},"width":{"type":"number","default":null}},"supports":{"anchor":true,"align":true,"html":false,"spacing":{"padding":true,"margin":["top","bottom"],"__experimentalDefaultControls":{"padding":true,"margin":true}},"color":{"text":false,"background":false},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true,"__experimentalDefaultControls":{"fontSize":true}}},"editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css"}'),s=window.wp.blockEditor,c=window.wp.data,d=window.wp.element,u=window.wp.i18n;var p=n(500),m=n.n(p);const h=window.wp.a11y,g=window.wp.dom,f=window.wp.primitives,x=(0,a.jsx)(f.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,a.jsx)(f.Path,{d:"M18.5 15v3.5H13V6.7l4.5 4.1 1-1.1-6.2-5.8-5.8 5.8 1 1.1 4-4v11.7h-6V15H4v5h16v-5z"})});function b(e){return(0,a.jsx)(o.Notice,{className:"am-lottieplayer-notice",status:"error",children:e})}const y=e=>/^(?:https?:\/\/)?(?:[a-z0-9-]+\.)+[a-z]{2,}(?:\/\S*)?$/i.test(e),v=e=>{const t=(0,g.__unstableStripHTML)(e);setTimeout(()=>{b(t)},1e3)};function j({attributes:e,setAttributes:t}){const[n,l]=(0,d.useState)({externalURL:e.src||"",mediaId:Number(e.id)}),r=(0,d.useRef)(null),p=(0,c.useSelect)(e=>{try{const{getSettings:t}=e("core/block-editor");return t().mediaUpload}catch(e){console.error(e)}},[]),g=["application/json","application/zip"],f=(e,n)=>{n(),(e=>{try{if(!e.url)return void t({id:void 0,src:void 0});l(t=>({...t,mediaId:e.id})),t({alt:e.alt,id:e.id.toString(),src:e.url})}catch(e){b((0,u.__)("There was an error uploading your file","am-lottieplayer"))}})(e),(0,h.speak)((0,u.__)("The media file has been replaced"))},j=e=>{"ArrowDown"===e.key&&(e.preventDefault(),(e.target instanceof HTMLAnchorElement||e.target instanceof HTMLButtonElement)&&e.target.click())};return(0,d.useEffect)(()=>{y(n.externalURL)&&(n.externalURL.endsWith(".lottie")||n.externalURL.endsWith(".json"))&&t({src:n.externalURL})},[n.externalURL,t]),(0,a.jsx)(o.Dropdown,{contentClassName:"block-editor-media-replace-flow__options",renderContent:({onClose:t})=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.NavigableMenu,{className:"block-editor-media-replace-flow__media-upload-menu",children:(0,a.jsxs)(s.MediaUploadCheck,{children:[(0,a.jsx)(s.MediaUpload,{allowedTypes:g,multiple:!1,value:n.mediaId,render:({open:e})=>(0,a.jsx)(o.MenuItem,{icon:(0,a.jsx)(s.BlockIcon,{icon:i}),onClick:e,children:(0,u.__)("Open Media Library")}),onSelect:e=>{f(e,t)}}),(0,a.jsx)(o.FormFileUpload,{accept:".lottie,.json",render:({openFileDialog:e})=>(0,a.jsx)(o.MenuItem,{icon:x,onClick:()=>{e()},children:(0,u.__)("Upload")}),onChange:e=>{(({target:e},t)=>{try{if(!p)throw new Error("Media Upload function is not set");const{files:n}=e;p({allowedTypes:g,filesList:n,onError:v,onFileChange:([e])=>{f(e,t)}})}catch(e){console.error(e)}})(e,t)}})]})}),(0,a.jsxs)("form",{className:m()("block-editor-media-flow__url-input",{"has-siblings":Boolean(p)}),children:[(0,a.jsx)("span",{className:"block-editor-media-replace-flow__image-url-label",children:(0,u.__)("Current media URL:")}),(0,a.jsx)(s.__experimentalLinkControl,{settings:[],showSuggestions:!1,value:{url:e.src},onChange:e=>{l(t=>({...t,externalURL:e})),r.current?.focus()}})]})]}),renderToggle:({isOpen:e,onToggle:t})=>(0,a.jsx)(o.ToolbarButton,{"aria-expanded":e,"aria-haspopup":"true",ref:r,onClick:t,onKeyDown:j,children:(0,u.__)("Replace")})})}function _({attributes:e,setAttributes:t}){return(0,a.jsx)(s.BlockControls,{children:(0,a.jsx)(j,{attributes:e,setAttributes:t})})}function w(){return(0,a.jsxs)("a",{rel:"noreferrer",target:"_blank",href:(0,u.__)("https://www.aarstein.media/en/am-lottieplayer/pro","am-lottieplayer"),style:{backgroundColor:"var(--wp-admin-theme-color)",borderRadius:"1.5em",color:"white",display:"inline-block",fontSize:".75rem",padding:".5em 1em",textDecoration:"none",textTransform:"none"},children:[(0,a.jsx)("strong",{children:"PRO"})," ",(0,u.__)("feature","am-lottieplayer")]})}function C(){return(0,a.jsxs)("a",{rel:"noreferrer",target:"_blank",href:(0,u.__)("https://www.aarstein.media/en/am-lottieplayer/pro","am-lottieplayer"),children:[(0,u.__)("Read about additional features in AM LottiePlayer PRO","am-lottieplayer"),(0,a.jsx)("sup",{style:{verticalAlign:"super"},children:(0,a.jsx)("span",{className:"dashicons dashicons-external",style:{fontSize:"1em"}})})]})}function k({attributes:e,setAttributes:t}){const{alt:n}=e;return(0,a.jsxs)(s.InspectorAdvancedControls,{children:[(0,a.jsx)(o.SelectControl,{disabled:!0,help:(0,a.jsx)(C,{}),value:"svg",label:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"pro-feature",style:{marginRight:"1em"},children:(0,u.__)("Renderer")}),(0,a.jsx)(w,{})]}),options:[{label:"SVG",value:"svg"},{label:"Canvas",value:"canvas"}],onChange:()=>{console.warn("This feature is only available in the premium version")}}),(0,a.jsx)(o.TextareaControl,{label:(0,u.__)("Description","am-lottieplayer"),value:n,help:(0,u.__)("Describe the animation. This is helpful for screen readers and search engines.","am-lottieplayer"),onChange:e=>{t({alt:e})}})]})}const S=e=>{(({ctrlKey:e,key:t,metaKey:n,shiftKey:l})=>l||"End"===t||"Home"===t||"Backspace"===t||"Tab"===t||"Enter"===t||"Delete"===t||(e||n)&&("a"===t||"c"===t||"v"===t||"x"===t||"z"===t||"t"===t||"r"===t))(e)||(({key:e})=>Number(e)>=0&&Number(e)<=9)(e)||e.preventDefault()};function R({disabled:e,id:t="",onChange:n,placeholder:l="",title:i,value:r=""}){return(0,a.jsx)(o.BaseControl,{className:"lottie-number-wrapper",help:i,id:t,children:(0,a.jsx)(o.TextControl,{disabled:e,placeholder:l,value:r,onKeyDown:S,onChange:e=>{n(e?Number(e):void 0)}})})}function N({disabled:e,id:t="",onChange:n,subTitle:l,title:i,value:r=!1}){return(0,a.jsxs)(o.BaseControl,{className:"lottie-switch-label",help:l,id:t,children:[(0,a.jsx)(o.BaseControl.VisualLabel,{children:i}),(0,a.jsx)(o.FormToggle,{disabled:e,checked:r,onChange:()=>n(!r)})]})}const L=(0,d.createContext)({animationContext:{animations:[],player:null},setAnimationContext:e=>e}),A=()=>(0,d.useContext)(L),P=L,B="am-lottieplayer",F=(0,u.__)("This feature is only available in the premium version",B);function T({attributes:e,setAttributes:t}){const{autoplay:n,controls:l,direction:i,intermission:r,loop:s,segment:c,speed:p,subframe:m}=e,{animationContext:{animations:h=[],player:g}}=A(),[f,x]=(0,d.useState)({hasMultipleAnimations:!1,totalFrames:0});return(0,d.useEffect)(()=>{var e;g&&x({hasMultipleAnimations:h.length>1,totalFrames:null!==(e=g.getLottie()?.totalFrames)&&void 0!==e?e:0})},[h.length,g]),(0,a.jsx)(o.Panel,{children:(0,a.jsxs)(o.PanelBody,{initialOpen:!0,className:"am-lottieplayer-settings",title:(0,u.__)("Animation Settings",B),children:[f.hasMultipleAnimations&&(0,a.jsxs)("div",{style:{marginBottom:"1em"},children:[(0,a.jsx)("p",{children:(0,a.jsx)(w,{})}),(0,a.jsx)("p",{children:(0,u.__)("This file contains multiple animations. To control each of them individually you need to upgrade to AM LottiePlayer PRO.",B)})]}),(0,a.jsx)(N,{id:"am-lottieplayer-controls-settings",title:(0,u.__)("Show controls",B),value:Boolean(l),onChange:e=>{t({controls:e})}}),(0,a.jsx)(N,{id:"am-lottieplayer-autoplay-settings",title:(0,u.__)("Autoplay",B),value:Boolean(n),onChange:e=>{t({autoplay:e})}}),(0,a.jsx)(N,{id:"am-lottieplayer-loop-settings",title:(0,u.__)("Loop",B),value:Boolean(s),onChange:e=>{t({loop:e})}}),(0,a.jsx)(N,{disabled:!0,id:"am-lottieplayer-playmode-settings",value:!1,title:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"pro-feature",style:{marginRight:"1em"},children:(0,u.__)("Boomerang",B)}),(0,a.jsx)(w,{})]}),onChange:()=>{console.warn(F)}}),(0,a.jsx)(N,{id:"am-lottieplayer-reverse-settings",title:(0,u.__)("Reverse",B),value:-1===i,onChange:e=>{t({direction:e?-1:1})}}),(0,a.jsx)(N,{id:"am-lottieplayer-subframe-settings",title:(0,u.__)("Subframe",B),value:Boolean(m),subTitle:(0,u.__)("Makes the animation smoother, at the cost of RAM usage",B),onChange:e=>{t({subframe:e})}}),(0,a.jsx)(o.RangeControl,{label:(0,u.__)("Speed",B),max:5,min:.5,step:.5,value:p,onChange:e=>{t({speed:e})}}),(0,a.jsxs)(o.BaseControl.VisualLabel,{children:[(0,a.jsx)("p",{children:(0,a.jsx)(w,{})}),(0,a.jsx)("span",{className:"pro-feature",children:(0,u.__)("Play only part of the animation",B)})]}),(0,a.jsxs)(o.PanelRow,{className:"lottie-segment",children:[(0,a.jsx)(R,{disabled:!0,id:"am-lottieplayer-segment-in",placeholder:"1",title:(0,u.__)("First frame",B),value:c?.[0],onChange:()=>{console.warn(F)}}),(0,a.jsx)(R,{disabled:!0,id:"am-lottieplayer-segment-out",placeholder:(f.totalFrames+1).toString(),title:(0,u.__)("Last frame",B),value:c?.[1],onChange:()=>{console.warn(F)}})]}),Boolean(s)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.BaseControl.VisualLabel,{children:(0,u.__)("Intermission",B)}),(0,a.jsx)(o.PanelRow,{className:"lottie-intermission",children:(0,a.jsx)(R,{id:"am-lottieplayer-intermission",placeholder:"0",value:r,title:(0,u.__)("Pause between loops, in miliseconds. 1s = 1000",B),onChange:e=>{t({intermission:e})}})})]}),(0,a.jsx)(C,{})]})})}function U({attributes:e,setAttributes:t}){const{background:n}=e;return(0,a.jsx)(o.Panel,{children:(0,a.jsx)(o.PanelBody,{initialOpen:!0,className:"am-lottieplayer-settings",title:(0,u.__)("Background Color","am-lottieplayer"),children:(0,a.jsx)(o.ColorPicker,{color:n,onChange:e=>{t({background:e})}})})})}let I=function(e){return e.Center="center",e.Full="full",e.Left="left",e.None="none",e.Right="right",e.Wide="wide",e}({}),E=function(e){return e.Pause="pause",e.Reverse="reverse",e.Stop="stop",e.Void="void",e}({});const M="am-lottieplayer";function O({attributes:e,setAttributes:t}){const{align:n,fullscreen:l,height:i,objectFit:r="contain",width:s}=e;return(0,a.jsx)(o.Panel,{children:(0,a.jsxs)(o.PanelBody,{initialOpen:!0,className:"am-lottieplayer-settings",title:(0,u.__)("Dimensions",M),children:[(!l||n!==I.Full)&&(0,a.jsxs)(o.PanelRow,{className:"lottie-dimensions",children:[(0,a.jsx)(R,{id:"am-lottieplayer-width-settings",title:(0,u.__)("Width",M),value:(c=s,n===I.Full||n===I.Wide?"100%":c&&"0"!==c?c:void 0),disabled:n===I.Full||n===I.Wide,placeholder:n===I.Full||n===I.Wide?"100%":"auto",onChange:e=>{t({width:null!=e?e:null})}}),(0,a.jsx)(R,{disabled:l,id:"am-lottieplayer-height-settings",placeholder:"auto",title:(0,u.__)("Height",M),value:i&&"0"!==i.toString()?i:void 0,onChange:e=>{t({height:e})}})]}),(n===I.Full||n===I.Wide)&&(0,a.jsx)(N,{id:"am-lottieplayer-fullscreen-settings",title:(0,u.__)("Fill screen",M),value:l,onChange:e=>{t({fullscreen:e})}}),(0,a.jsx)(o.SelectControl,{label:(0,u.__)("Object fit"),value:r,options:[{label:(0,u.__)("Contain",M),value:"contain"},{label:(0,u.__)("Cover",M),value:"cover"},{label:(0,u.__)("Fill",M),value:"fill"},{label:(0,u.__)("None",M),value:"none"}],onChange:e=>{t({objectFit:e})}})]})});var c}function D({disabled:e,help:t,id:n="",onChange:l,placeholder:i="",title:r,value:s=""}){return(0,a.jsxs)(o.BaseControl,{className:"lottie-number-wrapper",help:t,id:n,children:[(0,a.jsx)(o.BaseControl.VisualLabel,{children:r}),(0,a.jsx)(o.TextControl,{placeholder:i,value:null!=s?s:"",disabled:e,onChange:e=>{l(e)}})]})}const z="am-lottieplayer";function H({attributes:e,setAttributes:t}){const{clickEvent:n,hover:l,mouseout:i,once:r,scrollDelay:s,scrollEvent:c,selector:d}=e;return(0,a.jsx)(o.Panel,{children:(0,a.jsxs)(o.PanelBody,{initialOpen:!0,className:"am-lottieplayer-settings",title:(0,u.__)("Interactions",z),children:[(0,a.jsx)(N,{disabled:!0,id:"am-lottieplayer-animateOnScroll-settings",value:!1,title:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"pro-feature",style:{marginRight:"1em"},children:(0,u.__)("Animate on scroll",z)}),(0,a.jsx)(w,{})]}),onChange:()=>{console.warn("This feature is only available in the premium version")}}),(0,a.jsx)(N,{id:"am-lottieplayer-click-settings",title:(0,u.__)("Play on click",z),value:n,onChange:e=>{t({clickEvent:e})}}),(0,a.jsx)(N,{id:"am-lottieplayer-hover-settings",title:(0,u.__)("Play on mouseover",z),value:l,onChange:e=>{t({hover:e})}}),l&&(0,a.jsx)(o.SelectControl,{label:(0,u.__)("On mouseout",z),value:i,options:[{label:(0,u.__)("No event",z),value:E.Void},{label:(0,u.__)("Stop",z),value:E.Stop},{label:(0,u.__)("Pause",z),value:E.Pause},{label:(0,u.__)("Reverse",z),value:E.Reverse}],onChange:e=>{t({mouseout:e})}}),(l||n)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(D,{disabled:!0,id:"am-lottieplayer-settings",placeholder:"#",value:d?.id,help:(0,u.__)("Anchor tag (id) for an element you want to trigger the animation, either by hover or click.",z),title:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"pro-feature",style:{marginRight:"1em"},children:(0,u.__)("Trigger element",z)}),(0,a.jsx)(w,{})]}),onChange:e=>{t({selector:{...d,id:e}})}}),(0,a.jsx)(N,{disabled:!0,id:"am-lottieplayer-selector-settings",value:d?.exclude,title:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"pro-feature",style:{display:"block",marginBottom:"1em"},children:(0,u.__)("Apply interaction only to trigger element",z)}),(0,a.jsx)(w,{})]}),onChange:e=>{t({selector:{...d,exclude:e}})}})]}),(0,a.jsx)(N,{id:"am-lottieplayer-scroll-settings",value:c,title:(0,u.__)("Play on scroll, when visible in viewport",z),onChange:e=>{t({scrollEvent:e})}}),c&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(N,{id:"am-lottieplayer-once-settings",title:(0,u.__)("Play only once",z),value:r,onChange:e=>{t({once:e})}}),(0,a.jsx)(o.RangeControl,{max:50,min:0,step:1,value:null!=s?s:1,label:(0,u.__)("Delay, in 10th of a second",z),onChange:e=>{t({scrollDelay:e})}})]}),(0,a.jsx)(C,{})]})})}function V({attributes:e,className:t,clientId:n,context:l,isSelected:o,setAttributes:i}){const r=(0,d.useId)(),{setAnimationContext:c}=A();return(0,d.useEffect)(()=>{c(t=>{var n;return t.animations.length>0?t:{...t,animations:[{autoplay:e.autoplay,direction:e.direction,id:null!==(n=e.id)&&void 0!==n?n:r,loop:e.loop,mode:e.mode,speed:e.speed}]}})},[e.autoplay,e.direction,e.id,e.loop,e.mode,e.speed,r,c]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s.InspectorControls,{children:[(0,a.jsx)(T,{attributes:e,className:t,clientId:n,context:l,isSelected:o,setAttributes:i}),(0,a.jsx)(H,{attributes:e,className:t,clientId:n,context:l,isSelected:o,setAttributes:i}),(0,a.jsx)(k,{attributes:e,className:t,clientId:n,context:l,isSelected:o,setAttributes:i})]}),(0,a.jsxs)(s.InspectorControls,{group:"styles",children:[(0,a.jsx)(O,{attributes:e,className:t,clientId:n,context:l,isSelected:o,setAttributes:i}),(0,a.jsx)(U,{attributes:e,className:t,clientId:n,context:l,isSelected:o,setAttributes:i})]})]})}function W(e,t){const n=(0,d.useRef)(!0);(0,d.useEffect)(()=>{n.current?n.current=!1:e()},t)}const $=e=>{if(e&&"number"==typeof e)return`${e}px`};function G({attributes:e,clientId:t}){var n;const{animationContext:{player:l},setAnimationContext:o}=A(),{getBlockIndex:i}=(0,c.useSelect)(e=>e("core/block-editor"),[]),r=i(t),s=(0,d.useRef)(null),u=()=>{l&&l.reload()};return(0,d.useEffect)(()=>{s.current&&o(e=>({...e,player:s.current}))},[o]),function(e,t,n={}){n.element||(n.element=window);const l=(0,d.useRef)(t);(0,d.useEffect)(()=>{l.current=t},[t]),(0,d.useEffect)(()=>{const t=n.element&&"current"in n.element?n.element.current:n.element;if(!t)return;const o=e=>{l.current(e)};return t.addEventListener(e,o,n),()=>{t.removeEventListener(e,o,n.capture)}},[e,n])}("ready",()=>{o(e=>{var t;return{...e,animations:null!==(t=l?.getManifest()?.animations)&&void 0!==t?t:[]}})},{element:l}),W(()=>{},[r,e.intermission,e.src,e.objectFit,u]),(0,a.jsx)("dotlottie-player",{simple:!0,autoplay:e.autoplay?"":null,class:"lottie-element",controls:e.controls?"":null,description:e.alt,direction:e.direction,id:e.id,intermission:e.intermission,loop:e.loop?"":null,mode:e.mode,objectfit:e.objectFit,ref:s,speed:e.speed,src:null!==(n=e.src)&&void 0!==n?n:"",subframe:e.subframe?"":null,style:{backgroundColor:e.background,height:$(e.height),margin:"0 auto",width:(p=e.width,e.align===I.Wide||e.align===I.Full?"100%":$(p))}});var p}const K="am-lottieplayer";function J({attributes:e,setAttributes:t}){const[n,l]=(0,d.useState)({externalURL:e.src||"",hasDropped:!1});return(0,d.useEffect)(()=>{y(n.externalURL)&&(n.externalURL.endsWith(".lottie")||n.externalURL.endsWith(".json"))&&t({src:n.externalURL})},[n.externalURL,t]),(0,a.jsx)(s.MediaUploadCheck,{children:(0,a.jsx)(s.MediaPlaceholder,{accept:".lottie, .json",allowedTypes:["application/json","application/zip"],icon:(0,a.jsx)(s.BlockIcon,{icon:i}),labels:{instructions:n.hasDropped?(0,u.__)("Dropped!",K):(0,u.__)("Add Lottie animations from your Media Library to your WordPress post.",K),title:(0,u.__)("AM Lottie Animation",K)},onError:e=>{b(e)},onSelect:e=>{try{if(!e.url)return void t({id:void 0,src:void 0});t({alt:e.alt,id:e.id.toString(),src:e.url})}catch(e){console.error(e),b((0,u.__)("Failed to upload Lottie"))}},onHTMLDrop:()=>{l(e=>({...e,hasDropped:!0}))},children:(0,a.jsx)(s.URLInput,{value:n.externalURL,onChange:e=>{l(t=>({...t,externalURL:e}))}})})})}function X({attributes:e,clientId:t,setAttributes:n}){const[l,o]=(0,d.useState)({isPlaceholder:!0});return W(()=>{o(()=>({isPlaceholder:!e.src||""===e.src}))},[e.src]),(0,a.jsx)(a.Fragment,{children:l.isPlaceholder?(0,a.jsx)(J,{attributes:e,setAttributes:n}):(0,a.jsx)(G,{attributes:e,clientId:t})})}function q({children:e,className:t,fullscreen:n,onResize:l,onResizeStart:i,onResizeStop:r,showHandle:s,...c}){const[u,p]=(0,d.useState)(!1);return(0,a.jsx)(o.ResizableBox,{className:m()(t,{"is-resizing":u}),enable:{bottom:!n},minHeight:10,showHandle:s,onResizeStart:i,onResize:(e,t,n)=>{l(n.clientHeight),u||p(!0)},onResizeStop:(e,t,n)=>{r(n.clientHeight),p(!1)},...c,children:e})}function Q({children:e}){const[t,n]=(0,d.useState)({animations:[],player:null});return(0,a.jsx)(P.Provider,{value:{animationContext:t,setAnimationContext:n},children:e})}const Y=window.wp.blob;(0,l.registerBlockType)(r,{edit:function({attributes:e,className:t,clientId:n,context:l,isSelected:i,setAttributes:r,toggleSelection:p}){const{allowedBlocks:h=["core/paragraph","core/heading","core/buttons"],background:g,fullscreen:f,height:x,heightUnit:b="px",id:y,src:v,templateLock:j}=e,w=((e,t)=>!e&&(0,Y.isBlobURL)(t))(y,v),C=(0,d.useRef)(),[k,S]=(0,d.useState)(!0),R=(0,s.useBlockProps)({ref:C}),N={minHeight:f?"100vh":(x?`${x}${b}`:x)||void 0},L=(0,c.useSelect)(e=>Boolean(e(s.store)?.getBlock(n)?.innerBlocks?.length),[n]),A=[["core/paragraph",{align:"center",placeholder:(0,u.__)("Write title…","am-lottieplayer"),fontSize:"large"}]],P=(0,s.useInnerBlocksProps)({className:"wp-block-gb-lottiecover__inner-container"},{allowedBlocks:h,template:L?void 0:A,templateInsertUpdatesSelection:!0,templateLock:j});return(0,d.useMemo)(()=>{S(!v||""===v)},[v]),(0,a.jsxs)(Q,{children:[(0,a.jsx)(V,{attributes:e,className:t,clientId:n,context:l,isSelected:!1,setAttributes:r}),(0,a.jsxs)("div",{...R,className:m()({"is-placeholder":k},R.className),style:{...N,...R.style},children:[(0,a.jsx)(q,{className:"block-library-lottiecover__resize-container",fullscreen:f,showHandle:i,onResize:e=>{r({height:e})},onResizeStart:()=>{r({heightUnit:"px"}),p&&p(!1)},onResizeStop:e=>{r({height:e}),p&&p(!0)}}),(0,a.jsx)("span",{"aria-hidden":"true",className:"wp-block-gb-lottiecover__background",hidden:k,style:{backgroundColor:g}}),w&&(0,a.jsx)(o.Spinner,{}),(0,a.jsx)(X,{attributes:e,className:t,clientId:n,context:l,isSelected:i,setAttributes:r}),(0,a.jsx)(_,{attributes:e,setAttributes:r}),!k&&(0,a.jsx)("div",{...P})]})]})},icon:i,save:function({attributes:e}){const t=e.height&&e.heightUnit?`${e.height}${e.heightUnit}`:e.height,n={minHeight:e.fullscreen?"100vh":t||void 0};return(0,a.jsxs)("div",{...s.useBlockProps.save({style:n}),children:[(0,a.jsx)("span",{"aria-hidden":"true",className:"wp-block-gb-lottiecover__background",style:{backgroundColor:e.background}}),(0,a.jsx)("dotlottie-player",{controls:e.controls?"":null,"data-click":e.clickEvent,"data-delay":e.scrollDelay,"data-direction":e.direction,"data-mouseout":e.mouseout,"data-mouseover":e.hover,"data-once":e.once,"data-scroll":e.scrollEvent,description:e.alt,direction:e.direction,intermission:e.intermission,loop:e.loop?"":null,mode:e.mode,objectfit:e.objectFit,simple:e.simple,speed:e.speed,src:e.src||"",subframe:e.subframe?"":null,autoplay:e.autoplay&&!e.scrollEvent?"":null,class:"lottie-element"+(e.selector?.id?" has-selector":""),style:{backgroundColor:e.background,height:e.height&&"number"==typeof e.height?`${e.height}px`:void 0,width:(l=e.width,e.align===I.Wide||e.align===I.Full?"100%":l&&"number"==typeof l?`${l}px`:void 0)}}),(0,a.jsx)("div",{...s.useInnerBlocksProps.save({className:"wp-block-gb-lottiecover__inner-container"})})]});var l}})}},n={};function l(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,l),a.exports}l.m=t,e=[],l.O=(t,n,o,a)=>{if(!n){var i=1/0;for(d=0;d<e.length;d++){for(var[n,o,a]=e[d],r=!0,s=0;s<n.length;s++)(!1&a||i>=a)&&Object.keys(l.O).every(e=>l.O[e](n[s]))?n.splice(s--,1):(r=!1,a<i&&(i=a));if(r){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,o,a]},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={678:0,738:0};l.O.j=t=>0===e[t];var t=(t,n)=>{var o,a,[i,r,s]=n,c=0;if(i.some(t=>0!==e[t])){for(o in r)l.o(r,o)&&(l.m[o]=r[o]);if(s)var d=s(l)}for(t&&t(n);c<i.length;c++)a=i[c],l.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return l.O(d)},n=globalThis.webpackChunkam_lottieplayer=globalThis.webpackChunkam_lottieplayer||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=l.O(void 0,[738],()=>l(830));o=l.O(o)})();